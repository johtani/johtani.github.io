<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>windows on @johtaniの日記 3rd</title>
    <link>https://blog.johtani.info/tags/windows/</link>
    <description>Recent content in windows on @johtaniの日記 3rd</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Sun, 18 Oct 2020 23:01:50 +0900</lastBuildDate><atom:link href="https://blog.johtani.info/tags/windows/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Windowsへの移行（その１）</title>
      <link>https://blog.johtani.info/blog/2020/10/18/restart-windows-no1/</link>
      <pubDate>Sun, 18 Oct 2020 23:01:50 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2020/10/18/restart-windows-no1/</guid>
      <description>ヒゲが不評だったのでいつも通りの長さに切りました。 前回「Windowsをお試し中」と書きましたが、いくつかソフトをインストールしたりしたので</description>
      <content:encoded><p>ヒゲが不評だったのでいつも通りの長さに切りました。</p>
<p>前回「<a href="https://blog.johtani.info/blog/2020/10/15/restart-windows/">Windowsをお試し中</a>」と書きましたが、いくつかソフトをインストールしたりしたので現状を忘れないようにブログに残しておきます（また同じ作業する予定なので）</p>
<h2 id="インストールしたものたち">インストールしたものたち</h2>
<p>今のところインストールしたのはこの辺。
特にコメントしたいものについてこのあと明記します。</p>
<ul>
<li>ドライバインストール from CD</li>
<li>MX Ergoのソフトインストール。接続はコネクター</li>
<li>Windowsアップデート</li>
<li>Chrome</li>
<li>Visual Studio ビルドツール(Lindera用)</li>
<li>JetBrains Toolbox
<ul>
<li>IntelliJ</li>
<li>CLion</li>
<li>Rider</li>
</ul>
</li>
<li>Visual Studio Code</li>
<li>Slack</li>
<li>Teams</li>
<li>Google Drive共有</li>
<li>Gitter</li>
<li><del>Divvy for Windows</del></li>
<li>Zoom</li>
<li>DeepL</li>
<li>Sophos</li>
<li><a href="https://help.twitter.com/ja/using-twitter/twitter-windows-10">Twitter for Windows</a></li>
<li>Office 365</li>
<li>AutoHotKey</li>
<li>WSL2 - Ubuntu</li>
<li>Windows Terminal</li>
<li><a href="https://www.rust-lang.org/tools/install">Rustup</a></li>
<li>Git for Windows</li>
<li>wsl-ssh-agent</li>
<li>PeaZip</li>
<li>Speccy</li>
<li>Hugo (WSL2のUbuntuにapt-get install hugoした)</li>
<li><a href="https://github.com/microsoft/PowerToys">PowerToys</a></li>
</ul>
<h3 id="autohotkey">AutoHotKey</h3>
<p>前回のブログに書いたように、カーソル系のEmacsショートカットが体に染みついて離れないのです。
そこで、<a href="https://linuxfan.info/windows-emacs-keybindings">ググって見つけた記事はこちら</a>。
<a href="https://www.autohotkey.com/">AutoHotKey</a>というツールが
Windowsに常駐して、特定のキー入力の時に、別の操作を実行してくれるツールです。</p>
<p>見つけた記事にあった、<a href="https://github.com/lintaro-jp/gtk-emacs-theme-like.ahk">https://github.com/lintaro-jp/gtk-emacs-theme-like.ahk</a>のキーマップをもとに、いくつか変更したものを使用させていただいています。</p>
<p>書き換えたのは、以下の通りです。</p>
<ul>
<li>Ctrl+\でIMEの切り替え（Wnn風）</li>
<li>Ctrl+kをEmacsと同じ挙動に（もとにしたキーマップでは、カーソルから行末までが削除されてしまう）</li>
<li>Win+sでもファイル保存（Ctrl+sと同じ挙動に。デフォルトではCortanaが起動して邪魔くさいので）</li>
</ul>
<p>すごく快適です。そのうち、もう少し自分が使いやすいようにキーマップを追加していったりするかもしれません。
特に、Macのショートカットがしみついているものについてなどです（仮想デスクトップ切り替えとか？）</p>
<h3 id="powertoys">PowerToys</h3>
<p>Divvyをインストールしたのですが、グローバルショートカットがうまく動かなくていまいちでした（なんでだろ？）
そこでググって見つけたのが<a href="https://www.atmarkit.co.jp/ait/articles/1912/26/news019.html">@ITのPowerToysの記事</a>でした。
<a href="https://github.com/microsoft/PowerToys">PowerToys</a>はMS製のOSSツールで、GitHub上で公開されています。
中には「ColorPicker」、「FancyZones」、「File Explowrer Add-ons」など、複数のツールが入っています。
「<a href="https://github.com/microsoft/PowerToys/wiki/FancyZones-Overview">FancyZones</a>」です。</p>
<p>Windowsでは、デフォルトで、アプリにフォーカスしているときにWin＋カーソルでウィンドウの配置場所をいくつか（左右どちらかに半分、4分の1(右上、左上など)）に配置してくれるAero Snapというものが動いています。が、上半分などデフォルトにない柔軟な配置を設定することができません。
MacではDivvyというツールをいれて、それを実施していたのですが、先ほど書いたようにWindows版はあるものの、なぜかグローバルショートカットが動かず、システムタスクトレイのアイコンをクリックしなければいけませんでした。</p>
<p>それを解消してくれるのがFancyZonesです。
FancyZonesの設定項目で、<a href="https://github.com/microsoft/PowerToys/wiki/FancyZones-Overview#picking-a-layout">自分で画面上にどのような割り当て領域を作るかを設定できます</a>。さらに、マルチディスプレイ、仮想デスクトップを使っている場合、それぞれのディスプレイかつ仮想デスクトップで個別にレイアウトが設定できるようになります。
レイアウトを設定した後は、Shiftキーを押しながらウィンドウを移動すると、設定した領域が出てきて、あとは、割り当てたい領域にウィンドウを移動するだけでその領域いっぱいにウィンドウをリサイズしてくれます。
また、設定を変えることで、Shiftキーを押さなくてもウィンドウ移動するだけで領域にリサイズすることも可能です。また、Aero Snapの機能をオーバーライドしてWin＋カーソルで動作させることも可能になります。</p>
<h3 id="wsl2--windows-terminal">WSL2 + Windows Terminal</h3>
<p>三宅さんからコメントを頂いたので。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">もう少し幅広い感じですかね。あわせて Windows Terminal 使うとわりと快適です。</p>&mdash; miyake (@kazuyukimiyake) <a href="https://twitter.com/kazuyukimiyake/status/1316602393283366913?ref_src=twsrc%5Etfw">October 15, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>なんとなく噂は聞いていましたがということで、<a href="https://docs.microsoft.com/ja-jp/windows/wsl/about">MSのドキュメント</a>を見ながらインストールしました。<a href="https://docs.microsoft.com/ja-jp/windows/wsl/install-win10">クイックスタート</a>に則って作業するだけで特に問題なくUbuntuまで無事インストールできました。
Windows Terminalも同様です（クイックスタートで入れることになる）。</p>
<h3 id="git-for-windows--wsl-ssh-agent">Git for Windows + wsl-ssh-agent</h3>
<p>少してこずったのがこちらです。
<a href="https://docs.microsoft.com/ja-jp/windows/wsl/tutorials/wsl-git">チュートリアル</a>に記述はあったのですが、どちらで作業するのか？などが少しわかりにくかったので。<a href="https://scrapbox.io/saitotetsuya/Windows_10%E3%81%AEssh-agent%E3%82%92WSL2%E3%81%8B%E3%82%89%E4%BD%BF%E3%81%86">ググって出てきた記事</a>をもとに作用しました。</p>
<p>RustのプロジェクトファイルをMacから丸ごとコピーしていたのですが、Git for Windowsを入れるまでは、CLion+Rust pluginの環境では、<code>.git</code>ファイルをきちんと認識してくれませんでした（この時WSL2と少し混同してた）。</p>
<p>無事環境は用意できました。
作業の手順は以下のような感じです。
Macで使用していた<code>.ssh</code>のディレクトリを持ってきて作業しました。</p>
<h4 id="windows側での作業">Windows側での作業</h4>
<ol start="0">
<li>Macから<code>.ssh</code>ディレクトリを<code>c:\\Users\johta\</code>にコピー</li>
<li>Git for Windowsのインストール</li>
<li>OpenSSHクライアントの設定
<ul>
<li>管理者権限でコマンドプロンプトを起動して
<ul>
<li><code>sc config ssh-agent start=auto</code></li>
<li><code>sc start ssh-agent</code></li>
</ul>
</li>
</ul>
</li>
<li>[wsl-ssh-agent(https://github.com/rupor-github/wsl-ssh-agent)のインストール
<ul>
<li>ダウンロードして<code>.7z</code>ファイルを展開</li>
<li><code>wsl-ssh-agent-gui.exe</code>と<code>npiperelay.exe</code>を<code>c:\\Users\johta\bin</code>に移動</li>
<li><code>c:\\Users\johta\bin\wsl-ssh-agent-gui.exe</code>のショートカットをスタートアップに作成</li>
<li>作成したスタートアップのリンク先に<code> -setenv -envname=WSL_AUTH_SOCK</code>を追加</li>
</ul>
</li>
<li>Git BashでOpenSSHを利用するように設定
<ul>
<li><code>setx GIT_SSH C:\\Windows\system32\OpenSSH\ssh.exe</code></li>
</ul>
</li>
<li><code>ssh-add</code>で秘密鍵を登録
<ul>
<li><code>ssh-add .ssh/id_rsa</code></li>
</ul>
</li>
</ol>
<h4 id="wsl2のubuntuでの作業">WSL2のUbuntuでの作業</h4>
<ol>
<li>Ubuntuはgitがすでに入っていたのでインストールはスキップ</li>
<li><code>git config --global user.name &quot;Jun Ohtani&quot;</code></li>
<li><code>git config --global user.email &quot;メールアドレス&quot;</code></li>
<li><code>mkdir .ssh</code></li>
<li><code>.bashrc</code>の最後行に<a href="https://github.com/rupor-github/wsl-ssh-agent#wsl-2-compatibility">wsl-ssh-agentのWSL2 compatibility</a>にある<code>export</code>から<code>fi</code>までをコピー。この時、パスを自分のパスに変更すること(私の場合<code>$HOME/winhome/.wsl</code>の部分を<code>/mnt/c/Users/johta/bin</code>に書き換えました)</li>
</ol>
<p>これで、WSL2側では<code>.ssh</code>のファイルを管理しなくても、Windows側のOpenSSHに接続してssh周りの処理をしてくれるようになりました。</p>
<h3 id="peazip">PeaZip</h3>
<p>wsl-ssh-agentが<code>.7z</code>形式で圧縮されていたので、ダウンロードしました。
とりあえずこれを入れてみたのですが、ほかにお勧めがあれば教えてほしいです。</p>
<h3 id="speccy">Speccy</h3>
<p>CPUの温度やスレッドごとのCPU使用率などを見てみたいので入れてみました。
これもとりあえず入れてみた感じなので、ほかにお勧めのソフトがあれば教えてもらえればと。
リソースマネージャーでもスレッドごとのCPU使用率は見れたのですが、温度が見れなかったので。</p>
<h3 id="hugo-">Hugo +</h3>
<p>WSL2にあるUbuntuに<code>sudo apt-get install hugo</code>してインストールしました。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">そこで、VS Code の Remote Extension です。WSL2 から ‘code’ で起動できます😎</p>&mdash; Daiyu Hatakeyama (@dahatake) <a href="https://twitter.com/dahatake/status/1317257121658884097?ref_src=twsrc%5Etfw">October 17, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>あとは、畠山さんに教えてもらったVSCodeの<a href="https://github.com/Microsoft/vscode-remote-release">Remote - WSL</a>を入れて、
WLSに接続した状態でVSCodeを起動して記事のMarkdownを書くと、VSCodeのターミナルを開くとWSL2に接続してくれて、hugoコマンドが実行できます。</p>
<h2 id="まとめ">まとめ</h2>
<p>とりあえず、ブログが書ける環境ができました。
Mac上にあった各種プロジェクトのディレクトリをコピーして、Rustの開発もできるようになりました。</p>
<p>今後も環境構築は続いていきます。Javaとか入ってないし。
SDKMan使ってたけど、切り替えどうしよう？とか。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">そういえばSDKMAN!をJDK切替に使ってたけど、結局windows側のパスは通らんので自力インストールになった。scoopがよさげ</p>&mdash; きしだൠ(K8S(Kishidades)) (@kis) <a href="https://twitter.com/kis/status/1317274361854791680?ref_src=twsrc%5Etfw">October 17, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>IDE系から呼び出すターミナルはWSL2がいいなぁとか。</p>
<blockquote class="twitter-tweet"><p lang="und" dir="ltr"><a href="https://t.co/X4Jj4tih1I">https://t.co/X4Jj4tih1I</a></p>&mdash; そーだい@初代ALF (@soudai1025) <a href="https://twitter.com/soudai1025/status/1317270352431476737?ref_src=twsrc%5Etfw">October 17, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>ほかにもおすすめなどがあれば教えてください！</p>
</content:encoded>
    </item>
    
    <item>
      <title>Windowsをお試し中</title>
      <link>https://blog.johtani.info/blog/2020/10/15/restart-windows/</link>
      <pubDate>Thu, 15 Oct 2020 11:04:02 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2020/10/15/restart-windows/</guid>
      <description>ヒゲが伸びてきて(試しに伸ばしてる)不評を買っている今日このごろです。 自宅で作業することが多くなってきたので、自作PCでもと思っていますが、</description>
      <content:encoded><p>ヒゲが伸びてきて(試しに伸ばしてる)不評を買っている今日このごろです。</p>
<p>自宅で作業することが多くなってきたので、自作PCでもと思っていますが、OSをどうしようか悩み中。
とりあえず、試しにWindowsにしてみるかということで、10年ぶりくらいにWindowsに帰ってきました
(この文章はMacで入力してますが)。</p>
<h2 id="むかしむかし">むかしむかし</h2>
<p>もともとはWindowsを使っていたのですが、Win7くらいに32bitと64bit混在の時期に、
Xkeymacsを利用するときに少し手間がかかるなぁと思ったのもあり、Macに移行しました。
Macだと自分がよく使うEmacsっぽいショートカットがデフォルトいろんなアプリで使用できる利点があったからです。</p>
<p>ただ、最近、<a href="https://nzxt.jp/products/detail/kraken-z.html">TL上で光るPC</a>とかを見てしまったのもあり、
自作PC(どちらかというとDIYかな?)熱が復活しました。
まだ、OSをWindows、Ubuntuのどちらをメインにしようかな?と悩んでいるところではありますが、まずはWndowsをちょっと試してみるかなと。</p>
<p>まずは、やりたいことをちょっとリストアップしておこうかなと思います(きっと、先人の知見が集まってくるはず!)。</p>
<h2 id="どうしてもほしい機能">どうしてもほしい機能</h2>
<p>大学の頃にSunOSやSolarisを使用し、Emacsでメールを読んだしていたせいで、Emacsのショートカット操作が体から抜けない状態です(抜こうとしてないという話もあるが)。
ですので、社会人になってからWindowsを利用していたときはXkeymacsというソフトのお世話になっていました(神アプリでした。まだあるのかな?)。</p>
<h3 id="ショートカット操作とか">ショートカット操作とか</h3>
<ul>
<li>カーソル移動(必須)
<ul>
<li>上下左右：<code>Ctrl+n、p、f、b</code></li>
<li>行頭、行末：<code>Ctrl+a、e</code></li>
</ul>
</li>
<li>編集
<ul>
<li>デリートキー：<code>Ctrl+d</code>
<ul>
<li><code>Ctrl+h</code>がバックスペースだけど使わないな、そういえば</li>
</ul>
</li>
<li>カーソルから行末までをカット：<code>Ctrl+k</code>
<ul>
<li>必須!</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>カーソル移動がホームポジションから移動しなくてもいいのもあって、多用してしまっています。
これ、WindowsとかUbuntuでいい感じにできるのあるのかな?
できれば、IMEやブラウザのURLのサジェストなどもこのカーソル移動で移動できると嬉しいです。
(昔は<code>M-%</code>とかで置換などもやってたけど最近はやらないな。)</p>
<h2 id="デスクトップ操作系">デスクトップ操作系</h2>
<ul>
<li>仮想デスクトップ
<ul>
<li>やることごとにデスクトップを切り替えて使うので</li>
</ul>
</li>
<li>ウィンドウのリサイズ?
<ul>
<li><a href="https://mizage.com/divvy/">Divvy</a>というアプリをmacOSで利用中</li>
<li>自分で登録したサイズ(例：画面右半分)にウィンドウサイズを変更などがショートカットで可能</li>
</ul>
</li>
</ul>
<p>仮想デスクトップはあると思うけど、ウィンドウのリサイズの便利なツールあるかなぁ?</p>
<h2 id="利用するアプリ">利用するアプリ</h2>
<h3 id="snsオンラインミーティング">SNS、オンラインミーティング</h3>
<ul>
<li>Twitter
<ul>
<li>macOSではTweetDeckと夜フクロウを使用</li>
</ul>
</li>
<li>Slack
<ul>
<li>ネイティブアプリ</li>
</ul>
</li>
<li>Gitter
<ul>
<li>ネイティブアプリ</li>
</ul>
</li>
<li>Chatwork
<ul>
<li>ブラウザ</li>
</ul>
</li>
<li>Teams
<ul>
<li>ネイティブアプリ</li>
</ul>
</li>
<li>Zoom
<ul>
<li>ネイティブアプリ</li>
</ul>
</li>
<li>Google Meet
<ul>
<li>ブラウザ</li>
</ul>
</li>
<li>Discord
<ul>
<li>ネイティブアプリ(最近使ってないな)</li>
</ul>
</li>
</ul>
<p>色々使ってますが、最悪ブラウザで使う感じかな?</p>
<h3 id="オンラインストレージ">オンラインストレージ</h3>
<ul>
<li>Google Drive
<ul>
<li>同期アプリ使ってる</li>
</ul>
</li>
<li>Dropbox
<ul>
<li>あんまり使ってない</li>
</ul>
</li>
</ul>
<h3 id="開発系">開発系</h3>
<ul>
<li>JetBrainsのIDE
<ul>
<li>Toolbox App</li>
<li>IntelliJ</li>
<li>CLion + Rust plugin</li>
<li>Rider</li>
</ul>
</li>
<li>zsh
<ul>
<li>macOSで標準になったから</li>
</ul>
</li>
<li>コマンド系
<ul>
<li>git</li>
<li>SDKman
<ul>
<li>ant</li>
<li>gradle</li>
<li>JDK</li>
</ul>
</li>
<li>Rust</li>
<li>Hugo</li>
</ul>
</li>
<li><a href="https://jasperapp.io/">Jasper</a>
<ul>
<li>GitHubのIssueとかを見るネイティブアプリ</li>
<li>自分が関連しているIssueとかが楽に見える(メールだと埋もれてしまう)</li>
</ul>
</li>
</ul>
<h3 id="エディタ">エディタ</h3>
<ul>
<li>Visual Studio Code
<ul>
<li>開発系では?と思われるかもだけど、Markdownエディタとして使ってる</li>
</ul>
</li>
<li>Emacs by Homebrew
<ul>
<li>最近は起動してない</li>
</ul>
</li>
</ul>
<h3 id="その他">その他</h3>
<ul>
<li>カレンダー
<ul>
<li>macOSのカレンダーで複数のGoogleカレンダーを取り込んでる</li>
</ul>
</li>
<li>ScanSnap
<ul>
<li>Ubuntuで使えるやつあるのかな?</li>
<li>Mac miniにつないであるので、画面共有とかで入れればそれでOK</li>
</ul>
</li>
<li>画面共有
<ul>
<li>winやubuntuからMac miniとか見えるかな?</li>
</ul>
</li>
<li>キーボード共有
<ul>
<li>macも使うので、KVMスイッチとかかな?</li>
</ul>
</li>
<li>マウス共有
<ul>
<li>MX ErgoのFlowを使うと行き来が簡単にできたので良さそう。</li>
<li>ただし、Ubuntuだとどうなるのか?</li>
</ul>
</li>
<li>システム監視系
<ul>
<li>CPUの温度とかCPU、メモリの使用率とか</li>
</ul>
</li>
</ul>
<h2 id="まとめ">まとめ</h2>
<p>とりあえずこんなところです。カーソル移動系が一番重要なので、そのへんから色々とちょっとずつ試していく予定。
ぜひオススメアプリとかあれば教えていただければと。</p>
</content:encoded>
    </item>
    
  </channel>
</rss>
