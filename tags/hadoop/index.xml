<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">

  <channel>
    <title>Hadoop on @johtaniの日記 3rd</title>
    <link>https://blog.johtani.info/tags/hadoop/</link>
    <description>Recent content in Hadoop on @johtaniの日記 3rd</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Thu, 07 Nov 2013 10:11:00 +0900</lastBuildDate><atom:link href="https://blog.johtani.info/tags/hadoop/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Cloudera World Tokyo 2013に参加しました！ #cwt2013 </title>
      <link>https://blog.johtani.info/blog/2013/11/07/cloudera-world-tokyo-2013/</link>
      <pubDate>Thu, 07 Nov 2013 10:11:00 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2013/11/07/cloudera-world-tokyo-2013/</guid>
      <description>Cloudera World Tokyo 2013に参加してきました。 午前中はあいにくの雨でしたが、それでも結構な人数が最初の基調講演から参加されてました。 私が参加したセッショ</description>
      <content:encoded>&lt;p&gt;&lt;a href=&#34;http://www.cloudera.co.jp/jpevents/cwt2013/index.html&#34;&gt;Cloudera World Tokyo 2013&lt;/a&gt;に参加してきました。&lt;/p&gt;
&lt;p&gt;午前中はあいにくの雨でしたが、それでも結構な人数が最初の基調講演から参加されてました。
私が参加したセッションは大盛況な感じでした。&lt;/p&gt;
&lt;p&gt;おみやげとしてカステラも頂いちゃいました！&lt;/p&gt;

&lt;link rel=&#34;stylesheet&#34; href=&#34;https://blog.johtani.info/css/hugo-easy-gallery.css&#34; /&gt;
&lt;div class=&#34;box&#34; style=&#34;max-width:300&#34;&gt;
  &lt;figure  itemprop=&#34;associatedMedia&#34; itemscope itemtype=&#34;http://schema.org/ImageObject&#34;&gt;
    &lt;div class=&#34;img&#34;&gt;
      &lt;img itemprop=&#34;thumbnail&#34; src=&#34;https://blog.johtani.info/images/entries/20131107/kasutera.jpg&#34; /&gt;
    &lt;/div&gt;
    &lt;a href=&#34;https://blog.johtani.info/images/entries/20131107/kasutera.jpg&#34; itemprop=&#34;contentUrl&#34;&gt;&lt;/a&gt;
  &lt;/figure&gt;
&lt;/div&gt;

&lt;p&gt;また、色々なセッションに現れたこんなメッセージ画像も見つけました！&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p&gt;昨日の写真データの整理をしていたら、こんなものが・・・ &lt;a href=&#34;https://twitter.com/shiumachi&#34;&gt;@shiumachi&lt;/a&gt; さんよ・・・ &lt;a href=&#34;https://twitter.com/search?q=%23cwt2013&amp;amp;src=hash&#34;&gt;#cwt2013&lt;/a&gt; &lt;a href=&#34;http://t.co/S0JsxSYXIx&#34;&gt;pic.twitter.com/S0JsxSYXIx&lt;/a&gt;&lt;/p&gt;&amp;mdash; Kenichiro HAMANO (@hamaken) &lt;a href=&#34;https://twitter.com/hamaken/statuses/398613935399510016&#34;&gt;November 8, 2013&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;//platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;!-- more --&gt;
&lt;p&gt;やっぱり、スーツの人が多いなという印象。&lt;/p&gt;
&lt;p&gt;名刺を毎回回収されるのはちょっとつらかったです。なにか、いい方法ないですかねぇ。&lt;/p&gt;
&lt;p&gt;以下はいつもの個人メモです。&lt;/p&gt;
&lt;h2 id=&#34;ビッグデータプラットフォームとして進化するhadoop&#34;&gt;「ビッグデータプラットフォームとして進化するHadoop」&lt;/h2&gt;
&lt;h4 id=&#34;cloudera株式会社代表取締役ジュセッペ小林氏&#34;&gt;Cloudera株式会社　代表取締役　ジュセッペ小林氏&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Costcoなどの写真を元にビッグデータを可視化&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;bigdataとhadoopの関係&#34;&gt;BigDataとHadoopの関係&lt;/h3&gt;
&lt;p&gt;検索、SQL、機会学習、数理処理、データ管理などにもHadoopの活用されつつある。
セキュリティ、データ管理、クラスタ上でのツールの実行なども増えてきてる。&lt;/p&gt;
&lt;p&gt;「今日ビッグデータは明日のスモールデータ」&lt;/p&gt;
&lt;h4 id=&#34;アーキテクチャとしてのビッグデータ&#34;&gt;アーキテクチャとしてのビッグデータ&lt;/h4&gt;
&lt;p&gt;多種多様なデータを一箇所に集約し、生データを直接活用できる。
OSSとしての責任も。&lt;/p&gt;
&lt;h3 id=&#34;データサイエンス&#34;&gt;データサイエンス&lt;/h3&gt;
&lt;p&gt;Opsだけでないデータ解析にも活用&lt;/p&gt;
&lt;h2 id=&#34;clouderaのビッグデータプラットフォーム戦略仮&#34;&gt;「Clouderaのビッグデータプラットフォーム戦略」（仮）&lt;/h2&gt;
&lt;h4 id=&#34;講師cloudera-inc-cto-dramr-awadallah&#34;&gt;講師：Cloudera, Inc. CTO Dr.Amr Awadallah&lt;/h4&gt;
&lt;p&gt;レガシーな情報アーキテクチャ→スケールできない、可視化の限界、硬直したスキーマなどなど。&lt;/p&gt;
&lt;p&gt;エンタープライズデータハブとしてのHadoopとか。&lt;/p&gt;
&lt;h2 id=&#34;ビッグデータの歴史と将来展望&#34;&gt;ビッグデータの歴史と将来展望&lt;/h2&gt;
&lt;h4 id=&#34;講師国立情報学研究所アーキテクチャ科学研究系教授佐藤一郎氏&#34;&gt;講師：国立情報学研究所　アーキテクチャ科学研究系　教授　佐藤一郎氏&lt;/h4&gt;
&lt;h3 id=&#34;ビッグデータの歴史的経緯とか&#34;&gt;ビッグデータの歴史的経緯とか&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;最初の事例はアメリカの1880年国勢調査。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;「ビッグデータがコンピュータを生み出した」。コンピュータがビッグデータを生み出したんじゃない。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;少量データにもHadoopを&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;バッチ処理のリアルタイム化とか（一晩から10分へ）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;原点は検索データのインデクシング&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Hadoopを使うのが目的じゃないんだから、構築には手を掛けないのがいいよね。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;プラットフォームと発展している&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;分散システム研究者から見たhadoop&#34;&gt;分散システム研究者から見たHadoop&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;分散ししテムの難しさを、処理範囲を限定することで巧みに回避&lt;/li&gt;
&lt;li&gt;データの近くで処理&lt;/li&gt;
&lt;li&gt;研究レベルではリアルタイム化や逐次処理化が活発&lt;/li&gt;
&lt;li&gt;全工程で逐次・リアルタイムが必要とは限らない&lt;/li&gt;
&lt;li&gt;聞いてばかりじゃなくて、動かしてみましょう。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;データサイエンス超並列分散処理を活用した新たなビジネス価値の創出&#34;&gt;データサイエンス：超並列分散処理を活用した新たなビジネス価値の創出&lt;/h2&gt;
&lt;h4 id=&#34;講師アクセンチュア株式会社工藤卓哉氏&#34;&gt;講師：アクセンチュア株式会社　工藤卓哉氏&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;「日経BPのビッグデータ総覧2013」に記事書いてる。&lt;/li&gt;
&lt;li&gt;多様化するデータ（社外のデータも）をどうやってうまく活用していくか。&lt;/li&gt;
&lt;li&gt;データが教えてくれたこと→まず、データありき、まずデータためましょう。それから解析とかすればいいのでは？というはなし？&lt;/li&gt;
&lt;li&gt;競合他社さんはNGだけど、ブースでデモ？実機？が見れますと。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;hadoopデータプラットフォーム&#34;&gt;Hadoopデータプラットフォーム&lt;/h2&gt;
&lt;h4 id=&#34;cloudera株式会社嶋内翔氏&#34;&gt;Cloudera株式会社　嶋内　翔氏&lt;/h4&gt;
&lt;h3 id=&#34;まずは宣伝&#34;&gt;まずは宣伝&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Cloudera Implaraのフリーブックの日本語版&lt;/li&gt;
&lt;li&gt;Hadoop Operationの書籍でるよ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;プラットフォームを構成するもの&#34;&gt;プラットフォームを構成するもの&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Flume&lt;/li&gt;
&lt;li&gt;Sqoop&lt;/li&gt;
&lt;li&gt;HBase&lt;/li&gt;
&lt;li&gt;Hive&lt;/li&gt;
&lt;li&gt;Impala&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;データ登録してbiアナリストのお仕事にどうやって役立てる&#34;&gt;データ登録してBIアナリストのお仕事にどうやって役立てる？&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;外部テーブル：Hiveからはテーブルのように見える仕組み。元ファイルは消えない&lt;/li&gt;
&lt;li&gt;SerDe（さーでぃー）：データをHiveレコードに変換する仕組み&lt;/li&gt;
&lt;li&gt;生データを少し加工しましょう
&lt;ul&gt;
&lt;li&gt;圧縮したりファイル結合したりはしときましょう。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Hadoop活用のポイント
&lt;ul&gt;
&lt;li&gt;富豪的プログラミング。リソースケチるな。&lt;/li&gt;
&lt;li&gt;ローカルでできることはローカル。むりにHadoopでやんなくてもいいですよねと。バランス重要&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;スケジューリング実行などはOozie使うと便利。（日次集計とか）&lt;/li&gt;
&lt;li&gt;Cloudera Searchで元データにインデックス貼れるぞと。検索しながら分析ができる&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;クラスタ管理とか&#34;&gt;クラスタ管理とか&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Cloudera manager便利ですよ&lt;/li&gt;
&lt;li&gt;ストレージリソースの管理。
&lt;ul&gt;
&lt;li&gt;声掛け、管理者が容量チェック、Cloudera Managerのレポート&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;少数精鋭でHadoop使おう＝手が回らなくなる。&lt;/li&gt;
&lt;li&gt;みんなで使おう＝Kerberos認証とか管理をちゃんと考えないと。けど、文化が根付けば強力。Sentry、Cloudera Navigatorとか。&lt;/li&gt;
&lt;li&gt;Hadoopシステムの全体構成図。データの流れと各製品のつながり。&lt;/li&gt;
&lt;li&gt;We are hiring!ということで、興味のある方は@shiumachiさんにコンタクトをとりましょうとのこと。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;sqlで実現するバッチ処理とストリーム処理&#34;&gt;SQLで実現するバッチ処理とストリーム処理&lt;/h2&gt;
&lt;h4 id=&#34;line株式会社田籠-聡氏&#34;&gt;LINE株式会社　田籠 聡氏&lt;/h4&gt;
&lt;p&gt;資料：&lt;a href=&#34;http://www.slideshare.net/tagomoris/batch-and-stream-processing-with-sql&#34;&gt;Batch and Stream processing with SQL&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;LINEのキャラがちらほら出てきた。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SQL好きですか？&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ログの量とか。2.1TB/Day&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;バッチ処理とストリーム&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;速い集計のためにHadoopが重要&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;エラー系のログとかはストリームで処理したい&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;アーキテクチャ説明&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;データ解析する人って色々。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;管理者&lt;/li&gt;
&lt;li&gt;プログラマ&lt;/li&gt;
&lt;li&gt;サービスディレクタ&lt;/li&gt;
&lt;li&gt;経営陣&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;みんなが集計用処理を理解、編集ができるほうがいい。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;顔あげたらHiveアイコンだらけだったｗ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Shibとか。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;なんでHiveに限るの？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hiveに着目したバージョンアップだけを考えれば良くなる。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;スケジュールクエリが増えてきて、つらい。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TimeWindowを固定して集計処理をすることで、回避できる。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;norikra&#34;&gt;Norikra!!&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;スキーマレス&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OSS。Esperベース。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;インストールが楽&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;クエリの動作のお話。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;http://norikra.github.io&#34;&gt;http://norikra.github.io&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;We Are Hiring!&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;hadoop-コミュニティと-yarn-の現状&#34;&gt;Hadoop コミュニティと YARN の現状&lt;/h2&gt;
&lt;h4 id=&#34;日本電信電話株式会社小沢-健史氏&#34;&gt;日本電信電話株式会社　小沢 健史氏&lt;/h4&gt;
&lt;h3 id=&#34;なんでhadoop&#34;&gt;なんでHadoop？&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;PostgreSQLでやってたけど、大きなデータにはHadoopを使おうという感じになってきた。&lt;/li&gt;
&lt;li&gt;なんで使い分けるの？
&lt;ul&gt;
&lt;li&gt;スキーマ後付け&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;NTTDocomoのモバイル位置情報の統計処理とか？&lt;/li&gt;
&lt;li&gt;技術的な話をするので、HiveTに着替えます！ｗ&lt;/li&gt;
&lt;li&gt;YARNのなにが嬉しいの？
&lt;ul&gt;
&lt;li&gt;ImpalaとMapReduceが同時に動くような環境の時に、リソースをうまく管理できないのがV1&lt;/li&gt;
&lt;li&gt;そこでYARN&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Apache Mesosとだいたい一緒。&lt;/li&gt;
&lt;li&gt;Apache MesosとYARNの比較&lt;/li&gt;
&lt;/ul&gt;
</content:encoded>
    </item>
    
    <item>
      <title>『プログラミング Hive』 『Hadoop 第3版』刊行記念セミナーに参加しました！ #oreilly0724</title>
      <link>https://blog.johtani.info/blog/2013/07/25/hadoop-hive-publication-party/</link>
      <pubDate>Thu, 25 Jul 2013 02:11:00 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2013/07/25/hadoop-hive-publication-party/</guid>
      <description>Hadoopとか離れちゃってるし、Hive触ったこと無いにもかかわらず参加しました！ （たまたま近くにいるからって理由なのは内緒で） 玉川さんの</description>
      <content:encoded>&lt;p&gt;Hadoopとか離れちゃってるし、Hive触ったこと無いにもかかわらず参加しました！&lt;br&gt;
（たまたま近くにいるからって理由なのは内緒で）&lt;br&gt;
玉川さんの四方山話を聞くのが主目的で参加しました。（ちょっと翻訳が気になってるので）&lt;/p&gt;
&lt;p&gt;イベントページは&lt;a href=&#34;http://connpass.com/event/2944/&#34;&gt;こちら&lt;/a&gt;&lt;br&gt;
刊行記念イベントにも関わらず、想像以上の人の入りでびっくりしました。Hadoop、Hive界隈はまだまだ人気なんだなぁと。&lt;br&gt;
プレゼントじゃんけん大会もあったのですが、そうそうに負けてしまったのが悔やまれます。。。&lt;br&gt;
Team Geek欲しかったなぁ。もちろん、懇親会まで参加しました。&lt;/p&gt;
&lt;p&gt;以下、いつものメモです。&lt;/p&gt;
&lt;!--  more --&gt;
&lt;h2 id=&#34;hiveの正しい使い方cloudera-嶋内さん&#34;&gt;Hiveの正しい使い方（Cloudera 嶋内さん）&lt;/h2&gt;
&lt;p&gt;残念ながら、マサカリは持ってなかったです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;スライドの各所に本の章番号が書いてあるのがうれしい。&lt;/li&gt;
&lt;li&gt;Hiveロゴが回ってたのでスライドの時に集中できなかったｗ&lt;/li&gt;
&lt;li&gt;Impalaの話も出てきた。
&lt;ul&gt;
&lt;li&gt;速いけど、色々足りない。Hiveの置き換えじゃないよと。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;hiveとimpalaのおいしいとこ取りセラン須田さん&#34;&gt;HiveとImpalaのおいしいとこ取り（セラン　須田さん）&lt;/h2&gt;
&lt;p&gt;スライド：&lt;a href=&#34;http://www.slideshare.net/sudabon/20130724-oreilly-org&#34;&gt;http://www.slideshare.net/sudabon/20130724-oreilly-org&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;オンプレだとCDH便利だよと教えてもらう&lt;/li&gt;
&lt;li&gt;いくつかSlideshareにImpalaの性能評価の資料を上げてある（必要になったら検索で。。。）&lt;/li&gt;
&lt;li&gt;リリースされたその日に性能評価やってレポート書くとかすごすぎ！&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;翻訳の四方山話玉川さん&#34;&gt;翻訳の四方山話（玉川さん）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;翻訳＝写経です&lt;/li&gt;
&lt;li&gt;締め切り駆動勉強法ｗ&lt;/li&gt;
&lt;li&gt;4page/day&lt;/li&gt;
&lt;li&gt;自分から電突してオライリーさんに翻訳させてくださいと。&lt;/li&gt;
&lt;li&gt;他の方の本が読めない（チェックしちゃうのでｗ）&lt;/li&gt;
&lt;li&gt;動機があるから読めるってのはあるだろうなぁ。&lt;/li&gt;
&lt;li&gt;選び方：わくわくするもの、仕事に活きるもの&lt;/li&gt;
&lt;li&gt;今年もあと2冊やる予定（Hadoop Operations、Vagrantを翻訳中）&lt;/li&gt;
&lt;li&gt;来年の候補（Chefとか）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;高可用性hdfsのご紹介cloudera-小林さん&#34;&gt;高可用性HDFSのご紹介（Cloudera 小林さん）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;スライドにどの版で書いてあったかがわかりやすく書いてある。&lt;/li&gt;
&lt;li&gt;3段階の開発フェーズを経てる&lt;/li&gt;
&lt;li&gt;QJMのお話&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;cloudera-universityとhadoop認定試験cloudera-川崎さん&#34;&gt;Cloudera UniversityとHadoop認定試験（Cloudera 川崎さん）&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Clouderaデータアナリスト向けトレーニング（3日間、10月日本語で開催予定）
&lt;ul&gt;
&lt;li&gt;Hive、Pig、Impalaなど&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Data Science入門コースも準備中&lt;/li&gt;
&lt;li&gt;出版記念！
&lt;ul&gt;
&lt;li&gt;8月管理者向け先着20 or 30名にHadoop第3版贈呈予定&lt;/li&gt;
&lt;li&gt;先着20名にプログラミングHive贈呈予定&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content:encoded>
    </item>
    
    <item>
      <title>Cloudera Searchメモ（妄想版）</title>
      <link>https://blog.johtani.info/blog/2013/06/06/cloudera-search-memo2/</link>
      <pubDate>Thu, 06 Jun 2013 12:26:00 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2013/06/06/cloudera-search-memo2/</guid>
      <description>ざっとインストールガイドとかCloudera Searchのソース眺めて、テキトーにメモを書いてみました。 （ユーザガイドはまだ読んでないです。</description>
      <content:encoded>&lt;p&gt;ざっとインストールガイドとかCloudera Searchのソース眺めて、テキトーにメモを書いてみました。
（ユーザガイドはまだ読んでないです。）&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;ざっくりメモ&#34;&gt;ざっくりメモ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ストリーム処理でインデックス作るときはFlume経由でSolrに
&lt;ul&gt;
&lt;li&gt;SinkとEventの両方が用意されてる？（Flumeを良く知らないので、違いがわからない）&lt;/li&gt;
&lt;li&gt;FluemeからはリモートのSolrに対してインデックス登録するクラスがある。SolrServerDocumentLoaderがソレだと思う。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;バッチ処理でインデックス作るときはMapReduceIndexerToolsってのを使ってSolrに
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://issues.apache.org/jira/browse/SOLR-1301&#34;&gt;SOLR-1301&lt;/a&gt;がベースになっている。色々と改良されてるようだけど、コアとなってる処理はSOLR-1301。&lt;/li&gt;
&lt;li&gt;GoLiveってクラスの処理の中で、現在動作してるSolrに配布したバッチで作成されたIndexをマージする処理が書いてある。&lt;/li&gt;
&lt;li&gt;HDFSへ出力されたインデックスはリモートのSolrからアクセスするとオーバヘッドとかどーなるのかなぁ？&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;検索処理自体はHueでもできるけど、基本的にSolrCloud任せ&lt;/li&gt;
&lt;li&gt;インデキシングの処理のフローについてはCloudera Mrophlinesで定義&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ということで、
2つの流れがありそう。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HDFS→Flume→Solr&lt;/li&gt;
&lt;li&gt;HDFS→MapReduce→Solr&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;で、まだ、わかってないですが、構成要素として&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hadoop（HDFS）：データソース&lt;/li&gt;
&lt;li&gt;Hadoop（MapReduce）：データ変換処理、バッチインデキシング&lt;/li&gt;
&lt;li&gt;Zookeeper：SolrCloudのクラスタ管理&lt;/li&gt;
&lt;li&gt;Solr：インデキシング、検索エンジン&lt;/li&gt;
&lt;li&gt;Flume：データをストリーミングでSolrへ&lt;/li&gt;
&lt;li&gt;Coudera Morphlines：HDFSからSolrまでのETLデータ処理を定義実行する環境&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;って感じでしょうか。
SolrCloudのクラスタとHadoopのクラスタが同一マシン上なのか、別なのかとか。組み合わせがどんなものができるのかがまだわかってないです。
ユーザガイド読んでみたらなにか出てくるかなぁ。&lt;/p&gt;
&lt;p&gt;ちなみに、Cloudera SearchのgithubリポジトリにあるソースはCloudera Morphlinesのコードがメインで、SolrのHDFS対応版のソースがあるわけでは無かったです。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SolrのHdfsDirectoryってのがClouderaのリポジトリにあるSolrには追加されていて、これが、HDFSのインデックスを読み込んだりする処理が出来る仕組みっぽい。&lt;/li&gt;
&lt;li&gt;一応、SolrCloud以外（分散検索）も考慮された形になってるっぽい。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ってとこでしょうか。&lt;/p&gt;
&lt;h2 id=&#34;感想&#34;&gt;感想&lt;/h2&gt;
&lt;p&gt;読んでて思ったんですが、Cloudera Searchの肝はじつは、検索じゃなくて、Morphlinesにあるんじゃないかなぁと。今はSolrが出力先ですが、
その他のデータ変換処理とかが増えてくると、処理の流れがMorphlinesで定義できてデータ変換処理が簡便になりそうな気が。&lt;/p&gt;
&lt;h2 id=&#34;その他に気になる観点&#34;&gt;その他に気になる観点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;CDH経由でSolrCloudのクラスタの管理するのかな？&lt;/li&gt;
&lt;li&gt;SolrCloud用のクラスタとCDHのクラスタって同一マシンに載るの？別マシンにもできるの？
&lt;ul&gt;
&lt;li&gt;併存したらIOがキツそうだけど&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Hueで検索アプリとか組めるの？（そもそもHueがわかってないんだけど。。。）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ま、とりあえず、こんなとこで。
つぎは余力があれば、ユーザガイドかなぁ。
英語力。。。&lt;/p&gt;
</content:encoded>
    </item>
    
    <item>
      <title>Cloudera Searchのモジュールたち</title>
      <link>https://blog.johtani.info/blog/2013/06/05/cloudera-search-modules/</link>
      <pubDate>Wed, 05 Jun 2013 15:12:00 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2013/06/05/cloudera-search-modules/</guid>
      <description>Cloudera Searchは次のようなモジュールから構成されています。 これはCloudera Searchのモジュールで、さらにこれらがSolrとかを使っ</description>
      <content:encoded>&lt;p&gt;Cloudera Searchは次のようなモジュールから構成されています。
これはCloudera Searchのモジュールで、さらにこれらがSolrとかを使ってるみたいですね。pom.xmlを見たら何を使ってるかがわかるかな。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;cdk-morphlines&lt;/li&gt;
&lt;li&gt;search-contrib&lt;/li&gt;
&lt;li&gt;search-core&lt;/li&gt;
&lt;li&gt;search-flume&lt;/li&gt;
&lt;li&gt;search-mr&lt;/li&gt;
&lt;li&gt;search-solrcell&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;てきとーに、README.mdみながらメモを残してみました。ソースとかはまだ読んでないです。
ざっと眺めたけど、インデキシング処理の話がメインで、検索側がどうやって動くかってのがわからなかったなぁ。
&lt;a href=&#34;http://www.cloudera.com/content/cloudera-content/cloudera-docs/Search/latest/PDF/Cloudera-Search-User-Guide.pdf&#34;&gt;ユーザガイド（注：PDF）&lt;/a&gt;ってのがあるから、これを読んでみるか。。。&lt;/p&gt;
&lt;p&gt;各モジュールについては、以下。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;cdk-morphlinescloudera-morphlines&#34;&gt;cdk-morphlines（Cloudera Morphlines）&lt;/h2&gt;
&lt;p&gt;Cloudera Morphlinesという名前みたい。
検インデキシングアプリの構築、変更をラクにするためのフレームワーク。
ETLの処理チェインを簡単にCloudera Searchにデータを入れる設定（Extract/Transform/Load処理）がかけると。
バッチ処理、Near Real Timeのために使えるみたい。検索結果をさらに入れるとかもできるんかなぁ。？&lt;/p&gt;
&lt;p&gt;Unixパイプラインのの進化版みたいなもので、一般的なレコードに対するStream処理から、Flueme、MapReduce、Pig、Hie、SqoopのようなHadoopコンポーネントも使えるみたい。&lt;/p&gt;
&lt;p&gt;Hadoop ETLアプリケーションのプロトタイピングにも使えて、リアルタイムで複雑なStreamやイベント処理やログファイル解析とかに使えるの？&lt;/p&gt;
&lt;p&gt;設定ファイルのフォーマットは&lt;a href=&#34;https://github.com/typesafehub/config/blob/master/HOCON.md&#34;&gt;HOCONフォーマット&lt;/a&gt;。AkkaやPlayで使われてる。&lt;/p&gt;
&lt;h3 id=&#34;cdk-morphlines-core&#34;&gt;cdk-morphlines-core&lt;/h3&gt;
&lt;p&gt;Cloudera Morphlinesのコンパイラ、実行環境、コマンドのライブラリを含んでる。
ログファイル解析やsingle-lineレコード、multi-lineレコード、CSVファイル、正規表現パターンマッチ、フィールドごとの比較とか条件分岐とか、文字列変換とか色々なコマンドを含んでる。&lt;/p&gt;
&lt;h3 id=&#34;cdk-morphlines-avro&#34;&gt;cdk-morphlines-avro&lt;/h3&gt;
&lt;p&gt;Avroファイルやオブジェクトの抽出、変換、読み込み処理コマンド&lt;/p&gt;
&lt;h3 id=&#34;cdk-morphlines-tika&#34;&gt;cdk-morphlines-tika&lt;/h3&gt;
&lt;p&gt;バイナリデータからMIMEタイプを検出して、解凍するコマンド。Tikaに依存&lt;/p&gt;
&lt;h4 id=&#34;雑感&#34;&gt;雑感&lt;/h4&gt;
&lt;p&gt;Cloudera Searchへのデータの流し込みを設定ファイルに記述して実行するとデータの変換処理とかが記述できるって感じかな？
Morphlinesのコマンドとして独自処理や使えそうな処理を作ることで、いろんな処理ができるって感じかなぁ。&lt;/p&gt;
&lt;h2 id=&#34;search-core&#34;&gt;search-core&lt;/h2&gt;
&lt;p&gt;Solrに対するMorphlineコマンドの上位モジュール&lt;/p&gt;
&lt;h3 id=&#34;search-solrcell&#34;&gt;search-solrcell&lt;/h3&gt;
&lt;p&gt;Tikaパーサを使ったSolrCellを使うためのMorphlineコマンド。
HTML、XML、PDF、Wordなど、Tikaがサポートしてるものがサポート対象。&lt;/p&gt;
&lt;h3 id=&#34;search-flume&#34;&gt;search-flume&lt;/h3&gt;
&lt;p&gt;Flueme Morphline Solr Sink。
Apache Flumeのイベントから検索ドキュメントを抽出、変換し、SolrにNearRealTimeで読み込むためのコマンド&lt;/p&gt;
&lt;h3 id=&#34;search-mr&#34;&gt;search-mr&lt;/h3&gt;
&lt;p&gt;HDFSに保存されたファイルに含まれる大量データをMapReduceで処理してHDFS上の検索インデックスに焼きこむモジュール。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MapReduceIndexerTool&lt;/code&gt;は入力ファイルの集合からSolrのインデックスシャードの集合を作るためのmorphlineのタスクで、MapReduceのバッチジョブドライバー。
HDFSにインデックスを書き込む。
動作してるSolrサーバに対して出力されたデータをマージするのもサポートしてる。&lt;/p&gt;
&lt;p&gt;とりあえず、Near Real Time検索するにはFlueme使って、バッチ処理でインデックス焼くのはMapReduceIndexerToolみたいだなぁ。&lt;/p&gt;
</content:encoded>
    </item>
    
    <item>
      <title>Cloudera Searchってのが出たらしい（とりあえず、雑感？）</title>
      <link>https://blog.johtani.info/blog/2013/06/05/what-is-cloudera-search/</link>
      <pubDate>Wed, 05 Jun 2013 15:05:00 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2013/06/05/what-is-cloudera-search/</guid>
      <description>AWS Summitに来ていたのですが、TLでは、Cloudera Searchが賑わってました。 ということで、軽くどんなものか読んだり調べたりした</description>
      <content:encoded>&lt;p&gt;AWS Summitに来ていたのですが、TLでは、Cloudera Searchが賑わってました。
ということで、軽くどんなものか読んだり調べたりしたメモを残しとこうかと。
英語力はあやしいので、おかしいとこがあったらツッコミを。&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h2 id=&#34;cloudera-searchとは&#34;&gt;Cloudera Searchとは？&lt;/h2&gt;
&lt;p&gt;CDH4.3に対応したCDHユーザ向けの検索システム（beta版）なのかな？
CDHに統合された検索フレームワークなのかな？&lt;/p&gt;
&lt;p&gt;基本はLucene/Solr 4.3でHadoopのペタバイトデータを検索することができるようになるみたいです。&lt;/p&gt;
&lt;h2 id=&#34;どんな仕組み&#34;&gt;どんな仕組み？&lt;/h2&gt;
&lt;p&gt;次のものを利用しているようです。（GithubのREADMEから。）&lt;/p&gt;
&lt;h4 id=&#34;使ってるもの&#34;&gt;使ってるもの&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Apache Solr(4.3.0＋α？)
&lt;ul&gt;
&lt;li&gt;Apache Lucene（Solrつかってるからね）&lt;/li&gt;
&lt;li&gt;Apache SolrCloud（うーん、Solrに含まれるのに別に出してるのなんで？）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Apache Flume&lt;/li&gt;
&lt;li&gt;Apache Hadoop MapReduce &amp;amp; HDFS&lt;/li&gt;
&lt;li&gt;Apache Tika
&lt;ul&gt;
&lt;li&gt;SolrCellとしてSolrにも組み込まれてる、いろんな文書（WordとかHTMLなどなど）からメタデータと本文データとかを取り出せるライブラリラッパー。実際にはさらにpdfboxとかを使って各文書からのデータを取り出してる。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;何ができるの&#34;&gt;何ができるの？&lt;/h4&gt;
&lt;p&gt;HBaseやHDFSの用にZookeeperを使ってインデックスのシャーディングや高可用性ができる。（SolrCloudがZookeeperを使ってるからね。）
MapReduceのジョブの出力から自動的にSolrのインデックスにデータをマージできるらしい。
Cloudera Managerを使って、デプロイ、設定モニタリングなどが可能。&lt;/p&gt;
&lt;p&gt;Flumeのフィードをつかって、ストリーミングしてインデックスを作れる。FluemeがデータをSolrに流しこむのかな？
将来的にはHiveやHBaseのテーブルをインデックスすることも可能になるらしい。Impalaクエリの結果もフィードできるのか？&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://incubator.apache.org/blur/how_it_works.html&#34;&gt;Apache Blur&lt;/a&gt;ってキーワードも出てきた。HDFSのデータからLuceneのインデックス作るのかな？
NGDataのチームがSolr/HBaseの統合とかしてるみたい。&lt;/p&gt;
&lt;h3 id=&#34;参考url&#34;&gt;参考URL&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.cloudera.com/blog/2013/06/cloudera-search-the-newest-hadoop-framework-for-cdh-users-and-developers/&#34;&gt;Cloudera社のブログ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://cloudera.com/content/cloudera-content/cloudera-docs/Search/latest/PDF/Cloudera-Search-Frequently-Asked-Questions.pdf&#34;&gt;Cloudera SearchのFAQ（注：PDF）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cloudera/search&#34;&gt;Githubのリポジトリ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content:encoded>
    </item>
    
    <item>
      <title>Hadoop Conference Japan 2011 Fallに参加してきました。(Jugemより移植)</title>
      <link>https://blog.johtani.info/blog/2011/09/27/hadoop-conference-japan-2011-fall%E3%81%AB%E5%8F%82%E5%8A%A0%E3%81%97%E3%81%A6%E3%81%8D%E3%81%BE%E3%81%97%E3%81%9F/</link>
      <pubDate>Tue, 27 Sep 2011 17:51:00 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2011/09/27/hadoop-conference-japan-2011-fall%E3%81%AB%E5%8F%82%E5%8A%A0%E3%81%97%E3%81%A6%E3%81%8D%E3%81%BE%E3%81%97%E3%81%9F/</guid>
      <description>Hadoop Conference Japan 2011 Fallに行ってきました。 まずは、ユーザ会の方々、運営の方々、発表された方々お疲れ様でした。こんな機会を用意していただき、ありがとう</description>
      <content:encoded>&lt;p&gt;Hadoop Conference Japan 2011 Fallに行ってきました。
まずは、ユーザ会の方々、運営の方々、発表された方々お疲れ様でした。こんな機会を用意していただき、ありがとうございます。
Hadoopは昨年触っていたのですが、最近は縁がなくなってしまいました。
ただ、触っていたときに面白かったので参加してきました。
ということで、今回も自分用にメモを取ったので。（今回は英語のヒアリングがあって、メモがひどい事になってます。。。）
いつものことながら、おかしいところとかあれば、ツッコミなどフィードバックをもらえると嬉しいです。&lt;/p&gt;
&lt;p&gt;場所：ベルサール汐留
日時：2011/09/26 10:00～18:00＋懇親会：18:30～21:00&lt;/p&gt;
&lt;p&gt;オープニングトーク：濱野、太田
　参加者：1100名超！（実際は800名弱？）
　Hadoopの経験：利用経験なしな方が580名
　カンファレンスの認知：Twitterよりも知人、その他が多かった。
　会場提供：リクルート様
　リクルート米谷様より一言。
　　Question VOTE！！サイトを用意。
　　http://mit.recruit.co.jpにて情報提供。
　※残念ながら地下だったため、E-mobileにつながらず、あと、電源確保が難しかったのでMBAをスタンドアロンにしてメモをとっていたので、
　　QAサイトにはアクセスしませんでした。もう少し活用したかったんですが、携帯でTwitterを追っかけるので精一杯。。。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;◎The role of the Distribution in the Apache Hadoop Ecosystem：Todd Lipcon（Cloudera）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　1.Introduction
　　Todd Lipcon：Clouderaエンジニア
　　Hadoop とHBaseのコミッター
　2. Hadoop Overview
　　HDFS＋MapReduceの説明
　　Hadoopの生まれてきた経緯　
　　　様々な形式のデータが大量に存在し、データのハンドリングが難しくなってきたため。
　　　Flexible, Scalable Solutionが必要に。
　　Hadoop の2つのユースケース
　　　1.Advanced Analytics
　　　　SNS（Web）、Content Optimization（Media）、Network Analytics（Telco）、
　　　2.Data Processing
　　　　Clickstream SessionizationEngagement

　3.Cloudera Overview
　　ClouderaCustomers
　　　・Large National Bank
　　　・Web-Based Media
　　　　click-through dataや広告のログ
　　　・Wireless Telecom
　　　　大量のデータ
　　目標：大量データからビジネスを引き出すこと。
　　Cloudera Japan：トレーニング。NTTDと協業して開発支援も
　4.CDH Overview
　　100% pure Apache Hadoop
　　SCM Epress(Service &amp;amp;amp; Configuration Manager)
　　　Free 
　　なぜ、CDHを利用するの？
　　　Linuxを利用する場合にLinux.orgからはダウンロードしないように、Hadoopも同じように提供したい。
　　　　RedHat系を目指しているみたい。
　　　様々なパッケージの依存関係が混乱を招く。
　　　　CDHならテストが終わってるものが提供されてる。
　　※SolrはLWEがLucidWorksEnterpriseがこれを目指してるのか。
　5.Cloudera Enterprise
　　Activity Monitor：Jobのパフォーマンスをリアルタイムに監視
　　SCM：設定のvalidateや管理。
　　Resource Manager：。。。
　6.まとめ
　　CDH：簡単にHadopが使えるよ。
　　SCM Express：簡単にHadoopの設定ができてフリーだよ
　　Cloudera：Hadoopに関していろいろサポートしているよ。（Enterprise用ソフトやトレーニングなど）
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎About Hortonworks：Owen O&amp;rsquo;Malley（Hortonworks）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　1.About Hortonworks
　　2011/2月に設立
　　22人のYahooからのアーキテクトとコミッタにより設立
　2.Credentials
　　Yahooのクラスタの経験者がいますよ。
　　OSSに長けた人達によるチームです。
　3.What is Apache Hadoop
　　Hadoopの説明（別の側面が幾つかあり。）
　　Commodity Hardwareで動く
　　簡単にプログラムできる
　　典型的なアプリケーションのタグクラウド（あとでちゃんと見る）
　　HadoopのほとんどのソースコードはYahooで作られてるよ。
　　Clouderaとか目じゃないよ
　4.Hadoop @ Yahoo!
　　各種サーバや規模など
　　Science Hadoop Cluster &amp;lt;-&amp;amp;gt; Production Hadoop Cluster &amp;lt;-&amp;amp;gt; Serving Systems
　　　という構成で、いろいろやってます。
　5.Hadoop Market
　　ビジネス：ビッグデータを扱って色々やろうね
　　金融系：IT系のコストをOSSとHadoopで削減
　　技術系：
　6.Hortonworks Strategy
　　Hadoopを利用、管理しやすくするためのいろんなことをコミュニティに還元しますよ。
　　性能などについても同様。
　　トレーニングやテクニカルサポートやりますよ。
　QA：
　　Q：42Kのノードの管理ツールはなに？
　　A：手で管理してます。
　　Q：社名の由来は？
　　A：童話でHortonという名前の象の話がある。
　　Q：CDHはおすすめ？それともほかのものがいい？
　　A：※聞き取れず。。。
　　Q：500万Query/月はアドホックQueryもあるの？
　　A：幾つかのクラスタに分けて使ってる。アドホックは不明
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎How Hadoop needs to evolve and integrate into the enterprise：Ted Dunning（MapR）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　・Quick History
　・英語わからない身には辛い。。。
　Zookeeperの人らしい。
　Narrow Foundations
　　HDFSとNASの間には大きな壁があり、大きなデータを移動するのはコストが掛かる。
　Broad Foundation
　　HDFSの代わりにNAS、RDBMSの下に位置するMapRを用意
　　ど、どんな仕組み？-&amp;amp;gt;テクニカルセッションで。
　QA：
　　Q：MapRはOSSにしないのか？
　　A：MapRで開発したものはApacheに還元はしますが、OSSにはしないよ。フリー版は提供するかも
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ここで昼食。午前中からいた人にはランチボックスが提供されました。
午後からはコミュニティトラックとテクニカルトラックの2トラックがありましたが、LTが聞きたかった（それよりも英語が辛かった？）のでコミュニティトラックのど真ん中、最前列に入り浸りました。
&lt;strong&gt;★コミュニティトラック&lt;/strong&gt;
&lt;strong&gt;◎Elastic MapReduce Amazonが提供するHadoop：大谷晋平（Amazon）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　・Amazonとは
　　Eコマース
　　流通
　　AWS
　　の3つのサービス
　・AWS
　　Low-level、High-level、Cross Service、Tools to access services、アプリケーション
　　色々あるなー
　・Bigデータが大変な理由
　　ケタ違いのデータ量、異なる形式データ、即時性
　　現状システムはスケールしない
　　ビジネスとして成立する？
　　　成立するならすぐスケールだめならすぐ縮小
　・Hadoopとは？
　　これまでのお話。
　　スケーラブル、低価格なハード
　　誰でも入手可能で、実績多数。
　・Amazon EMR
　　AWS上でスケーラブルなインフラ上に構築が可能
　　オンプレミスからMapReduceアプリを移行可能なため、分析、解析に集中可能
　　S3からデータIN/OUTするので、データ欠損がない。
　　Hadoopそのままではチューニングやクラスタサイズ見積もりも難しい
　　　＝＞クラスタサイズを動的に拡張伸縮可能。パフォーマンス最適化もできるよ。
　　0.18、0.20が利用可能。
　　EMRはHDFSとジョブ（タスク）トラッカーを別構成にしている。
　　EC2上にMaster、Core、タスクノードを展開
　　S3にデータを格納
　　SimpleDB（KVS）を利用
　・EMR注目機能
　　ジョブフローの高速化
　　　ジョブの再起動無しにコスト/パフォーマンス比を変更可能。
　　　タスクノードを動的に増やせる
　　柔軟なデータウェアハウスクラスタ
　　　タスクノードをバッチ実行時にのみ増やせる。
　　※増減できるのはタスクノード
　　　Coreノードは増加のみ
　　EMR＋Spotインスタンスの活用
　　　コスト削減効果が非常に高い
　　　AWSの余剰リソースをリーズナブルに提供（Amazon的にもウハハだ）
　・その他の機能
　　東海岸だけだけど、スパコンレベルのインスタンスも利用可能
　　AWS上での最適化設計など
　　※ちょっと時間足りなくなってきたｗ
　・EMRの事例
　　1.Razorfish
　　　ROAS（広告費用対効果）を500%改善（すげー）
　　2.So-net
　・EMR都市伝説
　　物理vs仮想
　　　そりゃ、物理が速いよ
　　EMRの柔軟性・拡張性がセールスポイント
　　　ビッグデータは成功/失敗が読めないのもあるので、
　　　インフラに投資する部分を少なくできるよ。
　　オンプレミスが安い？
　　　いやいや、HWの購入から設定など時間かかる。
　・Beyond Hadoop
　　HadoopのIn/Out含めてスケーラブル、フレキシビリティが重要
　　運用管理の仕組みも重要
　　まだまだやってくよ。
　QA
　　Q：EMRは複数サービスから構築してるけど、一部がダウンするとどーなる？（例：SimpleDBが落ちてるとか）
　　A：ジョブはReRunしてもらうか、SimpleDBの状態をみてリカバリをしてもらう。
　　Q：上記にともない、SLAの計算は？
　　A：SLAはEMRについては定義できてない。S3などはリージョン跨いで
　　Q：S3のセキュリティが心配だが、どう考えてるか？
　　A：いままで脆弱性を晒してデータをロストしてない。
　　　　ユーザコントロールなどもできる。基本的には問題ない
　　Q：EMRでS3を使う＝Hadoopのローカリティの利点が失われるのでは？
　　A：オーバヘッドはあるが、実際のデータはS3で守られているので、HDFSが飛んでも大丈夫。
　　Q：S3からのコピーオーバヘッドはどーなるか？
　　A：Single5で少しずつor分割して全部送るも可能
　　Q：EMRはマルチテナントだけど他のユーザのネットワークの影響を受けないの？
　　A：マルチテナントだと起こる可能性がある。
　　　　M1（？）だと内部ネットワークは専有可能らしい。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎LT&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　・Hadoop and Subsystems in livedoor @tagomoris
　　ピーク時に15Gbps。
　　10ノード（36コア）
　　CDH3b2を利用
　　データマイニングではなく、ログからレポーティングをするのに利用している。
　　hadoop streaming + Hiveで実施
　　580G/dayが96サーバから来る
　　ScribeにてHadoop Streaming（Perl）でper hourでHiveにload
　　scribelineをWebサーバに入れててログ配送してくれる。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;**　・Lightweight　@stanaka（はてなCTO：田中慎司さん）**&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　　EMR以前
　　　自前20台クラスタ
　　　ジョブがあふれてきた
　　　ナマMapReduceを利用
　　　PerlでMapper/Reducerを記述（Hadoop Streaming）
　　EMR導入
　　　リソース増やせて便利！
　　　必要な台数に伸縮可能
　　　問題点：
　　　　S3にアップしないとダメ
　　　　　＝＞ログデータをS3に展開するlog2s3.plを作成。毎時実行。
　　　　起動、ジョブキック、結果改修どーする？
　　　　　＝＞Net::Amazon::EMR::Wrapperを作成した。
　　　　　　クラスタ起動、ジョブキック、クラスタ停止などできる
　　　　　作ってみて思ったこと
　　　　　　よかったところ：
　　　　　　　Perlでかける。Cronで実行可能。HiveQL便利。
　　　　　　悪かったところ。
　　　　　　　途中で失敗してクラスタ起動しっぱなしとかがある。S3にデータを展開が大変。複雑な計算がきつい。
　　　　慣れてないエンジニアにも触れるようにしたい
　　　　　＝＞Perlで書けるようにした？。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;**　・HBaseでグラフ構造を扱う（開発中）：アメーバ鈴木**&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　　自己紹介@brfrnl69
　　アメーバのソーシャルグラフ
　　　基本はMySQL
　　　マスタ分散が難しい、シャーディング管理が面倒
　　　　＝＞HBaseでやってみるか。
　　目的　
　　　グラフデータに対して高速に更新追加したい。
　　　隣接ノードが取れればいい（これを高速化したい）
　　　オンライン処理したい
　　　運用コストの削減したい。
　　Not目的
　　　マルチホップはどうでもいい。
　　アーキテクチャ
　　　JavaでGatewayつくってみる。
　・Large-Scale Graph Processing：井上さん（@doryokujin）さん
　　Map/Reduceではグラフ計算だめ？
　　　Vertex基本だとShuffleに問題ががが。
　　BSPの紹介
　　　Bulk Synchronous Processing
　　Google Pregel 
　　SSSP：MapReduce Model
　　　すごい計算時間が掛かりそう。MRの組み合わせが何回回ることやら。
　　　枝が少ないとこっちのほうがいいのか？
　　SSSP：PregelModel
　　　シンプルなアルゴリズム
　　Pregel使えるのあるの？
　　　Hama
　　　GoldenOrb
　　　Giraph
　　　　YERN？YARN？
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎リクルート式Hadoopの使い方：石川（リクルート）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　@ground_beetle
　・導入の課題点
　　バッチ処理時間対策のため。
　　　＝＞実は入れたかっただけｗ
　・導入の障壁
　　現行システムへの影響＋開発工数
　　　＝＞これへの対処がこのあとの話
　・課題の克服と活用シーン
　　Azkaban知らなかった。ジョブスケジューリングツール
　　Hadoop単体ではなく、エコシステム（関連ツール）が魅力
　・活用シーン：Hive
　　SQLゆーがざ多く、HiveQLがSQLライクのため導入が簡単に！
　　既存機能のリプレイス系案件に活躍（低工数＋簡単に高速化）
　　とりあえず、Hive実装
　　　＝＞性能アップのためにMapReduceで書きなおし
　　Hotpepperなどのアトリビューション分析に利用
　・活用シーン：Sqoop＋Hive
　　RDBとHadoop連携のツール：Sqoop
　　現行システムの横にHadoopを配置でき、RDBMSの利点も利用しつつHiveも利用できるようになる。
　　　（※気を付けないといけないけどねぇ。）
　　ゼクシィで活用しようとしてるところ。
　・活用シーン：Mahout
　　マイニング用ツール
　　カーセンサーのレコメンド（同時に閲覧される車種）
　　アソシエーション分析＋クラスタリング
　・活用シーン：BIツールの導入
　　何度か導入しようとして失敗してます。。。
　　BIツールの前処理（クレンジングなど）にHadoopを活用
　・インフラリソースは？
　　全部で118台。
　　最小のクラスタ構成はサーバ6台で構成してる
　・Hadoopで複数処理を回す方法
　　ここまで紹介したものを入れてますよ。Hive、Sqoop、Solr。。。
　・Azkaban
　　TomcatにWar配置で利用可能。
　　LinedInのチームにより作成
　※若干マシントラブルで中断
　・今後のHadoop導入
　　ログ基盤
　　分析エンジン・レコメンドエンジンとして
　　バッチ処理短縮＝トライアンドエラーが簡単にできるようになる。＝色々な気づきが出てくる。
　　アジャイル的な解析が可能に。
　・開発サイクルの短縮ができるエコシステムでビジネスが回りだす。
　・今後の展開
　　MapRが気になってる。
　　　マルチテナント対応ができてうはうはできそう。
　　　EMCと共同して検証中

　QA：
　　Q：性能監視ツールの選別の理由は？
　　A：Zabbix、Cactiです。今から利用しようと思っている段階。
　　Q：CDH、GreenPlum、Apacheをそれぞれ利用してるけど、使い分けのシーンは？比較は？
　　A：CDH3u0です。GreenPlumは使ってないです。理由は言うとクビが飛ぶ可能性ががが。
　　Q：高度なデータ分析ができる技術者はどこからヘッドハントしてるの？
　　A：MITに別途分析チームが存在し、高度な分析をしてくれる。
　　Q：NameNodeの冗長化はどーやってんの？
　　A：象本と一緒DRBD＋HeartBeat
　　Q：EMRの導入を検討してる？
　　A：今後、サーバ数が多くなると導入の検討をしていくと思う。
　　　　現時点は、運用ノウハウも入手するために社内で使ってる。
　　　　EMRになるかRCloud（リクルート社内クラウド）になるかは不明。
　　Q：HBaseを利用してる？
　　A：してないです。スペック的にサーバが買ってもらえないと厳しいです。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎The history and the future of Hadoop use case at Rakuten：Tarje Marthinussen（楽天）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　・Introduction（self、rakuten）
　　NextGeneration Search Group
　　Norwayから来ましたよ。
　・RakutenのBigDataとは
　・Hadoop at rakuten　
　　Recommendation（2009）
　　ProductRanking、GenreRanking、Log解析、（2010）
　　Enhance Search。。。（2011）
　・PigやHiveのようなものが簡単に利用できるようになってきた
　・新しい検索プラットフォームを構築中
　　index 10k docs/sec
　　search 400qps
　・What&amp;#39;s Next Generation Search
　　20%はインデックスとQuery評価の
　　50%がデータの前処理（データとQuery）
　　30%がアナライズ
　・Collecting Data？
　　ログの取得はバッチ処理だった。これをStreamingに（Flume）
　・Flume
　　Zookeeperを利用してFlumeを管理してる？？？
　・気になる部分があったので、改善のコーディングしてるよ。
　　・セキュリティ
　　　マスタで管理できるように
　　・Pools
　　　Agentが送信先がコケてると他のPoolにスイッチ可能に。
　　・MasterlessACKs
　QA
　　Q：パッチ作成は何人でやってるの？
　　A：50人が働いていてOSSコミッターが何人いるかはわからんです。
　　Q：ログはテキストだけど、パース処理はどこで？（古橋さん）
　　A：Flumeは各ノードでうまい構成になっていて
　　　　Decorator
　　　性能問題は？
　　　HiveはJSONデータをうまく活用できてるよ。
　　Q：Masterlessとそうじゃないバージョンの性能比は？
　　A：ノード数が増えると
　　Q：HBaseじゃなくてCassandraなの？
　　A：（※英語きつい。。。聞き取れず）
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎マーケティング向け大規模ログ解析事例紹介：原謙治（NTTコミュニケーション）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　・自己紹介
　・BizCITYというクラウドサービスを展開中
　　まずは、宣伝。
　　Bizストレージ、Bizマーケティングとして大規模データ、分散処理を実施してる。
　・Hadoop in Bizマーケティング
　　CGMデータを解析して口コミ情報抽出
　　アクセスログから行動情報抽出
　・Hadoop in BuzzFinder
　　CGM DBからHDFSにインポートして解析開始。DBはPostgreSQL
　　処理フローは資料参照。
　　リッチインデクシング技術（NTT研究所が開発した日本語解析技術）
　　※検索インデックスってどんなものなんだろう？
　　ポジネガ分析気になる。
　・Fast Map-Reduce for PaaS Services
　　アクセス解析やマーケティング解析を行う上でShuffleコストが大きくなるため大量マシンが必要
　　　＝＞マシン数を減らすことが目的？
　　Map Multi-Reduce、PJoinはNTT研究所が開発した技術！？（子象本にないっけ？？）
　　　＝＞Multi-Reduce。同一ノード上のMap出力をReduceすることで、shuffleフェーズに渡るデータを削減している。
　　　　＝＞PJoin　
　QA
　　Q：Map multi-reduce、PJoinはどう実現してるのか？公開するのか？
　　A：Hadoopの0.19に改造をしてる。
　　　　公開できるかどうかはわかりません。NTT研究所が研究しているものを試しに実装してみてるから。
　　　　なのでパッチにはなりませんかね（研究所に聞いてみないとわからないっす）
　　Q：性能が向上したパターンはあったが、悪化する場合などはあるのか？
　　A：不明
　　Q：Map-side Joinとの違いは？
　　A：。。。
※この辺で少し集中力が途切れてしまいました、すみません。（次に集中したかったので。。。）
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎ミクシィにおけるHadoopの利用：伊藤敬彦（mixi）&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　LSH-Based Recommendation engine powered by hadoop
　・実はmixiの話はすくないよ。
　・利用している環境。5or6台/クラスタ
　・Hadoopの活用
　　ログデータをHDFSに保存
　　DBコンテンツをHDFSに入れることで、DBに負荷をかけずに解析する。
　・マイニングも検証中
　　検索クエリログをベースにデータマイニング
　では、本題。
　・LSHを利用した推薦
　・推薦とは？
　　mixiにはいろいろ推薦（レコメンド）を付加できるサービスがある。
　・推薦するには？
　　類似インスタンス集合を抽出する。
　　インスタンスは文書だったりユーザだったり
　・類似インスタンスとは？
　　同じ特徴を持つ集合
　　例：同一商品購入したユーザとか同一単語を持つ文書とか
　・抽出するには？
　　全ユーザごとに全ユーザとの類似性をチェックすると時間がかかりすぎる！
　　＝＞LSHを利用しよう！
　・LSHについて
　　特徴：
　　・速い！
　　・精度はそれほどではない
　　事例：
　　・Google Newsのレコメンド（USロケール）
　・LSHの処理ステップ
　　2つだけ。
　　1.インスタンスベクトルを計算（似ているデータは同じ値が返りやすい関数）
　　2.同一値が帰ってきたデータが類似インスタンス
　・インスタンスベクトル例（あとでスライド見ようね）
　・Likelikeがいち実装。Hadoopでうごくよ
　・実験について
　　トップページに表示されていない記事を知ってもらうために推薦してみるぞ！
　・実験１
　　性能を測ってみた
　・実験２
　　精度を調べてみた。
　　精度はほんとにひどいな。。。
　　＝＞同一カテゴリの遷移を元に計算したらそれなりになってきた。
　・今後
　　データソースを増やしたい。
　　他のアルゴリズムも実装したい
　・CM
　　以下も作ってますよ。
　　Oluolu
　　Anuenue

　QA
　　Q：Mahoutは使わないんですか？
　　A：Likelikeを作った頃にMahoutになかったので作った。
　　　　性能比較したいと思ってる。
　　Q：ログサーバのデータ転送はどーやってる？
　　A：伊藤さんのところにはどういう仕組みかは上がって来てない。

　　Q：ベクトルの次元数はどのくらいまで耐えられる？
　　A：高次元のデータに対して耐えられるように作られてる。
　　　　次元数が低くて良い制度が欲しければ他のアルゴリズムがいいかも。
　　Q：ユーザのベクトルを作るテクニックは？
　　A：画像などであれば大変だけど、ユーザであれば、単語とかキーワードとかで

　　Q：ニュース以外のデータは？
　　A：まだまだ実験中。まだやってない。

　　Q：推薦される記事数のばらつきはどういった理由が考えられる？
　　A：後ほど考察してQAサイトに入れます。

　　Q：LSHをMapReduceに載せたということだけど、関数の計算をさせてる？
　　A：Iterationはしてない。
　　　Map側でLSH関数計算してる。Reduceにて類似インスタンスを導出してる。

　　Q：今後の予定の空間木とは？R-Treeだと高次元できついのでは？
　　A：低次元にて利用できるように用意したい。
　　　
　　Q：HamaとかGiraphで高速化させてみるのはどう？
　　A：イテレーションがいらないからあまり利用用途がないかなぁ。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;◎懇親会&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　AWSを採用しない企業がいくつかあったのでそのあたりを質問してみた。
　AWSは通常運用に利用すると結構なコストがかかる場合があるので、ノウハウがある企業や
　データ量が多い場合は、オンプレミスの場合を選択しているらしい。
　やはりスポットで利用する方がお得感があるみたいだった。
　Twitter上だけの知り合いだった方々と面識が持てたのが一番の収穫でした。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;感想＋調べること&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;感想&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
　会場規模とかQAサイトとかオープニングムービーとかすごかったです。しかも無料。さすがリクルートさん。
　ランチボックスとか出てきたし。装飾もとても無料のカンファレンスと思えない出来でした。
　午前中はHadoopをもとにした各社の戦略とCMという感じが色濃かったです。少しずつ各社の立ち位置が違いそれはそれで面白かったです。

　AWSの説明を聞いてやはりAWSを扱える技術は必要だと再認識。
　お金かけないで触ってみれるレベルでまずは触ってみるかなぁ。
　洗脳されてるのかもしれないけど、自社or自前でHadoop運用するのは厳しそうです。（懇親会ですこし認識が変わった）

　カフェコーナーでは、リクルートのMITの冊子が配られていたり、映像や案内に使われていたHadoopマスコットのシールが配られていたりと小技も聞いてました。
　あと、オライリーの販売コーナーも用意されていて、思わず子象本を買ってしまう罠にはまったりもしましたが。。。

　mixiの伊藤さんの話は最後で疲れていたのですが、ストーリーが上手くできていて、実験や事例もあったのでわかりやすかったです。
　Hadoopはエコシステムと呼ばれるHadoopを活用するツール群（Hiveの話が多かった？）、Hadoopの今後、Hadoopを活用したログ解析の話など、
　話題が豊富でそれぞれの話が面白くて困ってしいまうくらいです。
　いくつかのセッションで出てきたのですが、アクセスログなどをHDFS上に集めるための仕組みがまだ乱立（定番がまだない）している感じを受けました。
　Flume、Scribe、MapR。。。などなど

　あとは、テクニカルセッションのビデオがアップされたらまた目を通さないと。。。
　残念ながらHadoopから少し縁遠くなっていますが、これからもネタや参考になりそうな話には事欠かなそうなのでかじりついていこうと思います。
　※一番やらないといけないのは英語の勉強かもしれないです。。。
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;調べること&lt;/strong&gt;
一応Solrの人なので、Solrに関連しそうな話に興味がいってしまいます。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NTT研究所のリッチインデクシング技術&lt;/li&gt;
&lt;li&gt;やっぱりAWS触ってみる。EMRまでとは言わないが。（herokuもちょっと興味あるが。）&lt;/li&gt;
&lt;li&gt;Mesos、GreenPlum、Scribe、Storm、Flume、Giraphこれらの概要&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;関連サイト&lt;/strong&gt;
　&lt;a href=&#34;http://mit.recruit.co.jp/hadoop/conference2011fall/SES000000001?pno=1&#34;&gt;公式QAサイト&lt;/a&gt;。後日録画していたセッションがアップされるそうです
　&lt;a href=&#34;http://d.hatena.ne.jp/okachimachiorz/touch/20110927/1317076207&#34;&gt;Hadoop Conferene Japan Fall 2011 - 急がば回れ、選ぶなら近道&lt;/a&gt;
　&lt;a href=&#34;http://itpro.nikkeibp.co.jp/article/NEWS/20110926/369421/?ST=cloud&amp;amp;P=1&#34;&gt;Hadoopカンファレンスが開催、本格普及を見据えた支援サービスや先進事例が充実 - ニュース：ITpro&lt;/a&gt;
　&lt;a href=&#34;http://infra-engineer.com/hadoop/hadoop-conference-japan-2011-fall%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%95%E3%82%8C%E3%81%9F%E8%B3%87%E6%96%99%E3%82%84%E3%81%A4%E3%81%B6%E3%82%84%E3%81%8D-hcj11f/&#34;&gt;Hadoop Conference Japan 2011 fallで使用された資料 #hcj11f | インフラエンジニアのつぶやき&lt;/a&gt;（スライドをまとめてくれてます。）&lt;/p&gt;
</content:encoded>
    </item>
    
    <item>
      <title>Hadoopを中心とした分散環境での開発方法論・モデリング・設計手法等についての座談会(第5回）に参加しました。(Jugemより移植)</title>
      <link>https://blog.johtani.info/blog/2011/06/29/hadoop%E3%82%92%E4%B8%AD%E5%BF%83%E3%81%A8%E3%81%97%E3%81%9F%E5%88%86%E6%95%A3%E7%92%B0%E5%A2%83%E3%81%A7%E3%81%AE%E9%96%8B%E7%99%BA%E6%96%B9%E6%B3%95%E8%AB%96%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E8%A8%AD%E8%A8%88%E6%89%8B%E6%B3%95%E7%AD%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E5%BA%A7%E8%AB%87%E4%BC%9A-%E7%AC%AC5%E5%9B%9E%E3%81%AB%E5%8F%82%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F/</link>
      <pubDate>Wed, 29 Jun 2011 23:10:00 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2011/06/29/hadoop%E3%82%92%E4%B8%AD%E5%BF%83%E3%81%A8%E3%81%97%E3%81%9F%E5%88%86%E6%95%A3%E7%92%B0%E5%A2%83%E3%81%A7%E3%81%AE%E9%96%8B%E7%99%BA%E6%96%B9%E6%B3%95%E8%AB%96%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E8%A8%AD%E8%A8%88%E6%89%8B%E6%B3%95%E7%AD%89%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AE%E5%BA%A7%E8%AB%87%E4%BC%9A-%E7%AC%AC5%E5%9B%9E%E3%81%AB%E5%8F%82%E5%8A%A0%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F/</guid>
      <description>「Hadoopを中心とした分散環境での開発方法論・モデリング・設計手法等についての座談会(第5回）」に参加しました。300名入るイベントルー</description>
      <content:encoded>&lt;p&gt;「&lt;a href=&#34;http://www.zusaar.com/event/agZ6dXNhYXJyDAsSBUV2ZW50GNc_DA&#34;&gt;Hadoopを中心とした分散環境での開発方法論・モデリング・設計手法等についての座談会(第5回）&lt;/a&gt;」に参加しました。300名入るイベントルームでしたが、後ろの方まで人が埋まっていました。&lt;br /&gt;
ということで、主に自分用ですが、メモを取ったので。&lt;br /&gt;
※二次会行きたかった。。。&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
1.「鉄道システムへの誘い」&lt;br /&gt;
　@ayasehiro（本名無理w）&lt;br /&gt;
　Hadoopの話はありません。&lt;br /&gt;
&lt;br /&gt;
　○鉄道系基幹システムの開発&lt;br /&gt;
　　実態：&lt;br /&gt;
　　　耐用年数：１０年以上&lt;br /&gt;
　　　開発期間：数年～５年程度&lt;br /&gt;
　　　開発規模：～10Mステップ、10k人月～&lt;br /&gt;
&lt;br /&gt;
　　ほとんどテスト、しかも異常系が主体。&lt;br /&gt;
　　夜間に実際に鉄道を走らせて試験したり。&lt;br /&gt;
&lt;br /&gt;
　　開発サイクルが長い&lt;br /&gt;
　　　人材育成が難しい、ノウハウがたまらない。&lt;br /&gt;
&lt;br /&gt;
　　開発自体はほとんど時間がなく、設計・製造・試験など新規技術の採用が難しい。&lt;br /&gt;
　　開発４年前の調査・検証自体が２年程度。&lt;br /&gt;
　　Hadoopも調査中。&lt;br /&gt;
　　&lt;br /&gt;
　○鉄道システム３大システム&lt;br /&gt;
　　マルス（予約オンラインシステム）（1960～）&lt;br /&gt;
　　コムトラック（運行管理システム）（1972～）&lt;br /&gt;
　　ヤックス（ヤード自動化システム）（1968～1984）&lt;br /&gt;
&lt;br /&gt;
　○鉄道輸送システムとは&lt;br /&gt;
　　用語：&lt;br /&gt;
　　　運行を計画する=&amp;gt;輸送計画&lt;br /&gt;
　　　列車を運行する=&amp;gt;運行管理&lt;br /&gt;
&lt;br /&gt;
　　需要想定＋営業施策＋その他（お召し列車など）＝列車ダイヤ作成&lt;br /&gt;
　　　基本計画（長期）＋短期計画（数日～四半期程度）＝列車ダイヤ（重ねあわせてできあがり）&lt;br /&gt;
&lt;br /&gt;
　　ダイヤの計画（発車時刻など）と車両運用（車両自体の走る組み合わせ（仮の車両））の作成&lt;br /&gt;
　　＋乗務員運用（乗務員の運用計画）&lt;br /&gt;
&lt;br /&gt;
　　運行管理：&lt;br /&gt;
　　　なにも起きなければすることなし。（車両故障、天候、人身事故などによる整合性を取る作業）&lt;br /&gt;
　　　＝事前に計画した輸送計画をすべて見直し&lt;br /&gt;
　　　遅延の検知は？&lt;br /&gt;
　　　　昔：人による伝令&lt;br /&gt;
　　　　今：システムによる検知（レールに電流流して検知）&lt;br /&gt;
&lt;br /&gt;
　　　運転整理（実際に遅れた）：&lt;br /&gt;
　　　　部分運休、折り返し駅の変更などにより対応&lt;br /&gt;
　　　　元の計画になるべく近づく形で修正していく。&lt;br /&gt;
&lt;br /&gt;
　　　新幹線、山手線、京浜東北線などは速度信号という信号が表示される。&lt;br /&gt;
　　　線路上に信号はないらしい。&lt;br /&gt;
&lt;br /&gt;
　○鉄道システムを取り巻く情勢&lt;br /&gt;
　　少子高齢化・人口減少のため凋落産業となっている。&lt;br /&gt;
　　社会インフラの責務＝動くのが当たり前&lt;br /&gt;
　　2007年問題（ベテランの引退）＝スジ屋さんは最近いないらしい。&lt;br /&gt;
　　高度な判断支援をするシステムが必要&lt;br /&gt;
　　　連続稼動＝分散技術を適用できない？&lt;br /&gt;
　　　関係各所との情報共有&lt;br /&gt;
　　　計画立案のための情報支援＝最適化技術を適用できない？&lt;br /&gt;
　　&lt;br /&gt;
　○分散処理技術の適用&lt;br /&gt;
　　個人的な感想&lt;br /&gt;
　　　可用性（連続稼動）のための仕組み&lt;br /&gt;
　　　バッチ処理&lt;br /&gt;
&lt;br /&gt;
　○分散技術の適用&lt;br /&gt;
　　・連続稼動&lt;br /&gt;
　　　active-active構成がメイン&lt;br /&gt;
　　　　主系の出力だけを行う。問題が出れば副系の出力。&lt;br /&gt;
　　　3系統の出力を比較器にて出力もある&lt;br /&gt;
　　　　magiシステム&lt;br /&gt;
　&lt;br /&gt;
　　　問題点：&lt;br /&gt;
　　　　ハードが高い（H社）&lt;br /&gt;
　　　　ソフトウェアの作り込みが複雑＝テストが前パターンできない&lt;br /&gt;
　　　解決案：&lt;br /&gt;
　　　　汎用的なハードが使いたい。&lt;br /&gt;
　　　　作り込みも減らしたい&lt;br /&gt;
　　・バッチ処理：&lt;br /&gt;
　　　Asakusa使えないかなーw&lt;br /&gt;
&lt;br /&gt;
　○最適化技術の採用&lt;br /&gt;
　　コンピュータ技術の発展&lt;br /&gt;
　　2007年問題&lt;br /&gt;
　　　職人に言わせれば最適化はいらない、俺の言うことを聞けｗ&lt;br /&gt;
&lt;br /&gt;
　　・車両運用のモデリング&lt;br /&gt;
　　　車両数大=&amp;gt;組み合わせ大&lt;br /&gt;
　　　制約条件が多い&lt;br /&gt;
　　　車両運用の場合、走行累積キロの条件もある&lt;br /&gt;
　　　-&amp;gt;有向グラフにモデル化される。（ただし、グラフ化するまでが大変）&lt;br /&gt;
　　・乗務員運用のモデリング&lt;br /&gt;
　　　車両と違い、乗務員は1回で2人とか運べる（運転士＋移動する人とか）&lt;br /&gt;
&lt;br /&gt;
　　・車両割当のモデリング&lt;br /&gt;
　　　やはり、グラフ化が可能&lt;br /&gt;
&lt;br /&gt;
　　・乗務員交番のモデリング。。。など&lt;br /&gt;
&lt;br /&gt;
　　結構一般的なモデルに落とし込める。ただし、落し込みが大変。&lt;br /&gt;
　　机上研究だったものが、コンピュータの発展により実証研究になりつつある。&lt;br /&gt;
　　&lt;br /&gt;
　○まとめ&lt;br /&gt;
　　鉄道システムはまだまだ未到の領域が残っている。&lt;br /&gt;
　　開発サイクルが長いため、保守的な開発になる（35年前の設計思想からあまり変わってなかったりする）&lt;br /&gt;
　　しかし業務要件やシステム利用者の意識は変化している&lt;br /&gt;
　　&lt;br /&gt;
　　興味を持たれた方は、ぜひ、我社に！（社名は2次会でｗ）&lt;br /&gt;
&lt;br /&gt;
　○Q&amp;amp;A&lt;br /&gt;
　　Q：鉄道システムのカルチャーってイケイケ？保守的？（@okachimachiorgさん）&lt;br /&gt;
　　A：最新技術も知らないとだめじゃないかという人が出てきている。&lt;br /&gt;
　　　 コア部分（安全第一なところ）＋周辺領域（ある程度融通が効きそうな部分）と考えることができるんじゃないかって人も出てきている。&lt;br /&gt;
　　　 JR九○＝先進的&lt;br /&gt;
　　　 JR四○、北○道＝お金ない&lt;br /&gt;
　　　 JR○海＝超保守（企業的に超保守）&lt;br /&gt;
　　　 JR東、西＝うーむ？&lt;br /&gt;
　　　 東京メト○（運行計画）、阪○＝先進的&lt;br /&gt;
　　　 京○急行＝基本人間で進路制御w&lt;br /&gt;
　　　基本的には新しいものには興味をもつ人たちでは。&lt;br /&gt;
　　Q：Su○caとかで分散処理は利用出来るんでは？&lt;br /&gt;
　　A：匿名なので外側から見ていると分散処理はいろいろ使えるんでは？&lt;br /&gt;
　　　 ログデータからいろいろできるんじゃないの？活かすべきでないの？&lt;br /&gt;
　　　 使いどころはいっぱいある。&lt;br /&gt;
　　Q：鉄道システムでどうしようもなくなったことはあるか？&lt;br /&gt;
　　A：保守体制が一番気になる。&lt;br /&gt;
　　　 OSSとかならまだ調べられる。ミドルウェアなどの保守契約が必要。&lt;br /&gt;
　　　 保守体制が確立されてればある程度の保守費用は飲み込む。&lt;br /&gt;
　　　 どうしようもないことはないが、今すごく困ってることは&lt;br /&gt;
　　　 Excelで帳票を出したいとかいわれること。（ちょっと前に作ったシステムでExcel2003。バージョンあげると速度が遅くなったりするｗ）&lt;br /&gt;
　　　 ilog社のものを使ってたが、IBMに買収されて保守費用があがってこまってるｗ&lt;br /&gt;
　　　 保守が10年と長いため、サポートなどの折衝が必要。&lt;br /&gt;
　　Q：最適化の適用範囲は？&lt;br /&gt;
　　A：走行順序（どこで追い抜くか）の算出に活用。ほぼ完成でユーザ教育中。&lt;br /&gt;
　　　 1列車の波及がかなり影響が出る。ダイヤだけ見ると列車だけだが、乗務員も関係しており、大変。&lt;br /&gt;
　　　 ある時点から終電までを最適化の対象としたりして割り切っている。&lt;br /&gt;
　　　 また、不足分について算出が出来れば、そこで打ち切ったりもする。&lt;br /&gt;
&lt;br /&gt;
2.「九州電力におけるHadoopの取り組みについて」&lt;br /&gt;
　株式会社キューデンインフォコム e－ビジネス部　@hisashi_yano&lt;br /&gt;
　概要：2年間関係したOSSをメインにしたシステムの話。&lt;br /&gt;
&lt;br /&gt;
　○九州電力の概要&lt;br /&gt;
　　現在風当たりが強い業界。&lt;br /&gt;
　　東電の1/10くらい&lt;br /&gt;
　　部門ごとに大手ベンダーが関わってる。&lt;br /&gt;
&lt;br /&gt;
　○Hadoop採用の経緯&lt;br /&gt;
　　部門ごとに個別最適なシステムを導入していてベンダーロックインされてる。&lt;br /&gt;
&lt;br /&gt;
　　　　・ホストのリプレース&lt;br /&gt;
　　・両現用センター構成への対応&lt;br /&gt;
　　・スマートグリッドへの対応&lt;br /&gt;
&lt;br /&gt;
　　問題点&lt;br /&gt;
　　・コスト削減&lt;br /&gt;
　　・技術革新への中の人の対応（内部でも問題を理解できるように）&lt;br /&gt;
　　・商用パッケージのカスタマイズの限界&lt;br /&gt;
　　・脱ベンダーロックイン（実は楽なんだけど。。。）&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
　○過去2年間の研究内容&lt;br /&gt;
　　・H21年度の結果&lt;br /&gt;
　　　テーマ：クラウドの要素技術の研究&lt;br /&gt;
　　　　KVM、Eucalyptus、wakame、hadoop　　　&lt;br /&gt;
　　　&lt;br /&gt;
　　　性能比較：VMWareとKVM-&amp;gt;ベンチマーク比較&lt;br /&gt;
　　　　　結論：性能的にあまり問題なし。&lt;br /&gt;
　　　MapReduceの耐障害性など&lt;br /&gt;
　　　　　ダミーデータにより台数増加による影響を検証&lt;br /&gt;
　　　　　結論：台数大-&amp;gt;性能向上&lt;br /&gt;
　　　　　　　　ストリーミングは性能劣化する&lt;br /&gt;
　　　　　　　　スループットはリニアに向上&lt;br /&gt;
　　　　　信頼性は？&lt;br /&gt;
　　　　　　実行中にノードを抜いたりして検証。&lt;br /&gt;
　　　　　結論：問題なし。&lt;br /&gt;
　　　クラウド環境におけるシステム管理手法&lt;br /&gt;
　　　　複数ハードで1アプリという構成になる。&lt;br /&gt;
　　　　監視対象が膨大になる。&lt;br /&gt;
　　　　障害発生時の切り離しや監視対象も膨大。&lt;br /&gt;
　　　　データセンター自体を監視する仕組みが必要では？というところで終了。&lt;br /&gt;
&lt;br /&gt;
　　・H22年度の結果&lt;br /&gt;
　　　分散に特化した研究&lt;br /&gt;
　　　前年度の課題&lt;br /&gt;
　　　　サーバの仮想化・管理に関する課題&lt;br /&gt;
　　　　分散処理に関する課題&lt;br /&gt;
　　　　分散処理環境の運用監視に関する課題&lt;br /&gt;
　　　目的：&lt;br /&gt;
　　　　Hadoopを本番への適用（実際にはダミーデータ＋本番の仕組み）&lt;br /&gt;
　　　&lt;br /&gt;
　　　柔軟なサーバ統合基盤（サーバを起動-&amp;gt;バッチを起動-&amp;gt;回す仕組み）＝MonkeyMagic&lt;br /&gt;
　　　　libvirtを使ってる&lt;br /&gt;
　　　　&lt;br /&gt;
　　　50台の仮想サーバの起動が10数分で完了。&lt;br /&gt;
&lt;br /&gt;
　　運用監視基盤（monkey magic）&lt;br /&gt;
　　　仮想、実サーバ混在の監視&lt;br /&gt;
　　　監視状況（サーバの状況）から判断して制御する仕組みを構築&lt;br /&gt;
　　　DSLにてルール（判断＋制御）を指定&lt;br /&gt;
　　　・ジョブの監視&lt;br /&gt;
　　　・ジョブの実行管理&lt;br /&gt;
　　　・構成管理の省力化&lt;br /&gt;
　　　　volanteと連携が可能＝AmazonWebServiceとも連携可能&lt;br /&gt;
　　　・サーバリソース＋アプリケーションの一括監視が可能&lt;br /&gt;
　　分散バッチ処理の概要&lt;br /&gt;
　　　RDBからKV形式にして抽出し、MRで回してRDBに戻すという研究&lt;br /&gt;
　　　対象：&lt;br /&gt;
　　　　配電部門（電柱の設備情報の目視検査）のデータの月間バッチ処理&lt;br /&gt;
　　　現状：&lt;br /&gt;
　　　　19時間程度かかってる。&lt;br /&gt;
　　　テスト環境：&lt;br /&gt;
　　　　実サーバ2台（仮想10台）&lt;br /&gt;
　　　　MySQL、Javaで実装&lt;br /&gt;
　　　処理内容&lt;br /&gt;
　　　　電柱104万本&lt;br /&gt;
　　　　巨大バッチを分割して実装&lt;br /&gt;
　　　結果&lt;br /&gt;
　　　　MySQL1台では15日以上かかる処理（現行システムで19時間）&lt;br /&gt;
　　　　処理が32分で終了！他でも効果でるよね。&lt;br /&gt;
　　　バッチ短縮の理由は？&lt;br /&gt;
　　　　1.データアクセスが分散された&lt;br /&gt;
　　　　2.処理の並列化（多重化出来る部分がうまくできた）&lt;br /&gt;
　　　&lt;br /&gt;
　　分散処理を書くのに2名死亡。。。&lt;br /&gt;
&lt;br /&gt;
　　適用基準の策定、開発ガイドライン、フレームワーク整備などが必要。&lt;br /&gt;
&lt;br /&gt;
　・H23年度は？&lt;br /&gt;
　　Asakusaの適用など。&lt;br /&gt;
&lt;br /&gt;
　・さらに今後は？&lt;br /&gt;
　　スマートグリッドへの適用&lt;br /&gt;
　　　-&amp;gt;メーターの交換が必要だが、10年くらいかかる&lt;br /&gt;
　　　-&amp;gt;スパンが長い（10年）ので商用製品だときつい？&lt;br /&gt;
　　　データ量も半端ない。&lt;br /&gt;
　　　テネシー州とClouderaでOpenPDCってのやってるらしい。&lt;br /&gt;
　　&lt;br /&gt;
　　電力と気温の関係は密接な関係あり。&lt;br /&gt;
　　　エアコンが割合を占めてるから。&lt;br /&gt;
　　　過去実績と予想気温データから分析するのにHadoop使える！&lt;br /&gt;
　　　&lt;br /&gt;
　・2年間やってきて思うこと&lt;br /&gt;
　　将来目指すべき理想像を掲げるのが重要&lt;br /&gt;
　　新技術導入は段階を踏むことが必要&lt;br /&gt;
　　コミュニケーション大切！&lt;br /&gt;
&lt;br /&gt;
　○Q&amp;amp;A&lt;br /&gt;
　　Q：仮想化環境のオーバヘッドは？（I/O）&lt;br /&gt;
　　A：台数を増やしたときにどうなるか？というのを検証したかった。&lt;br /&gt;
　　　アプリ配布も考えていたので、物理サーバに縛られたくなかった。&lt;br /&gt;
　　Q：仮想化に関して気をつけたM/RのPGで気をつけたことありますか？&lt;br /&gt;
　　A：まったくないです。&lt;br /&gt;
　　Q：日本でスマートグリッドははやるの？&lt;br /&gt;
　　A：電力会社的にはやりたくない。費用対効果があまりない。&lt;br /&gt;
　　Q：今後のスケジュールは？&lt;br /&gt;
　　A：文書管理システムの組織名変更などの処理時間が540時間とかでてくるらしい。&lt;br /&gt;
　　　これをHadoopで対応してみようかと思ってる。&lt;br /&gt;
　　Q：Asakusaをどう評価していくのか？&lt;br /&gt;
　　A：開発効率性があがるか？は検証する予定。1/3くらい楽になるんじゃないかなぁ？byのぐちさん&lt;br /&gt;
　　　バッチの種類などにもよると思うが、標準化も指標にする予定。&lt;br /&gt;
　　　結果はまたこの場で報告する予定。&lt;br /&gt;
　　Q：Asakusa＋MonkeyMagicの連携はどんなこと考えてる？&lt;br /&gt;
　　A：MonkeyMagicを運用基盤として行く予定。合意が取れればだけど。&lt;br /&gt;
　　※MonkeyMagicもOSSにするよー&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;
&lt;h3 id=&#34;まとめbr-&#34;&gt;まとめ&lt;br /&gt;&lt;/h3&gt;
&lt;p&gt;Hadoopから少しずつ離れつつありますが、やはり興味があるので、非常に楽しく話を聞けました。&lt;br /&gt;
また、今回はインフラ分野のシステムということで、システムに要求されるレベルや&lt;br /&gt;
運用周りにも気を配っている話が聞けたのが収穫でした。保守期間が長いため、テストが長い＝&lt;br /&gt;
運用もしっかりと考慮を入れた設計、実装が必要になるというのは最もだと思います。&lt;br /&gt;
ただ、少しずつ修正が入るアジャイルなども同様かと。&lt;br /&gt;
&lt;br /&gt;
MonkeyMagicが出来上がってきた背景の話を聞いて、さらに興味が湧いてきたところです。&lt;br /&gt;
今後もかかわりが少ないかもしれないですが、ウォッチしていきたいと思いました。&lt;br /&gt;
&lt;br /&gt;
ただ、興味あるモノが多すぎるので、優先度をつけつつこなして行かないと。。。&lt;br /&gt;
少しずつでも身につけていきたいと思う今日このごろです。&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
※追記：Twitterでコメントを頂いたので、忘れないように追記。&lt;br /&gt;
コメントを貰えるだけでもうれしい。やはり、アウトプットしたらフィードバック貰いたいし。&lt;br /&gt;
ありがとうございます！&lt;br /&gt;
&lt;br /&gt;
&lt;a href=&#34;http://twitter.com/#!/cocoatomo/status/86124705140047872&#34;&gt;Twitter / @cocoatomo: あの質問をまとめるとこうなるのかぁ…… 最適化そのも &amp;hellip;&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;a href=&#34;http://twitter.com/#!/cocoatomo/status/86236412344680448&#34;&gt;Twitter / @cocoatomo: @johtani すみません, コメントはコメント欄 &amp;hellip;&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;a href=&#34;http://twitter.com/#!/cocoatomo/status/86236865174323200&#34;&gt;Twitter / @cocoatomo: @johtani そこらへんの理論って最後には計算量 &amp;hellip;&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;a href=&#34;http://twitter.com/#!/cocoatomo/status/86281140184432641&#34;&gt;Twitter / @cocoatomo: @johtani あの話し振りだとどうもまだ本格的に &amp;hellip;&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;
あと、まとめも出来ていたので、ついでに。&lt;br /&gt;
&lt;a href=&#34;http://togetter.com/li/155628&#34;&gt;Togetter - 「2011/06/29_Hadoopを中心とした分散環境での開発方法論・モデリング・設計手法等についての座談会(第5回） #hadoopmodeling」&lt;a/&gt;&lt;br /&gt;
&lt;br /&gt;
関連するブログも見つけたので。&lt;br /&gt;
&lt;br /&gt;
&lt;a href=&#34;http://blog.goo.ne.jp/hishidama/e/a6c5ae00a7a1bacbc88e023691a2eb0c&#34;&gt;第5回Hadoop座談会の感想 - ひしだまの変更履歴&lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;a href=&#34;http://d.hatena.ne.jp/torazuka/20110629/hadoop&#34;&gt;Hadoopモデリング座談会（第5回）へ行ってきました - 虎塚&lt;/a&gt;&lt;/p&gt;
</content:encoded>
    </item>
    
  </channel>
</rss>
