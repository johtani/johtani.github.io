<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>DIYキーボード on @johtaniの日記 3rd</title>
    <link>https://blog.johtani.info/tags/diy%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89/</link>
    <description>Recent content in DIYキーボード on @johtaniの日記 3rd</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <lastBuildDate>Thu, 03 Dec 2020 23:13:44 +0900</lastBuildDate><atom:link href="https://blog.johtani.info/tags/diy%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Corne Chocolateを組み立てた #DIYキーボード</title>
      <link>https://blog.johtani.info/blog/2020/12/03/build_corne_choc/</link>
      <pubDate>Thu, 03 Dec 2020 23:13:44 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2020/12/03/build_corne_choc/</guid>
      <description>はじめまして、pyspa。 ということで、pyspa Advent Calendar 2020の4日目(大谷コンビの2号)の投稿になります。 コンビそろってキーボード記事です</description>
      <content:encoded><p>はじめまして、pyspa。
ということで、<a href="https://adventar.org/calendars/5310">pyspa Advent Calendar 2020</a>の4日目(大谷コンビの2号)の投稿になります。
コンビそろってキーボード記事ですね。</p>
<p>今年はDIYキーボードにはまった（はめられた？）年でした。
もともと分割キーボードには興味があり、自宅で作業するのが基本となったのもあり手を出した次第です。
まだまだ使いこなすところまでは来てないかもしれないですが、組み立てたり、問題点のキリ分けしたり、試行錯誤するのは楽しいなと。</p>
<p>今回はCorne Chocolateというキーボードを組み立てたのでそちらのビルドログ（かつ今後のための教訓）になります。
LEDを使ったキーボードがどんなものなのか＋薄いキーボードも気になるなということで取り組んでみました。
今回もいくつか失敗をしつつ、リカバリーして動くものができました。</p>
<h2 id="パーツ材料">パーツ（材料）</h2>
<p>基本のパーツは今回も<a href="https://kochikeyboard.stores.jp/">Kochi Keyboard</a>さんから購入しました。</p>
<ul>
<li>キット : <a href="https://kochikeyboard.stores.jp/items/5f65ea9afbe5b52cac9ba2c0">Corne Chocolate（ベースキット）</a></li>
<li>キースイッチ : <a href="https://kochikeyboard.stores.jp/items/5f9e6aaef0b1085ce18b76ff">Kailh Choc v1 Blue (25gf リニア) 5個</a></li>
<li>キーキャップ : <a href="https://yushakobo.jp/shop/pg1350cap-doubleshot/">Kailhロープロ刻印キーキャップ</a></li>
</ul>
<p>ケーブル類は家に転がっていたケーブルを利用しました。
キースイッチセットもあるのですが、軽いキータッチが好みなので、一番軽いKailh ChocのBlueを試してみたくキースイッチを個別に選択しました。
キーキャップは<a href="https://yushakobo.jp/shop/shiro/">Shiro</a>を作るときに調達していたものを利用した形です。</p>
<p>今回も<a href="https://github.com/foostan/crkbd/blob/master/corne-chocolate/doc/buildguide_jp.md">公式のビルドガイド</a>にざっと目を通してから着手しました。</p>
<h2 id="準備">準備</h2>
<p>ビルドログにもあるようにPCBがリバーシルブなので、作業中に迷子にならないようにこんな感じで表にマスキングテープで目印をつけておきました。</p>

<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box" style="max-width:600">
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/entries/20201204/marking.jpg" />
    </div>
    <a href="/images/entries/20201204/marking.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<p>今回から耐熱ワーキングマットで作業をすることにしました。机の天板に傷つくの嫌だし。
気兼ねなくはんだできるのでおすすめです。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr"><a href="https://t.co/0qntPD8qIa">https://t.co/0qntPD8qIa</a><br>2ヶ月ぐらいにここで買いました！</p>&mdash; 🤓k.bigwheel🤓 SREエンジニア@Speee株式会社 (@k_bigwheel) <a href="https://twitter.com/k_bigwheel/status/1326522825017057280?ref_src=twsrc%5Etfw">November 11, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="ダイオードoledソケットコンスルーtrrsソケット">ダイオード、OLEDソケット、コンスルー、TRRSソケット、</h2>
<p>こちらは前回のCorneとほぼ同様だったのでビルドガイド通りに進めます（写真撮り損ねました。。。）
前回との違いはダイオードの形です。
表面実装するタイプのダイオードなので向きに気を付けつつ、つけていきます。</p>
<p><a href="https://github.com/foostan/crkbd/blob/master/corne-chocolate/doc/buildguide_jp.md#%E3%83%80%E3%82%A4%E3%82%AA%E3%83%BC%E3%83%89">ビルドガイドに向きやダイオードのつけ方</a>が紹介されています。
拡大鏡とピンセット必須ですね。
前回同様に、ここまででいったんqmk_toolsでファームウェアをインストールして、ピンセットを使いながらキーの認識とOLEDの動作確認を行いました。
今使っているファームウェアがあるのでそれを入れて問題ないかを確認しました。</p>
<h2 id="led実装">LED実装</h2>
<p>今回のメインイベントです（そして苦杯をなめたイベントでもあります）。
<a href="https://github.com/foostan/crkbd/blob/master/corne-chocolate/doc/buildguide_jp.md#led%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3">ビルドガイドにも記載</a>がありますが、信号が流れる順番があるようなので1番から取り付けていきます。
また、ビルドガイドにLEDに関する注意事項もいくつか掲載されています。必ず読みましょう。</p>
<p>この1～6までのLEDがすごく大変でした。。。</p>
<h3 id="表面実装のledunderglow-ledで四苦八苦">表面実装のLED（Underglow LED）で四苦八苦</h3>
<p>いくつかのブログを参考にしながら作業を進めました。</p>
<ul>
<li><a href="https://marksard.github.io/2018/08/04/make-the-crkbd/">コルネキーボードを作りました ～LED取り付けに四苦八苦記～ | キオクノロンダリング</a>
<ul>
<li>SK6812miniの仕様などについて書いてあります。デバッグするのにすごく役に立ちました。</li>
</ul>
</li>
</ul>
<ul>
<li><a href="https://nok0714.hatenablog.com/entry/2019/03/02/194138">Corne Chocolateビルドログ - nokの雑記</a>
<ul>
<li>手書きでどんな感じでやればいいのかを解説してくれています。最終的にはこの方法が一番だったのかも？</li>
</ul>
</li>
<li><a href="https://salicylic-acid3.hatenablog.com/entry/2018/11/26/%E8%87%AA%E4%BD%9C%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%82%AD%E3%83%83%E3%83%88%E3%80%8CCorne_Cherry%E3%80%8D%E3%81%AE%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC#%E7%B5%84%E7%AB%8B%E9%9B%A3%E6%98%93%E5%BA%A6">自作キーボードキット「Corne Cherry」のレビュー - 自作キーボード温泉街の歩き方</a>
<ul>
<li>あとで出てきますが、リカバリ方法の参考になりました。</li>
</ul>
</li>
</ul>
<p>皆さん苦労されてますね、そして私も苦労しました。。。</p>
<p>試してみた方法、考察は次の通りです。</p>
<ul>
<li>LEDチェック用のファームウェアをインストールして1つつけては動作確認
<ul>
<li><a href="https://qiita.com/yshr04hrk/items/c050a80ab5d2ff869db9#led%E3%83%86%E3%82%B9%E3%83%88%E7%94%A8%E3%83%95%E3%82%A1%E3%83%BC%E3%83%A0%E3%82%A6%E3%82%A7%E3%82%A2%E3%82%92%E7%84%BC%E3%81%84%E3%81%A6%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D">HelixのLEDテスト用ファームウェアをインストールしました</a>。</li>
</ul>
</li>
<li><a href="https://amzn.to/39Cyc07">白光 1C型こて先</a>
<ul>
<li>失敗した後にリカバリするために購入しました。</li>
<li>LEDのランドなどが2Cよりも面積が小さいので、そのサイズに合わせたこて先のほうがよかったようです。</li>
</ul>
</li>
<li>はんだの温度（温調できるはんだごて必須）
<ul>
<li>最初は250℃でやっていましたが、なかなかはんだが溶けません。そのせいで焦りも出てきます。</li>
<li>最終的には270度で作業しましたが、温度のせいでLEDが壊れたのはなかった気がします。1Cのこて先だったので無事だったのかもしれません。</li>
</ul>
</li>
<li>フラックスなし
<ul>
<li>あると楽だったのかも？残念ながら試してないです。</li>
</ul>
</li>
<li>予備はんだ手法（だめっぽかった）
<ul>
<li>基盤のランド4か所に予備はんだをし、はんだを温めつつLEDを乗せる方法</li>
<li>LEDの裏にも予備はんだ</li>
<li>どちらも試してみましたが、温めている個所以外のはんだと高さの違いが出てしまい、LEDが浮いてしまいます。4か所を同時に温めることはできないので、すこしずつ調整しているうちにLEDを物理的に壊してしまうことがありました。。。</li>
</ul>
</li>
</ul>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ちょっとコツが分かったかも？ <a href="https://t.co/ruwrmEWCAe">pic.twitter.com/ruwrmEWCAe</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1329446835505786880?ref_src=twsrc%5Etfw">November 19, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>わかった気になっていますが結局失敗しました。。。</p>
<p>結局最後までこれというコツはわかってない気がします。結局3つか4つのLEDがお亡くなりになりました。
うまくいかなかった原因は、予備はんだで傾きなどができ、それを修正していくうちに基盤やLEDにダメージを与えてしまったのだと思います。</p>


<div class="box" style="max-width:600">
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/entries/20201204/broken_led_and_pcb.jpg" />
    </div>
    <a href="/images/entries/20201204/broken_led_and_pcb.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<p>よく見ると基盤が一部剥がれかけてるのがわかるかなぁと。</p>
<h3 id="リカバリー">リカバリー</h3>
<p>右手側の表面実装の4番と5番が失敗しました。</p>
<ul>
<li>4番目（以下のツイート右側画像の上）
<ul>
<li>こちらは、1度付けたLEDをはがすときにはんだを取り除くのが不十分な状態でLEDをはがしたために、基板のランドごとはがれてしまいました。</li>
<li>なのでここはLEDはつかないです。。。</li>
</ul>
</li>
<li>5番目(以下のツイート右側画像の真ん中あたりの黄色い線がつながっているLED)
<ul>
<li>LED自体はつけてありますが、青色しか発光しなくなっています。</li>
</ul>
</li>
</ul>
<p>4番目が完全に死んでしまったので、無事な3番目のLEDのDINに流れている信号を
5番目のLEDのDINにも流れるようにするために10芯コードでショートカットさせました。
（リカバリ方法は先ほど紹介したブログが非常に参考になりました、先人の知恵ありがたし）。
黒い線も売っていたのですが、自戒も込めて目立つ色にしてみました。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">勉強させていただきました、、、 <a href="https://t.co/Zp16fJKziM">pic.twitter.com/Zp16fJKziM</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1330507767845711874?ref_src=twsrc%5Etfw">November 22, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>ちなみに、左側のショートカットのコードはつけた後に1か所LEDの向きが違うことに気づき必要なくなっています
（上記の基盤が傷ついている画像をよく見ると上下が逆になってるのがわかる人にはわかるかも）。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">片方は導線なくて良くなった。表から見たら向きが違うのに気がついたわ、、、 <a href="https://t.co/7TSDMPPxlX">pic.twitter.com/7TSDMPPxlX</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1330511865827319809?ref_src=twsrc%5Etfw">November 22, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>最終的に2か所おかしいLEDにはなりましたが、幸いにもアンダーグローです。
Kochi Keyboardさんで購入したキットのボトムプレートはFR4なのでほぼ見えません！（負け惜しみ）</p>
<h2 id="ソケット">ソケット</h2>
<p>さて、気を取り直してソケットをつけていきます。
Dozen0にて経験済みなのでそれほど手間はかかりませんでした。
LEDの失敗の時に1Cのこて先を購入していたため、ソケットの横の隙間からこて先が差し込めたのが便利でした（LEDでダメージを受けていたのもあり写真撮り忘れ）。</p>
<h2 id="完成">完成</h2>
<p>ということで完成です。デフォルトで赤く光ってます。キーキャップがLEDを透過してくれるタイプだったのがこれまたよかったですね。
作る前は光らなくてもなんて思ってたのに。</p>


<div class="box" style="max-width:600">
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/entries/20201204/red_light.jpg" />
    </div>
    <a href="/images/entries/20201204/red_light.jpg" itemprop="contentUrl"></a>
  </figure>
</div>

<h2 id="キーマップv2">キーマップ(v2)</h2>
<p>Corne Lightで作業を数週間ほどして、いくつか入力しにくい部分があったのでマッピングを少しだけ変えました。
相変わらず日本語キーボードベースですが、数字のレイヤーにいくつかの記号を使えるように割り当てました。
コーディングをするときに、ライブラリのバージョン（例：7.10.0とか）やIPアドレスを入力していてレイヤー切り替えのためのキーを押したり話したりするのは効率が悪すぎたためです。
数字との組み合わせでよく使いそうな以下のキーを数字のレイヤーに移動しました。</p>
<ul>
<li>セミコロン（JP_SCLN）</li>
<li>コロン（KC_QUOT）</li>
<li>アンダースコア（JP_UNDS）</li>
<li>コンマ（KC_COMM）</li>
<li>ピリオド（KC_DOT）</li>
<li>スラッシュ（KC_SLSH）</li>
</ul>
<pre><code>#include &quot;keymap_jp.h&quot;

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [0] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
       KC_TAB,    KC_Q,    KC_W,    KC_E,    KC_R,    KC_T,                         KC_Y,    KC_U,    KC_I,    KC_O,   KC_P,  JP_MINS,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LCTL,    KC_A,    KC_S,    KC_D,    KC_F,    KC_G,                         KC_H,    KC_J,    KC_K,    KC_L, JP_SCLN, KC_QUOT,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LSFT,    KC_Z,    KC_X,    KC_C,    KC_V,    KC_B,                         KC_N,    KC_M, KC_COMM,  KC_DOT, KC_SLSH, KC_RSFT,
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI,   MO(1),  KC_SPC,     KC_ENT,   MO(2), KC_RALT
                                      //`--------------------------'  `--------------------------'

  ),

  [1] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
       KC_ESC,    KC_1,    KC_2,    KC_3,    KC_4,    KC_5,                         KC_6,    KC_7,    KC_8,    KC_9,    KC_0, KC_BSPC,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LCTL, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      KC_LEFT, KC_DOWN,   KC_UP,KC_RIGHT, JP_SCLN, KC_QUOT,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LSFT, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      JP_UNDS, XXXXXXX, KC_COMM,  KC_DOT, KC_SLSH, XXXXXXX,
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI, _______,  KC_SPC,     KC_ENT,   MO(3), KC_RALT\
                                      //`--------------------------'  `--------------------------'
  ),

  [2] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
       KC_TAB, JP_EXLM, JP_DQUO, JP_HASH,  JP_DLR, JP_PERC,                      JP_AMPR, JP_QUOT, JP_LPRN, JP_RPRN, JP_CIRC, KC_BSPC,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LCTL, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      JP_MINS,  JP_EQL, JP_LBRC, JP_RBRC,  JP_YEN,   JP_AT,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LSFT, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      JP_UNDS, JP_PLUS, JP_LCBR, JP_RCBR, JP_PIPE, JP_TILD,
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI,   MO(3),  KC_SPC,     KC_ENT, _______, KC_RALT
                                      //`--------------------------'  `--------------------------'
  ),

  [3] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
        RESET, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,\
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      RGB_TOG, RGB_HUI, RGB_SAI, RGB_VAI, RGB_SPI, XXXXXXX,                      XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,\
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      RGB_MOD, RGB_HUD, RGB_SAD, RGB_VAD, RGB_SPD, XXXXXXX,                      XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,\
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI, _______,  KC_SPC,     KC_ENT, _______, KC_RALT\
                                      //`--------------------------'  `--------------------------'
  )
};
</code></pre><h2 id="ledの色が変えられる気づくの遅い">LEDの色が変えられる！（気づくの遅い）</h2>
<p>あと、キーマップを変更しているときに4つ目のレイヤーにRGBなどのボタンがあるのに気付いて押してみたら、LEDのパターンや色を変えることができるのに気付きました。
（遅すぎでは。。。）</p>
<p>キーキャップが白いのもありこんな感じの色にしてみています。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ユニコーンガンダムっぽくなった <a href="https://t.co/vHxZkMrYyP">pic.twitter.com/vHxZkMrYyP</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1332490582288076800?ref_src=twsrc%5Etfw">November 28, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="まとめ">まとめ</h2>
<p>ということで、失敗も多々ありましたがキーボードとしてはちゃんと動くできたものができたので安心しました。
今後、状況が落ち着いてきて自宅以外で仕事をするときにはCorne ChocolateをPCと一緒に持ち歩くと思います。
薄くて邪魔にならなくてよさそうです。</p>
<p>今回もはんだっしゅ太郎大活躍でした。本当に買ってよかった。
LEDがつかないときはちょっと落ち込みましたが、これのおかげで立ち直れたのもありますし。
あとは、試行錯誤しつつLEDとかの理解ができたのも楽しかったです。
キーマップの変更時にLEDの変更などができるのに気づいたのはちょっと遅すぎたので、qmkの仕組みや割り当てられるキーにどんなものがあるのかをもう少し研究したいなと思います。</p>
<p>さて、次はどんなことを試すかなぁ。</p>
</content:encoded>
    </item>
    
    <item>
      <title>Corne Light v2を作成した #DIYキーボード</title>
      <link>https://blog.johtani.info/blog/2020/11/05/build-corne-light-v2/</link>
      <pubDate>Thu, 05 Nov 2020 00:25:27 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2020/11/05/build-corne-light-v2/</guid>
      <description>前回のブログのまとめに書いたように、セパレートタイプのキーボードであるCorne Light v2を作成したのでそのビルドログです。DIYキーボードとし</description>
      <content:encoded><p><a href="https://blog.johtani.info/blog/2020/10/11/build-dozen0/#%E3%81%BE%E3%81%A8%E3%82%81">前回のブログのまとめ</a>に書いたように、セパレートタイプのキーボードであるCorne Light v2を作成したのでそのビルドログです。DIYキーボードとしては2つ目になります。</p>
<p>まとめで書いていたお店が開店したので、購入してみました。
購入したのはこちらの<a href="https://kochikeyboard.stores.jp/">KOCHI KEYBOARDさん</a>です。
ついこの間オープンしたばっかりのお店です！</p>
<h2 id="なんで作ったの">なんで作ったの？</h2>
<p>スプリット型（セパレートタイプ？どっちが正しいんだろう？）のキーボードに興味があって、KOCHI KEYBOARDさんで買えたのがこれだったというのが大きな理由です。こういうのってタイミングだと思うので。
あとは、組み立てていくのがプラモデルみたいで面白いというのもあります。
基本的にここのところ自宅で仕事をしているので、ノートPCのキーボードにこだわる必要もないなというのも理由ですね。今後も当面は自宅で仕事になると思いますので。</p>
<h2 id="corne-light-v2">Corne Light v2</h2>
<p>foostanさんが設計された（って言い方であってるのかな？）、3x6のサイズに親指の3キーが配置された分離型のキーボードの一種です。
シリーズ？の名前としては<a href="https://github.com/foostan/crkbd">Corne Keyboard</a>と呼ばれています。
（そういえば、由来は何だろう？自作キーボードがどうやって設計されていくのかという流れがまとめられた<a href="https://fstn.hateblo.jp/entry/2018/12/20/070000">作者の方のブログ</a>がおもしろいです。）
また、基板の設計などがGitHub上でMITライセンスで公開されています。
オープンソースなハードウェアというのも面白いです。</p>
<h2 id="ビルドログ">ビルドログ</h2>
<p><a href="%22https://github.com/foostan/crkbd/blob/master/corne-light/doc/v2/buildguide_low_edition_jp.md%22">作者の方がビルドガイド</a>を公開してくれています。ですので、こちらに沿って作業をしていきます。
ちなみに、私は今回Gateronのクリア軸を選択してみました。さらさらと入力できるのが好きなので。
サイレント軸にも興味はあるのですが、今回は実際にスプリット型のキーボードを早く触ってみたいというのが勝ちました。キーキャップについては後述します。
ツイートに都度、写真をアップしていたので組み立ては画像でお楽しみください（時々取り忘れてるけどｗ）。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">うむ <a href="https://t.co/svW9WdzaZv">pic.twitter.com/svW9WdzaZv</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1318807312342032384?ref_src=twsrc%5Etfw">October 21, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">刺して曲げる <a href="https://t.co/M0jfQJg2k8">pic.twitter.com/M0jfQJg2k8</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1319288975740162049?ref_src=twsrc%5Etfw">October 22, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">両方できたと。ハンダまでやって今日はおしまいにすっか <a href="https://t.co/HgsSrxqpcg">pic.twitter.com/HgsSrxqpcg</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1319291510261596162?ref_src=twsrc%5Etfw">October 22, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">写真取り忘れたけど、ProMicroつけた <a href="https://t.co/RS4z0lqsUZ">pic.twitter.com/RS4z0lqsUZ</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1319310929826246656?ref_src=twsrc%5Etfw">October 22, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">OLEDもついたと。今日はここまで <a href="https://t.co/p6Z8MMP0Xz">pic.twitter.com/p6Z8MMP0Xz</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1319311317006577664?ref_src=twsrc%5Etfw">October 22, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>ここまでは順調です。</p>
<h3 id="oledがつかない">OLEDがつかない？</h3>
<p>ビルドガイドに従って、この後キースイッチをつけちゃうと問題の切り分けが難しくなるということで、
ここまでの段階でQMK Toolboxを使ってProMicroにファームウェアを書き込んで、それぞれのキーのソケットの取り付け部をピンセットでショートさせつつ、キーが入力されるかどうかを見ていきます。
<a href="https://salicylic-acid3.hatenablog.com/entry/qmk-toolbox">QMK Toolboxについてはサリチル酸さんのブログ</a>がわかりやすいので参考にさせていただきました（わかりやすい記事をありがとうございます）。
で、ビルドガイドにあるように動いてるかを確認しようとしたのですが。。。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">さて、ファームウェア書き込んだけど、OLEDがつかないな。どっかつながってないのか？</p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1319981722914623489?ref_src=twsrc%5Etfw">October 24, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>ビルドガイドのようにはいかず。。。
USBでPCとつないだ状態で、<a href="https://config.qmk.fm/#/test">QMK Configurator</a>をサイトで開いて、キーボード入力テストを開くと、ショートさせたキーがPC側で認識されているかのテストができます。
これで、一通りキーは認識できていそうだというのはピンセットでショートさせながら確認しました。
ただ、OLEDには何も表示されないんです。。。</p>
<p>前回Dozen0を組み立てた時に、ソケットのはんだ付けが甘かったというのもあったので、
OLEDやソケットのはんだを温めなおしたりしてみて、何度か確認してみたものの特に進展がなしです。
（ちなみにうまくいかないのもあって、<a href="https://twitter.com/johtani/status/1319996547577229313">ぼけたツイート</a>したりもしてます。）</p>
<p>まぁ、OLEDはビルドガイドを見てもオプション扱いなので、それよりも触ってみたい衝動に駆られて、
キースイッチをはんだ付けしていきます。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ちなみに昨晩、OLEDはとりあえず置いといてって感じでキースイッチつけてた。キーキャップはまだない <a href="https://t.co/SzLmzNg60Y">pic.twitter.com/SzLmzNg60Y</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1320558068212510720?ref_src=twsrc%5Etfw">October 26, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>それも終わって、問題点の切り分けに何かできないかな？と思ってやったのがOLED単体でArduinoと接続してみて動くかどうかです。
<a href="https://qiita.com/takahiro_itazuri/items/d7bc7331b196921b5880">Qiitaにちょうどいい感じの記事</a>を見つけたのでこれまた参考にさせていただきました(4本のジャンパー線を一人で持ちながら確認するの大変だったｗ)。</p>
<h4 id="はんだでの修正にしっぱい">はんだでの修正にしっぱい</h4>
<p>で、自分の中での結論として、「OLEDソケットのはんだ付けが怪しい」となりました。
そこで、まずは外してみようかと思ったのが間違いでした。
はんだごてとはんだ吸い取り線で何とか外せるだろうと思っちゃったんですよ。
OLEDピンソケットは足が4本あって、とりあえずとれるところまではんだ吸い取り線で吸い取ってみましたが、
さすがに基盤の穴に流れ込んだはんだまでは吸い取れず、頑張って温めながらソケットを抜こうとがんばって、
ラジオペンチでピンソケットを引っ張りながら引き抜きました。かろうじて引き抜きはできたのですが、ソケットは足が折れてしまいました。</p>
<h4 id="作者登場oled問題の解決">作者登場（OLED問題の解決）</h4>
<p>そんなところにCorneの作者の方がツイートを拾ってくれたみたいで以下のような返信を頂きました。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">OLEDが点かないのはファームのせいかもしれません(最近以前のファームで動かない新しいタイプのOLEDモジュールが出回るようになりました)。お手数ですが、<a href="https://t.co/vfSBfIeeJX">https://t.co/vfSBfIeeJX</a> のブランチのものを試して頂けますか？(ただいまPRレビュー中でまだマージされていない状態です)</p>&mdash; 🥖 (@foostan) <a href="https://twitter.com/foostan/status/1320410393328513024?ref_src=twsrc%5Etfw">October 25, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>暗闇に光明とはこのことです。
教えていただいたブランチを手元でビルドしてファームウェアを書き込むと、</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">すごい、出ました！右側のディスプレイにロゴが。ありがとうございます（左側のOLEDはソケットのはんだ付け直し失敗したのでもうちょっと先になりますが）！</p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1320549750156869632?ref_src=twsrc%5Etfw">October 26, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>なんと、ファームウェア書き込んだ瞬間にOLEDが点くじゃないですか。
感謝感激ってやつです。お礼を言うのに便乗して<a href="https://twitter.com/foostan/status/1320555771009011712">OLEDの問題の切り分けの方法についても聞いてしまいました</a>。</p>
<h4 id="oledリベンジ">OLEDリベンジ</h4>
<p>片側は無事だったのですが、もう一方は修復が困難になったので救世主を発注します。
自作キーボードの作成に便利なものリストとして、いくつかのブログに上がっていたのですが、必要ないだろうと見送っていたツールです。</p>


<div class="amazon-shortcode-box">
  <div class="amazon-shortcode-image">
    <a style="display: inline-block;" target="_blank" href="https://www.amazon.co.jp/gp/product/B01FEV2BPG/?tag=johtani-22">
      <img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B01FEV2BPG&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&tag=johtani-22" >
    </a>
  </div>
  <div class="amazon-shortcode-info">
    <p class="amazon-shortcode-title">
      <a target="_blank" href="https://www.amazon.co.jp/gp/product/B01FEV2BPG/?tag=johtani-22">
      Amazon | サンハヤト はんだシュッ太郎NEO 45Wタイプ HSK-300 | ハンダゴテパーツ
      </a>
    </p>
  </div>
</div>
<p>本当にすごく使いやすかったです。
OLEDのピンソケットが修復不可能だったのですが、ProMicro用に付属して余っているピンヘッダがちょうどいい長さでした。
なので、これを4本分切り取り、OLEDモジュールにつけてしまったOLEDヘッダピンを抜き取って、代わりに切り取ったピンヘッダをつかって、OLEDと基盤を直接はんだ付けすれば修復できそうだと判断しました。</p>
<p>はんだシュッ太郎君を使ってOLEDについてるヘッダピンをまずは除去。
そのあとはこんな感じで繋げました。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">見にくいかもだけど <a href="https://t.co/YAHoxjgppN">pic.twitter.com/YAHoxjgppN</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1324399704512192512?ref_src=twsrc%5Etfw">November 5, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>取り外しにくくはなったけど、無事両方のOLEDが点くのも確認できました。やったー。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ヤッター、両方のOLEDがついたよー <a href="https://t.co/6KLDWvnaEC">pic.twitter.com/6KLDWvnaEC</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1321475997141659648?ref_src=twsrc%5Etfw">October 28, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h3 id="キースイッチがご機嫌斜め">キースイッチがご機嫌斜め</h3>
<p>キーキャップは別途、AliExpressで発注をかけたのですが、ここまで来たら待ちきれないですよね？
ということで、手元にあった上海問屋のキーボードのキーキャップが同じMXキースイッチ用のものだったので移植しました。キーキャップ付けてみないとわかならいものですね、1つだけキースイッチがうまくはまっておらず、斜めについているのがこの時点で判明しました（ボトムプレート付けた後だったので、プレート外してから、はんだで修正）。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ちなみにキーキャップはめてる途中で、一箇所キースイッチが斜めにはんだ付けされちゃってるのを発見して慌てて直しました。 <a href="https://t.co/qofHp3o4Pc">pic.twitter.com/qofHp3o4Pc</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1322083647332085760?ref_src=twsrc%5Etfw">October 30, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>無事使えるようになりました。</p>
<h3 id="アンスコが打てないescどこ">アンスコが打てない＆Escどこ？</h3>
<p>キーキャップ付けたので仮運用ということで、まずはデフォルトのキーマップをもとにどんな感じで入力できるのかを試してみました。
ここにも罠がｗ
ブラウザで<a href="https://config.qmk.fm/#/crkbd/rev1/legacy/LAYOUT_split_3x6_3">QMK Configurator</a>を開いてデフォルトのキーマップを確認しながら試し打ちをしていたのですが、どうも思ったのと違う動きをしているキーが。</p>
<p>まずBASEレイヤー（レイヤー0）の右側のシフトと、LOWERレイヤーやRAISEレイヤーのEscです。
入力しているとどうも、右のシフトがEscで、レイヤーを切り替えてもTabのままだなと。
しょうがないので、OLEDが出なくてもいいのでQMK Toolboxでダウンロードしてきたものを利用したら想定通りなのにと。
きちんとqmk_firmwareの構成を理解しないままやってたつけでしたね。
結論としては、OLED用に教えてもらったブランチではキーマップが書き換わっていたようでした。
<code>make crkbd:defaut</code>でビルドした時に利用されるkeymap.cがキーマップの定義が書いてあるファイルです。
qmk/qmk_firmwareのリポジトリにあるkeymap.cとfoostanさんにもらったブランチでは差分があったみたいでした。</p>
<p>おかげで、qmk_firmwareのkeymap.cの仕組みがわかったし結果オーライです。
問題があって調べるとどんな作りになってるかとかちゃんと確認できますしね。
手順通りにやってるだけで問題が起きないと、どんな仕組みになってるのかがわからないので人に聞きまくるしかできなくなっちゃいますしね。</p>
<p>これでEsc問題は解決したのですが、アンスコがどうしても入力できません。
自作キーボード以外はすべて日本語配列のキーボードを使用しているのもあり、
日本語配列のキーボードだとどうもキーのマッピングが異なるようだと。</p>
<p>ググって参考にしたのはこの辺でした。</p>
<ul>
<li><a href="https://skyhigh-works.hatenablog.com/entry/2018/11/14/033242">【QMK】JPキーコードでキーマップを定義する - 天高工房</a></li>
<li><a href="https://salicylic-acid3.hatenablog.com/entry/2018/11/26/%E8%87%AA%E4%BD%9C%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%82%AD%E3%83%83%E3%83%88%E3%80%8CCorne_Cherry%E3%80%8D%E3%81%AE%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC#USB%E3%81%AE%E5%8F%B3%E5%87%BA%E3%81%97">自作キーボードキット「Corne Cherry」のレビュー - 自作キーボード温泉街の歩き方</a></li>
</ul>
<p>そのほかにもVIAのファームなども試したのですが、どれもうまくいかず。
色々ググってみて最終的な解決策はkeymap.cでkeymap_jp.hというファイルが読み込まれていないので、日本語用の設定とかを読み込んでみたつもりがうまく反映されていないという感じでした。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">JISにする場合、keymap_jp.hっていうヘッダファイル読み込んだほうがいいです</p>&mdash; Yoshi Yamaguchi ⌨ Keyboard builder (@ymotongpoo) <a href="https://twitter.com/ymotongpoo/status/1323456582152171522?ref_src=twsrc%5Etfw">November 3, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>今の時点ではこんなキーマップにしてあります。
今後も日本語配列のキーボードをベースに考えていくつもりです。</p>
<pre><code>
#include QMK_KEYBOARD_H
#include &quot;keymap_jp.h&quot;

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [0] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
       KC_TAB,    KC_Q,    KC_W,    KC_E,    KC_R,    KC_T,                         KC_Y,    KC_U,    KC_I,    KC_O,   KC_P,  JP_MINS,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LCTL,    KC_A,    KC_S,    KC_D,    KC_F,    KC_G,                         KC_H,    KC_J,    KC_K,    KC_L, JP_SCLN, KC_QUOT,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LSFT,    KC_Z,    KC_X,    KC_C,    KC_V,    KC_B,                         KC_N,    KC_M, KC_COMM,  KC_DOT, KC_SLSH, KC_RSFT,
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI,   MO(1),  KC_SPC,     KC_ENT,   MO(2), KC_RALT
                                      //`--------------------------'  `--------------------------'

  ),

  [1] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
       KC_ESC,    KC_1,    KC_2,    KC_3,    KC_4,    KC_5,                         KC_6,    KC_7,    KC_8,    KC_9,    KC_0, KC_BSPC,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LCTL, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      KC_LEFT, KC_DOWN,   KC_UP,KC_RIGHT, XXXXXXX, XXXXXXX,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LSFT, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI, _______,  KC_SPC,     KC_ENT,   MO(3), KC_RALT\
                                      //`--------------------------'  `--------------------------'
  ),

  [2] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
       KC_TAB, JP_EXLM, JP_DQUO, JP_HASH,  JP_DLR, JP_PERC,                      JP_AMPR, JP_QUOT, JP_LPRN, JP_RPRN, JP_CIRC, KC_BSPC,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LCTL, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      JP_MINS,  JP_EQL, JP_LBRC, JP_RBRC,  JP_YEN,   JP_AT,
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      KC_LSFT, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      JP_UNDS, JP_PLUS, JP_LCBR, JP_RCBR, JP_PIPE, JP_TILD,
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI,   MO(3),  KC_SPC,     KC_ENT, _______, KC_RALT
                                      //`--------------------------'  `--------------------------'
  ),

  [3] = LAYOUT_split_3x6_3( \
  //,-----------------------------------------------------.                    ,-----------------------------------------------------.
        RESET, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                      XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,\
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      RGB_TOG, RGB_HUI, RGB_SAI, RGB_VAI, XXXXXXX, XXXXXXX,                      XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,\
  //|--------+--------+--------+--------+--------+--------|                    |--------+--------+--------+--------+--------+--------|
      RGB_MOD, RGB_HUD, RGB_SAD, RGB_VAD, XXXXXXX, XXXXXXX,                      XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,\
  //|--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------|
                                          KC_LGUI, _______,  KC_SPC,     KC_ENT, _______, KC_RALT\
                                      //`--------------------------'  `--------------------------'
  )
};
</code></pre><h3 id="キーキャップが待ちきれなくて">キーキャップが待ちきれなくて</h3>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">この右下のトンガリがちょっと気になる <a href="https://t.co/W0A0z67cns">pic.twitter.com/W0A0z67cns</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1322092102637948928?ref_src=twsrc%5Etfw">October 30, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>キーキャップが待ちきれなくて上海問屋のキーキャップを付けてみて、いろいろ試行錯誤してみました。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">あー。上下関係ないのか。だからみんなこんな感じにしてるのか？ <a href="https://t.co/KTBlPLespr">pic.twitter.com/KTBlPLespr</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1322180553529937921?ref_src=twsrc%5Etfw">October 30, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">どのくらい離すのが良いか実験中 <a href="https://t.co/ozK4WyBXY8">pic.twitter.com/ozK4WyBXY8</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1323161306266963969?ref_src=twsrc%5Etfw">November 2, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h3 id="キーキャップもいろいろあるのね">キーキャップもいろいろあるのね</h3>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">届いた。 <a href="https://t.co/jccNW1ZcEM">pic.twitter.com/jccNW1ZcEM</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1323194081036546048?ref_src=twsrc%5Etfw">November 2, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">もう一個 <a href="https://t.co/9y6qat4JiN">pic.twitter.com/9y6qat4JiN</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1323194549196390400?ref_src=twsrc%5Etfw">November 2, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">とりあえずセミコロンの位置につけてみた。 <a href="https://t.co/TDk5213IHi">pic.twitter.com/TDk5213IHi</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1323473987213565953?ref_src=twsrc%5Etfw">November 3, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>今はこのDSAプロファイルの青いグラデーションのキーキャップを使っています（Dukeはここにはいないですｗ）。
キーキャップのプロファイルはこれまた、<a href="https://salicylic-acid3.hatenablog.com/entry/2018/12/06/%E3%82%AD%E3%83%BC%E3%82%AD%E3%83%A3%E3%83%83%E3%83%97%E3%81%AE%E6%B9%AF%E3%81%AE%E3%81%8A%E8%AA%98%E3%81%84">サリチル酸さんのブログ</a>がわかりやすく書かれています（ほんとすごいなぁ。）。</p>
<h3 id="高さ調節">高さ調節</h3>
<p>そのまま使っていたのですが、やはりもうちょっと奥側に高さがほしいなと。
ダイソーなどで打っているケーブルクリップがお試しには良さそうだったのでこんな感じで内側がちょっとだけ高くなるような感じにして使っています。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">こうなった。とりあえず仮運用 <a href="https://t.co/VkhjawdhLM">pic.twitter.com/VkhjawdhLM</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1323999827810684931?ref_src=twsrc%5Etfw">November 4, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="まとめ">まとめ</h2>
<p>ということで、駆け足ですがCorne Light v2のビルドログでした。
いきなりフルキーボードから40％キーボードかつ異なる並びにしたので、
混乱しっぱなしですが、いい頭の運動になっているし、なにより作って動かすまでの間に
いろいろと調べたり試行錯誤できたのがすごく楽しかったです。</p>
<p>あとは、スプリット型＋Column Staggeredになったので「c」や「b」を間違えまくっていますが、
いい気付きでした。まだまだ記号とかの入力に慣れていないですが、ちょっとずつ身に着けていけたらなと。</p>
<p>ただ、もう次のキーボードをDIYしたい気持ちも出てきているので困っているところです。</p>
<p>書ききれてないこともあるかと思うので、ここはどうしてるの？これはどうやったの？などあれば、Tweetなりコメントなりを頂けたらなと思います。いやぁ、DIYキーボード楽しいわ。</p>
</content:encoded>
    </item>
    
    <item>
      <title>Dozen0を作成した #DIYキーボード</title>
      <link>https://blog.johtani.info/blog/2020/10/11/build-dozen0/</link>
      <pubDate>Sun, 11 Oct 2020 23:53:26 +0900</pubDate>
      
      <guid>https://blog.johtani.info/blog/2020/10/11/build-dozen0/</guid>
      <description>今年の春くらいから、セパレートタイプのキーボードが気になっています。 また、なんか知らないですが、Twitterのタイムラインが自作キーボード</description>
      <content:encoded><p>今年の春くらいから、セパレートタイプのキーボードが気になっています。
また、なんか知らないですが、Twitterのタイムラインが自作キーボード(DIYキーボード)で盛り上がってる気がします。
(たぶん、気になってるから余計目についてる)。
これとか。このスライドから、自分がやってるのは「まだ」DIYキーボードだなということで、タイトルに使ってみました。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr"><a href="https://twitter.com/hashtag/toruby?src=hash&amp;ref_src=twsrc%5Etfw">#toruby</a> &quot;DIYキーボードは実質Ruby&quot; 本日のスライドです! とちぎでこの話をできてよかった!!!q: <a href="https://t.co/RJot71Ngu9">https://t.co/RJot71Ngu9</a></p>&mdash; Kakutani Shintaro (@kakutani) <a href="https://twitter.com/kakutani/status/1304655402378752001?ref_src=twsrc%5Etfw">September 12, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="セパレートタイプのキーボード">セパレートタイプのキーボード</h2>
<p>今年の夏まではMac Book Pro 16インチのキーボードを利用していました(<a href="https://blog.johtani.info/blog/2020/03/26/working-facility/">参考:自宅の作業環境(2020)</a>)。
これまで、自宅で作業することよりも、外で仕事をすることが多く、また、外といっても様々な場所(サムライズムだったり、オフィスだったり、カフェだったり)で作業をすることが多かったので、ノートPCのキーボードにしていました。流石にキーボードを持って歩くほどは気にしていなかったので。</p>
<p>ただ、コロナウイルスの影響もあり、ほぼ自宅で作業することとなりました。
となると、前から気になっていたセパレートタイプのキーボードが俄然気になり始めます。
(といいつつ、<a href="https://blog.johtani.info/blog/2020/09/08/update-working-facility/#%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E3%83%91%E3%83%BC%E3%83%A0%E3%83%AC%E3%82%B9%E3%83%88">寄り道してたり</a>しますが)</p>
<p>気になっていたのはこのあたりなのですが、</p>
<ul>
<li><a href="https://ergodox-ez.com/">Ergodox EZ</a></li>
<li><a href="https://www.zsa.io/moonlander/">Moonlander Mark I</a></li>
</ul>
<p>流石にいきなり行くにはちょっと気が引けるなぁと(なかなかいいお値段)。
また、自分が日本語キーボードを利用しているというのもちょっとあります。</p>
<h2 id="キースイッチの感触を知りたくて">キースイッチの感触を知りたくて</h2>
<p>ただ、日々、楽しそうな自作キーボードの記事や画像が流れてきます。
で、思い出したのが自分の趣味。プラモデルです。色を塗ったりはしないですが、組み立てるのは楽しいなと。
じゃあ、趣味と実益を兼ねればいいのでは?(ほんとか?)となり、作る気になってきました。</p>
<p>ただ、全く知らない世界だし、どんなものなんだろう?と。
市販のキーボードでも、キーの押し具合が色々合ったり、形もまちまちです。
また、このご時世ですので、自宅からあまり出ていないので遊舎工房さんなどに遊びにも行けず。</p>
<p>そんなところに流れてきたのがキースイッチのテスターでした(世の中誘惑だらけ)。</p>
<ul>
<li><a href="https://yushakobo.jp/shop/b0200st-f2-1/">スイッチテスター人気スイッチ詰め合わせ 18個セット</a></li>
</ul>
<p>「なるほど、これでどんな感触かわかるじゃないか!」と、気づけばポチッと押していました。。。
届いて、「ふむふむ、これがこういう感触なのか。なるほど」ポチポチ押しながら、さらに自作キーボードについて調べていきます。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">いろんな感触なんだなぁ <a href="https://t.co/PaGDMIRJiv">pic.twitter.com/PaGDMIRJiv</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1308289480458084353?ref_src=twsrc%5Etfw">September 22, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="キースイッチのストロークの深さを知りたくて">キースイッチのストロークの深さを知りたくて</h2>
<p>まぁ、当たり前なのですが、先程のキースイッチテスターどこにもつながっていません。
キーボード触ってるとわかりますが、ストロークが違いがあるんですよ。
ただ、これだとわからない。けど知りたい。</p>
<p>で、ググっていると<a href="https://qiita.com/kamaboko123/items/c32ad91434ffc7f4ff8d">Arduinoを使ってLチカやってる人とか、キー入力させている人</a>がいるじゃないですか。
これでは?そういえば、Arduinoもどきうちにもあるぞ?と。
で、準備をしていたときに見かけてしまったのがこのツイートでした。。。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr"><a href="https://t.co/ALl7OcRVRa">https://t.co/ALl7OcRVRa</a> 高機能テスターとしてもおすすめ</p>&mdash; Kakutani Shintaro (@kakutani) <a href="https://twitter.com/kakutani/status/1312749674214744064?ref_src=twsrc%5Etfw">October 4, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p><strong>やられてしまいました。。。</strong></p>
<h2 id="dozen0作りました">dozen0作りました</h2>
<p>ということで、前置き長かったですが、Dozen0というキーボード(マクロパッド?)を<a href="https://yushakobo.jp/shop/dozen0/">遊舎工房さんから購入して</a>作ってみました。
手順は<a href="https://github.com/yynmt/Dozen0/blob/master/docs/buildguide_jp.md">ビルドガイド</a>という形でまとまっています。</p>
<p>基本的にはこれに沿って作成しました。</p>
<h3 id="パーツと手順の確認">パーツと手順の確認</h3>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">さてと。 <a href="https://t.co/GTBJ7zDleN">pic.twitter.com/GTBJ7zDleN</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1314798164919029765?ref_src=twsrc%5Etfw">October 10, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>まずは入っているパーツがきちんとあるか確認します。
また、ビルドガイドでどんな作業があるのかをざっと眺めておきます。
まぁ、プラモデルといっしょですよね。</p>
<p>キットにはキースイッチとキーキャップは含まれていません。これはご注意ください。
私は、キースイッチテスターとして入手していたキースイッチとキーキャップがどんな押し具合なのかを確認したかったので特に問題ありません。</p>
<h3 id="ハンダづけ">ハンダづけ</h3>
<p>

<div class="amazon-shortcode-box">
  <div class="amazon-shortcode-image">
    <a style="display: inline-block;" target="_blank" href="https://www.amazon.co.jp/gp/product/B006MQD7M4/?tag=johtani-22">
      <img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B006MQD7M4&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&tag=johtani-22" >
    </a>
  </div>
  <div class="amazon-shortcode-info">
    <p class="amazon-shortcode-title">
      <a target="_blank" href="https://www.amazon.co.jp/gp/product/B006MQD7M4/?tag=johtani-22">
      Amazon | 白光 ダイヤル式温度制御はんだこて FX600 | ハンダゴテ
      </a>
    </p>
  </div>
</div>


<div class="amazon-shortcode-box">
  <div class="amazon-shortcode-image">
    <a style="display: inline-block;" target="_blank" href="https://www.amazon.co.jp/gp/product/B004OR7UBM/?tag=johtani-22">
      <img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B004OR7UBM&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&tag=johtani-22" >
    </a>
  </div>
  <div class="amazon-shortcode-info">
    <p class="amazon-shortcode-title">
      <a target="_blank" href="https://www.amazon.co.jp/gp/product/B004OR7UBM/?tag=johtani-22">
      Amazon | 白光 こて先 2C型 T18-C2 | ハンダゴテパーツ
      </a>
    </p>
  </div>
</div>


<div class="amazon-shortcode-box">
  <div class="amazon-shortcode-image">
    <a style="display: inline-block;" target="_blank" href="https://www.amazon.co.jp/gp/product/B017SQ0TUO/?tag=johtani-22">
      <img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B017SQ0TUO&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&tag=johtani-22" >
    </a>
  </div>
  <div class="amazon-shortcode-info">
    <p class="amazon-shortcode-title">
      <a target="_blank" href="https://www.amazon.co.jp/gp/product/B017SQ0TUO/?tag=johtani-22">
      Amazon | 白光(HAKKO) セラミックヒーターはんだこて専用こて台 クリーニングスポンジ付き FH300-81 | ハンダゴテパーツ
      </a>
    </p>
  </div>
</div>


<div class="amazon-shortcode-box">
  <div class="amazon-shortcode-image">
    <a style="display: inline-block;" target="_blank" href="https://www.amazon.co.jp/gp/product/B0029LGAJI/?tag=johtani-22">
      <img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=B0029LGAJI&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL160_&tag=johtani-22" >
    </a>
  </div>
  <div class="amazon-shortcode-info">
    <p class="amazon-shortcode-title">
      <a target="_blank" href="https://www.amazon.co.jp/gp/product/B0029LGAJI/?tag=johtani-22">
      Amazon | goot(グット) 高密度集積基板用 鉛入りはんだ Φ0.6mm スズ60%/鉛40% ヤニ入り SD-60 | ハンダゴテ
      </a>
    </p>
  </div>
</div></p>
<p>はんだ付け用に揃えた道具です。「自作キーボード ハンダゴテ」とかでググると出てきたものがこれだったので。
デフォルトのコテ先ではなく、2Cのコテ先に付け替えてから作業を開始しました。</p>
<p>私の持っていたソケットはCherry MX系なのですが、気が向いたらKailh Chocも試したくなるかも?ということで、
すべてはんだ付けしました。本格的にはんだ付けしたのは大学以来だからもう20年近く経ってますね。
ソケットの足をプリント基板にはんだ付けするのですが、2Cのコテ先が大きくなかなか手こずりました(<em>これがこのあと問題を引き起こしました</em>)。</p>
<p>ソケット、リセットスイッチ、ProMicroをはんだ付けすればはんだの作業は終了です。</p>
<p><blockquote class="twitter-tweet"><p lang="und" dir="ltr"><a href="https://t.co/jjUo162n54">pic.twitter.com/jjUo162n54</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1314810257873399810?ref_src=twsrc%5Etfw">October 10, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="und" dir="ltr"><a href="https://t.co/p5atvtHfFN">pic.twitter.com/p5atvtHfFN</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1314810285002088448?ref_src=twsrc%5Etfw">October 10, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</p>
<h3 id="スイッチの取付と組みたて">スイッチの取付と組みたて</h3>
<p>試したいキースイッチを選んでトッププレートにつけていきます。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">キーテスターからスイッチとキーキャップ持ってきて完成。動作確認はまだなのでまた、最初に戻るかもだけど、、、 <a href="https://t.co/ZmBd3bgOKI">pic.twitter.com/ZmBd3bgOKI</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1314822558865264641?ref_src=twsrc%5Etfw">October 10, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>組み立ても終わり次は実際の動作確認です(ツイートしていますが、予想通りの展開でした)。</p>
<h3 id="ファームウェアの書き込み">ファームウェアの書き込み</h3>
<p>USBで接続して、ファームウェアの書き込みです。
書き込み手順は<a href="https://github.com/yynmt/Dozen0/blob/master/docs/buildguide_jp.md#6-%E3%83%95%E3%82%A1%E3%83%BC%E3%83%A0%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%AE%E6%9B%B8%E3%81%8D%E8%BE%BC%E3%81%BF">ビルドガイド</a>にありますが、QMK Toolboxの使い方やQMK Configuratorの使い方は以下の<a href="https://salicylic-acid3.hatenablog.com/">サリチル酸さんのブログ</a>がわかりやすかったです。</p>
<ul>
<li><a href="https://salicylic-acid3.hatenablog.com/entry/qmk-toolbox">（初心者編）自作キーボードにファームウェアを書き込む</a></li>
<li><a href="https://salicylic-acid3.hatenablog.com/entry/qmk-configurator">（初心者編）QMK Configuratorを使ってキーマップを書き換えよう</a></li>
</ul>
<p>実際に書き込んで動かしてみると。。。。</p>
<p><blockquote class="twitter-tweet"><p lang="ja" dir="ltr">うーん、上半分が死んでる気がするなぁ。<br>デフォルトキーマップの書き込みはできたけど、カーソルの上とかバックスペースが入らないw</p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1314844321674190848?ref_src=twsrc%5Etfw">October 10, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">とりあえず、もう一回確認してみた。デフォルトのキーマップで、「Cut」「Paste」が強く押さないと入力されない。UpとDeleteは動くようになってた。CopyとBkSpがうんともすんとも言わない。下段のキーは全部動く。<a href="https://t.co/zEyINdAK6t">https://t.co/zEyINdAK6t</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1314916612168794112?ref_src=twsrc%5Etfw">October 10, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</p>
<p>といった具合に上半分が動作があやしいです。</p>
<h3 id="再度はんだ付け">再度、はんだ付け</h3>
<p>ということで、ネジを外して上の段のソケットをはんだで温めてみると、片側だけ温めるとはずれるじゃないですか。
どうやら、うまくソケットの足が基盤にはんだ付けできていなかったようです。
この時、最初に作業したときに2C型のコテ先が大きくて、ソケットの足に入らなかったのを思い出したので、
最初にはんだごてについていたコテ先に戻してから作業をしました。
これだとソケットの足の隙間に入るんです。ということで、挙動のおかしい上段のソケットをすべてつけ直したところ無事動作しました。</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">上の段、全体的にソケットがうまくはんだ付けできてなかったみたいだった。今回はMX系のスイッチしかないので、Kailh Chocのソケットの導通は未確認。ざっとブログにまとめるか。</p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1314927893680594944?ref_src=twsrc%5Etfw">October 10, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h3 id="現在のキーマップ">現在のキーマップ</h3>

<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box" style="max-width:600">
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/entries/20201011/dozen0_music_play.png" />
    </div>
    <a href="/images/entries/20201011/dozen0_music_play.png" itemprop="contentUrl"></a>
  </figure>
</div>

<p>これが今のキーマップです。仕事中のBGMをラズパイ4の音楽プレーヤーで流していますが、
部屋から出るときや、打ち合わせがあるときに音楽の停止、開始などを画面共有経由でやっています。
が、わざわざマウス移動するのもめんどくさいなと。これに使えそうだというのもあったので、Dozen0を購入したというのがあります。
残念ながら、<code>Prev Track</code>とかがうまく動かないので、ショートカットを調べてキーマップ書き換える予定ですが、非常に便利になりました。</p>
<h2 id="まとめ">まとめ</h2>
<p>ということで、Dozen0を作ってみましたが、楽しかったです。すんなりと行かなかったのがまた良かったです。
試行錯誤して動いたときの喜びが何倍もありました。また、キースイッチの感触も知ることができました。
たぶんGateron Silentクリア軸もしくは赤軸くらいが良さそうだなぁと(こうやって沼へ。。。)。
キーマップの仕組みを調べたり、もっと面白い使い方できないかな?と探りつつ、次のステップに進もうかなと。</p>
<p>次は本格的なセパレートタイプのキーボードを作る予定です。が、お店のオープンを待ってからということになってます。はやくオープンしないかなぁ!!</p>
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">がんばって!!</p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1310887394879496193?ref_src=twsrc%5Etfw">September 29, 2020</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

</content:encoded>
    </item>
    
  </channel>
</rss>
