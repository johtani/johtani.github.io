<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[@johtaniの日記 2nd]]></title>
  <link href="http://blog.johtani.info/atom.xml" rel="self"/>
  <link href="http://blog.johtani.info/"/>
  <updated>2018-12-31T23:30:08+09:00</updated>
  <id>http://blog.johtani.info/</id>
  <author>
    <name><![CDATA[johtani]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[今年の振り返りと来年の抱負（2018）]]></title>
    <link href="http://blog.johtani.info/blog/2018/12/31/looking-back-2018/"/>
    <updated>2018-12-31T16:14:45+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/12/31/looking-back-2018</id>
    <content type="html"><![CDATA[<p>今年も振り返りブログをかけてます。よかったw</p>

<!-- more -->


<h2>振り返り（2017年に書いた抱負から）</h2>

<p>まずは去年の抱負を元に。</p>

<h5>もっと英語の継続＆TOEIC</h5>

<p>まぁ、継続してます。英会話も続けてますし、海外TVドラマや映画見てます。
ただ、昨年書いたTOEICはイベントが被りまくってて受けれてないです。。。
来年は受けれればいいが。
ちなみに見たドラマはこの辺。あんまり見てないなぁ。
「はじまりのうた」は飛行機の中で見たんですが、よかったです。
最近は音楽系の映画が好きなのかなぁ。グレーテストマンショー（ミュージカル風）とかもハマったし。</p>

<ul>
<li>Game of Thrones</li>
<li>はじまりのうた BEGIN AGAIN (映画)</li>
<li>24 シーズン4まで</li>
</ul>


<p>今は、ボキャブラリのなさに苦しんでる感じです。キクタンとかするべきなのかもなぁ。
基本勉強が下手だからなー。</p>

<h5>継続的にイベントに登壇 ＆ CfPもっと出すぞ！</h5>

<p>OSCには出てました。あとは、いくつかに呼ばれて出たりでしょうか。
CfPはJJUGしか出せてない気がするんで、もっと出さないとですね。。。
春のJJUGでは20分で短すぎた「オープンソースとビジネスモデル」の話（同僚のネタ）が
今年面白かった内容かなぁと。
もっと話を作るのをうまくしないとだろうなぁ。
ユースケースが増えてるんで、もっといろんなところに出ていかないとなぁと。
ブースの出し方とかもちょっと考えないといけないかもなーと思ってたり。
マンネリになってきてる気がするんで、なんか取り入れないとなぁ。</p>

<h5>もっとブログ！</h5>

<p>出だしはよかったんですが、途中でRustネタのブログも止まってしまいましたね。。。
業務が忙しくなったのを言い訳にして時間が取れなくなってるんで、
もっと習慣つけないとなぁ。</p>

<h5>雑誌やWeb系雑誌で記事を。</h5>

<p>できてないです。。。どうすっかなぁ。
重い腰上げないのが問題なんですけどね。。。
自社のウェビナーとかはそこそこやってましたが。</p>

<h5>コミュニティを別の方法で盛り上げ</h5>

<p>フォーラムは皆さんのおかげで盛り上がってきてる気がしてます。
別の方法ではなく、勉強会を9月から毎月開催にして、ユースケースごとに切り替えてみました。
あとは、<a href="http://bit.ly/SpeakerElasticTokyoMeetup">スピーカー登録用のフォーム</a>の用意とかして、継続的に楽にスピーカーの人たちが見つけられるようにと。
私は「全然」関わってないんですが、技術書典でいろんな方に書籍を書いていただきました。
また、<a href="https://elasticlover.hatenablog.jp/archive">Elasticlover</a>という毎週いろんな記事をまとめていただけ助かりました。
少しでも感謝をということで、コミュニティランチというイベントで、フォーラムで回答していただいてる方や、書籍を出していただいた方を招いてCEOのShayとランチするというイベントもやってみました。
少しは盛り上げられたかなぁ。
次は、ハッカソンみたいなのとかやってみるのもありなのかなぁ？（サポートしきれない気がするんだよなぁ）</p>

<h5>Elasticsearchなど検索系の開発にも参加</h5>

<p>開発。。。
Analyzer向けの<a href="https://github.com/johtani/analyze-api-ui-plugin">Kibanaのプラグイン</a>の開発は継続してますが、あんまり開発してないですねぇ（<a href="https://github.com/johtani">GitHubの草</a>をみながら)。
ちょっとしたPRはやったりしてますが、もっとやりたい。。。
とりあえず、来年しょっぱなは、検索系じゃないですが、KibanaのプラグインのReact化をやらないとなぁと。</p>

<h2>振り返り(今年あったできごと)</h2>

<p>さて、反省が多かったですが、ここからは今年の出来事を。</p>

<ul>
<li>初スノーシュー in US</li>
<li>オフィス引越し</li>
<li>パリで料理w</li>
<li>K8sとde:code</li>
<li>QNAPとか</li>
<li>IPO!</li>
<li>初のオンライン登壇</li>
<li>初アイルランド!</li>
<li>Pixel3 XL</li>
</ul>


<p>今年も初モノがちらほら。</p>

<p>アメリカでスノーシューやりました。昨年は釣りでしたが、今年はスノーシューでした。
スノーシューはすごくよかったんですが、サンフランシスコから社内ミーティングのある場所までの
移動に10時間バスに缶詰という変な初モノもありました。。。
スノーリゾートのある山の上にバスで移動だったんですが、前日までの天候の生でチェーン規制が出てしまい、登りかけた山を降りて、違う経路で登り直すという長旅でした。。。
途中からずっとゲームオブスローンズみてました。。。</p>

<p>オフィスが引っ越しました。人数が増えてきたのもあり、銀座のWeWorkに引っ越しました（私はあんまり行かなかったりしますがw）。
ただ、すでに手狭になってきて、来年はまた引っ越してるかもなぁ。
今年の終わりで日本のメンバーが22名に増えました！すごい！4年半前の22倍！</p>

<p>パリで料理もしましたwセールスのキックオフミーティングがパリで開催され、なぜか参加してきました。
そこで、DevRelチームのミーティング＆ディナーがあったんですが、ディナーがアクティビティ付きで、チームのみんなとパリで料理やカクテル作ってきました。
まさか、パリで手巻き寿司作るとは思わなかった（怖くて食べてないですw）</p>

<p>今年はイベントが連続することが多かったです。パリから帰ってすぐに<a href="https://thinkit.co.jp/article/13087">de:codeでMSの川崎さんと登壇</a>したりしました。Kubernetesを触る機会ができたんでよかったですが、時差ボケは辛かったw今年は他にもカンファレンス直後にトレーニングだったりと、夏に喉やられちゃいました。喉に負担をかけない話し方の練習すべきなんだろうなぁ。</p>

<p>自宅の環境もちょっと整えました。10年前から使ってた、TeraStationを<a href="https://amzn.to/2QZFxPe">QNAPに刷新</a>。快適に検索できるわ、クラウドにバックアップとれるわで、すごく快適です。
あとは、自室のディスプレイをディスプレイアームにつけたり、壊れたモニタースピーカーを<a href="https://amzn.to/2EX5qsB">Yamahaのパワードスピーカー</a>に買い替えたりと。
ちょこちょこ自宅で作業したりするんで、快適です。</p>

<p>今年はめでたいことに会社がIPOしました。<a href="https://www.elastic.co/blog/ze-bell-has-rung-thank-you-users-customers-and-partners">ニューヨーク証券取引所で株式公開しました</a>。
転職して4年、初体験なんで何がどうってのはいまいち実感わかないんですが、順調にきてるのは嬉しい限りです。今後も頑張りますよ！</p>

<p>自社のウェビナーでは、オンライン登壇してたんですが、<a href="https://wp.infra-workshop.tech/event/elastic-stack-%E5%85%A5%E9%96%80/">インフラ勉強会でオンライン登壇</a>させていただきました。
Elastic Stackの入門的な話をさせていただいたので、興味があればみていただければと。
こういうのにはマイクが非常に重要だなというのが結論です。ウェビナーで使ってる<a href="https://amzn.to/2EZvvHo">Shureのマイク</a>で話したので聞き取りやすかったです。
来年はもっと手軽にちょっとしたウェビナーとかポッドキャストやろうかな、ということで、持ち運び用に<a href="https://amzn.to/2EZs6sm">SAM SONGo Mic</a>を購入してみたのでどっかで試してみたいなー。</p>

<p>アイルランド（ダブリン）にも行きました。これまた、社内のミーティングなんですけどね。半年に1度エンジニアが集まる社内イベントがあるので、いろんなところに旅をさせてもらっていて、すごく楽しいです。
みんなにも会えるし。ただ、アイルランドの英語はきつかった。。。</p>

<p>最後はPixel3です。SonyのXperiaをここ数年は使ってたんですが、電池の持ちなどが悪くなったんで、気になってたPixel3に変えました。すごくいい。いらないものが入ってないのもいい。あと<a href="https://twitter.com/johtani/status/1073185795870085120">カメラがすごくいい</a>。他の機能をまだちゃんと調べてないんで、誰か便利機能知ってたら教えてくださいw</p>

<p>とまぁ、こんな感じでした。</p>

<h2>来年の抱負</h2>

<p>最後は来年の抱負を。</p>

<ul>
<li>TOEIC</li>
<li>CfP見つけて応募 &amp; いろんな場所に顔を出す</li>
<li>もっとブログ！</li>
<li>Rustの継続</li>
<li>開発の継続</li>
<li>日本でエンジニア獲得!</li>
</ul>


<p>まぁ、英語ですね。これは地道にやるしかないんだろうなと思いつつ、コツコツが苦手でw
とりあえず、今年はどこかでTOEIC受けないとな。</p>

<p>いつも行かないけど、弊社プロダクトに関係のあるカンファレンスのCfPを見つけ出して、
応募しまくって、少しでもしゃべらないとなぁ。喋れなくても、Elasticsearchがらみで登壇していただいてる方がいるカンファレンスには顔を出していきたいなぁと。
登壇される方いたら、ぜひ連絡ください！あとは、CfPのサイトを探す仕組みを作らないとなぁ。
検索サイト作るかなぁ。
あとは、カンファレンスではなく、いろんな会社に遊びにいきたいと思ってます。
入門的な話をしてほしいような方、こんな使い方してますっていう話をしていただける方、大募集です。
これもGoogle Formでも作ってみるか。</p>

<p>ブログなぁ。<a href="https://amzn.to/2EZhzwf">小さな習慣</a>を読んだのに、習慣化できてないので、なんとかしないとという意味で。。。が、頑張ります。。。</p>

<p>Rustの継続＆開発の継続もですね。Java歴が長いので、他の言語を勉強しようと思ってRustやってますがなかなか身についてないというか、時間を取れてない。これもコツコツやらないとなー
検索関連の開発もちょっとずつやりたいなと思ってるんで、<a href="https://github.com/DmitryKey/luke/issues/134">LukeへContribute</a>しようかな。</p>

<p>切実なんですが、日本に弊社のエンジニアを増やしたいなと。特に人前で喋ってもらえる人が増えると助かるんです。弊社最近、ユースケースが増えてきてて、追いつかなくてwダレカタスケテーw</p>

<p>さーて、そろそろ紅白のサザンが始まるんで終わりです。</p>

<p>今年も様々な方々に様々な面で助けていただきました。本当にお世話になりました。
この場を借りてお礼申し上げます。</p>

<p>来年ももちろん、助けてもらうんで、よろしくお願いいたします！
あと、話聞きたい方、声かけてくださーい。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Elastic Stack 7.0で入ってくる新機能をちょっと紹介]]></title>
    <link href="http://blog.johtani.info/blog/2018/12/25/whats-new-in-elastic-stack-7/"/>
    <updated>2018-12-25T00:00:01+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/12/25/whats-new-in-elastic-stack-7</id>
    <content type="html"><![CDATA[<p><a href="https://qiita.com/advent-calendar/2018/elasticsearch">Elastic stack (Elasticsearch) Advent Calendar 2018</a>の25日目の記事になります。
今年最後のAdvent Calendarです！来年も忘れてなければやるはず！</p>

<p>今日は、すでにalpha2までリリースされた7系でどんな変更が入るのかをちょっとだけ紹介します。
ほんとにちょっとだけですよ。</p>

<!-- more -->


<h3>Kibanaのk7 design (kibana)</h3>

<p><a href="https://www.elastic.co/guide/en/kibana/master/release-notes-7.0.0-alpha1.html#K7-design-7.0.0">Kibanaの新デザインです。K7って呼ぶのかな？</a></p>

<p><img src="http://blog.johtani.info/images/entries/20181225/k7dashboard.png" width="600"></p>

<p>まだ、メニューと一部が実装されているだけですが、7.0.0でガラッと変わりそうです。
そのほかの画面の<a href="https://github.com/elastic/kibana/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+is%3Aopen+k7">Issueはこちら</a>です。
&ldquo;k7&#8221;で検索しただけですが。メタIssueが見つからなかったんで。<a href="https://github.com/elastic/kibana/issues/25736">例えば、こんな感じでアプリとかのスイッチとかがこんな感じになるよというデザイン案が観れたりします</a>。</p>

<h3>Zen2 (elasticsearch)</h3>

<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/modules-discovery.html">Elasticsearchの新しいクラスター管理機構アルゴリズム</a>になります。
Zenと呼ばれる独自実装のものを6系までは使っていましたが、7系向けに変更がかかりました。
実際には、Nodeを探す仕組み、Masterの選出アルゴリズム、クラスター状態の管理などを行います。
上記のリンクにあるようにドキュメントも詳しくなりました。
信頼性をさらに向上し、設定ミスを起こしにくくして、より使いやすくという目的で様々な変更が加えられています。
これが、<a href="https://github.com/elastic/elasticsearch/issues/32006">メタIssue</a>かな？
アルゴリズムの変更や、クラスターの状態の管理の方法などの変更に関するIssueやPRにリンクが貼ってあります。</p>

<h3>新しいデータタイプ (elasticsearch)</h3>

<h4>Feature/Feature vector datatype</h4>

<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/feature.html">ドキュメントはこちら</a>と<a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/feature-vector.html">こちら</a></p>

<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/query-dsl-feature-query.html">feature query</a>と合わせて使用するためのフィールドで、しかもクエリのスコア計算「のみ」に使用するフィールドになります。
検索条件やソート、Aggregationの対象ではなく、クエリのスコアに影響させたい値を入れておくためのフィールドです。
6から追加された機能の「<a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/search-uri-request.html">track_total_hits</a>」をfalseにした時と合わせると、function_scoreなどで計算をしていた場合よりも、検索性能が上がるという利点まであります。
ちなみに、「track_total_hits」は検索ヒット数を計算しないで、上位のデータを取得する時にクエリを早くするといったことができる機能になります。
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/index-modules-index-sorting.html">Index Sorting</a>と組み合わせることで威力が発揮できる仕組みになるはずです。</p>

<h3>Filebeat supports NetFlow (beats)</h3>

<p><a href="https://www.elastic.co/guide/en/beats/filebeat/master/filebeat-input-netflow.html">NetFlowが入力</a>として追加されます。
Filebeatと言いつつ、File以外の入力が徐々に増えてきてますね（UDPやTCPにも対応しましたし）。
ネットワーク機器などの監視を行う方などにはさらに便利になってくるのではないでしょうか？
（私はこの辺りは不得手なので、誰か使ってみてもらえればと！）</p>

<h2>まとめ</h2>

<p>まだ、序の口って感じですが、今年はこの辺で。7系ではここであげた以外にも様々な機能が追加されています（もしくは予定です）。
Elasticのドキュメントの良いところは、masterブランチのドキュメントも公開されていることです。
ドキュメントのバージョンを<code>7.0.0-alpha2</code>にすれば、masterブランチで追加されたページが見れるので、
興味のある方は眺めてみていただければと。物によって、リリースノートが書かれていなかったりするので注意は必要ですが。</p>

<p>今年もあと数日になりましたが、Advent Calendarへの参加ありがとうございました！
来年ももちろんやりますので、年始からネタを考えてくださいね。</p>

<p>来年一発目は、<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/events/257301177/">第28回Elasticsearch勉強会 - 6.5機能紹介 -</a>になります。ウェビナーでも紹介しましたが、6.5で入った様々な新機能をデモありで紹介する予定です。
興味のある方はぜひご参加ください。</p>

<p>では、来年もよろしくお願いいたします。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2018年のElastic StackとElastic]]></title>
    <link href="http://blog.johtani.info/blog/2018/12/01/whats-happen-at-elastic-in-2018/"/>
    <updated>2018-12-01T10:48:38+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/12/01/whats-happen-at-elastic-in-2018</id>
    <content type="html"><![CDATA[<p><a href="https://qiita.com/advent-calendar/2018/elasticsearch">Elastic stack (Elasticsearch) Advent Calendar 2018</a>の1日目の記事になります。</p>

<p>ちょっと遅れちゃいました。。。
まだ、1ヶ月を残してますが、簡単に今年起こったことを振り返ってみようと思います。毎年恒例ですね、ここ数年。</p>

<!-- more -->


<h3>Elastic Stack 6.2.0リリース(2月)</h3>

<p><a href="https://www.elastic.co/jp/blog/elastic-stack-6-2-0-released">リリース記事はこちら</a></p>

<p>APMがGAリリースされ、Beats monitoring UIも追加されました。Stackとしての統一度がちょっとずつ上がってきた感じですね。
Kibanaのホーム画面（左メニューのKibanaアイコンをクリックした時）にデータ登録のチュートリアル的な画面が追加されています。
特にBeatsを利用する時の流れが簡単にわかるのがいい感じです。Metricsなどはローカルでちょっと試すのにも簡単な流れですので、ぜひ一度やってみてもらいたいなと。
個人的にはtermsを使ったパイチャートで、<a href="https://github.com/elastic/kibana/pull/15525">その他の数値がどのくらいあるかといった表示ができるよう</a>になって、やっと帰ってきた！（Kibana 3の頃にはあった機能）という印象でした。</p>

<h3>Elastic{ON}18開催(2月)</h3>

<p>第4回目のユーザーカンファレンスがSFで開催されました。
今年のキーノートが今年最大のニュースですね。
<a href="https://www.elastic.co/jp/blog/doubling-down-on-open">X-Packのコードの公開が発表された</a>のがこの時でした。
個人的に今後もオープンソースに携わっていきたいと思いながら日々働いていますが、
Elasticのオープンソースへのこだわりと、シンプルな考え方を再確認して素晴らしい会社で働けてるなーと。
商用のソースコードを公開してユーザーや顧客の皆さんとより良いものを作っていきたいという形ですので、今後もよろしくお願いします！
<a href="https://www.elastic.co/elasticon/conf/2018/sf/opening-keynote">キーノートの動画はこちら</a>からご覧いただけます。</p>

<p>そのほかにも次のような発表が行われました。</p>

<ul>
<li>SQL for elasticsearch</li>
<li>Canvas</li>
<li>Elastic App Search(旧Swiftype)</li>
</ul>


<h3>Elastic Stack 6.3.0リリース(6月)</h3>

<p><a href="https://www.elastic.co/jp/blog/elastic-stack-6-3-0-released">リリース記事はこちら</a></p>

<p>2月末のElastic{ON}で発表されたX-Packのコードの公開にはやはり時間がかかりました。
有償コードのリポジトリとの統合やライセンスの変更、テスト環境などなど、色々大変だったみたいです。
ようやく公開され、ベーシックのライセンスの扱いなども変わり、より使いやすくなったのがこのタイミングです。</p>

<ul>
<li>X-Packをプラグインとしてのインストールが不要に</li>
<li>ベーシックライセンスがデフォルトでONに。6.3から登録などが不要に。</li>
<li>Apache 2.0ライセンスの部分のみのディストリビューションも別途ダウンロードできるようになどなど</li>
</ul>


<p><a href="https://www.elastic.co/jp/webinars/elastic-stack-6-3">日本でもリリースウェビナーをやりました</a>。ご覧いただけましたかね？</p>

<h3>Elastic Cloud Elasticsearch Serviceがより使いやすく(8月)</h3>

<p><a href="https://www.elastic.co/jp/blog/the-next-generation-elasticsearch-service-hot-warm-clusters-machine-learning-more-hardware-choices-and-new-pricing">リリース記事はこちら</a></p>

<p>これまでは、メモリとストレージの比率だけしか指定できなかったのですが、
このリリースで様々なユースケースに応じた組み合わせが可能になりました。
CPUやメモリリソースよりもストレージを大きくしたりなどです。
専用マスターノードを追加できたり、待望の機械学習（Machine Learning）が提供されたりと色々と変更があり使いやすくなったかと。
昔からよく聞かれる、Kuromojiなどのカスタム辞書を登録する機能もあるので、Elastic Cloud便利です。
<a href="https://www.elastic.co/jp/cloud/elasticsearch-service">ご存知ない方は、14日間のトライアル</a>もありますので試していただければと！</p>

<h3>Elastic Stack 6.4.0リリース(8月)</h3>

<p><a href="https://www.elastic.co/jp/blog/elastic-stack-6-4-0-released">リリース記事はこちら</a></p>

<p>フィールドエイリアスや韓国語のアナライザーがElasticsearchに追加されました。
Kibanaはデザインがここからさらに少しずつ変更が入ってたりします。
<a href="https://elastic.github.io/eui/#/">Elastic UIフレームワークと呼ばれるデザイン用のライブラリ</a>が、ElasticのプロダクトのUIに取り込まれていってる感じです。統一感が取れてきてますよね。私が開発している<a href="https://github.com/johtani/analyze-api-ui-plugin/issues/25">Analyze UIのプラグインにも取り込みました</a>。
あとは、マイクロソフトのde:codeで話をさせていただいた、<a href="https://www.elastic.co/blog/logstash-6-4-0-released">Logstash向けのAzure Moduleがリリース</a>されたのもこのバージョンでした。AzureのEvent Hubからデータを取り込んで、SQLデータベースのモニタリングや、ユーザーの認証などをとってKibanaで可視化するものです。</p>

<p>もっとも気に入っているのはサンプルデータの登録が簡単になったことです。これまでは、KibanaとElasticsearchを用意した後に、データを入れるためにFilebeatなどを使ってから、ようやくKibanaで遊べるという形でした。
6.4からは、ElasticsearchとKibanaを立ち上げて、Kibanaのホーム画面の「Sample Data」のリンクを押した後に、「Sample flght data」の「Add」ボタンを押せばKibanaからデータが登録されます（<a href="https://www.elastic.co/guide/en/kibana/current/tutorial-sample-data.html">サンプルデータについてはこちら</a>）。とりあえず触ってみたいという方への敷居がさらに下がったのではないかなぁと。</p>

<h3>Elastic認定エンジニア第1号(8月)</h3>

<p><a href="https://www.elastic.co/jp/blog/celebrating-the-first-elastic-certified-engineer">ブログ記事はこちら</a></p>

<p>認定制度も始まりました。Elasticsearchの知識、経験を問われるテストを受けていただき、合格すると認定されるというやつです。
なんと、社外で世界初の認定エンジニアがアクロクエストの吉岡さんでした（上記ブログ参照）。
私もトレーナーやってるのもあり、慌てて認定をとったりしましたw。
認定テストは筆記ではなく、実際に作業をするテストなので実践的です。
トレーニングの受講が必須ではないのも面白いなぁと思いました。
トレーニングや認定エンジニアに興味がある方は、<a href="https://training.elastic.co">Elasticのトレーニングのサイト</a>をご覧ください。
1月末にはまた、日本語でElasticsearchのトレーニングも開催されます！</p>

<h3>Elastic Cloud Enterprise 2.0リリース(9月)</h3>

<p><a href="https://www.elastic.co/jp/blog/elastic-cloud-enterprise-2-0-0-released">リリース記事はこちら</a></p>

<p><a href="https://www.elastic.co/jp/products/ece">Elastic Cloud Enterprise</a>をご存知ない方もいらっしゃるかもしれません。
Elastic Cloudの裏側で利用しているクラスターの起動などの仕組みを製品として提供しているのがこちらになります。
Elastic Cloudで機械学習や様々な構成ができるようになったものがリリースされたのがこの2.0です。
複数のElasticsearchクラスターを管理したい場合には、こちらが便利なツールになってるんじゃないかなぁと。
部署ごとにクラスターを提供するといったことが可能になるので、乱立する前に利用するのも便利かなーと。</p>

<h3>ニューヨーク証券取引所で株式を公開(10月)</h3>

<p><a href="https://www.elastic.co/jp/blog/ze-bell-has-rung-thank-you-users-customers-and-partners">ブログ記事</a></p>

<h3>日本語でブログ(10月)</h3>

<p><a href="https://www.elastic.co/jp/blog/how-to-configure-elasticsearch-cluster-better">Elasticsearchの運用に関する典型的な4つの誤解</a>というブログを書きました。4年も働いてるのに、会社のブログに翻訳以外で書いたことなかったので。。。
Twitterや勉強会、ブログ記事などで見かけるよくある誤解に関する記事を書いてみました。
Elasticは英語のブログも活発に書かれているのですが、今後もこのような形で日本語でのブログも頑張りますので、
読んでみたいものなどあればコメントいただければと。</p>

<p>まぁ、<a href="https://www.elastic.co/jp/blog/author/kosho-owa">弊社の大輪は色々書いてるんで</a>、私がもっと頑張れって話ですかね。。。</p>

<h3>Elastic Stack 6.5.0リリース(11月)</h3>

<p><a href="https://www.elastic.co/jp/blog/elastic-stack-6-5-0-released">リリース記事はこちら</a></p>

<p>昨日（11/30）のウェビナーでも話をさせていただきましたが、Elastic Stack 6.5は「本当にマイナーリリース？？？」と思うほど盛りだくさんの機能がリリースされました。</p>

<ul>
<li>インフラUI、ログUI</li>
<li>Elastic APMの分散トレーシング対応</li>
<li>Java &amp; Go APM Agent GAリリース</li>
<li>Cross Cluster Replication</li>
<li>ODBCドライバー</li>
<li>Kibana Canvas</li>
<li>Kibana Spaces</li>
<li>Data Visualizer for files</li>
<li>Functionbeat</li>
<li>LogstashのApp Search output</li>
</ul>


<p>リストアップしただけでもこれです。45分のウェビナーでは伝えきれてないなぁとも思ってますので、何か検討しようと思います！</p>

<h3>Elasticsearch勉強会(3月から12月)</h3>

<p><a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/">Elasticsearch勉強会ページ</a></p>

<p>今年は、6回の勉強会を開催（1つは12月19日開催）しました。
9月からは、ユースケースなど、もっと参加者の皆さんの興味があることにフォーカスしながら開催をしてみ始めました。
参加しやすくなってればいいのですが。。。
そろそろまたアンケートをとったりして、参加しやすいか、どんな改善がしてほしいかなどを聞きたいなと思っています。</p>

<p>12月はもっと皆さんと喋りたいなということで、<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/events/256619262/">スピーカーなしの「LT&amp;忘年会」</a>にしてみました。
私やElasticのものも参加するので、ぜひ色々聞いたり、他のコミュニティの方達の使い方を聞き出して、
新しい発見をしていただければなーと思います。LTでスピーカーの練習をするってものありですよ！（まだ誰も応募してくれてない。。。）
発表することで、フィードバックがもらえて、自分の使い方に自信が持てたり、その他の視点を得ることができると思いますので、
ぜひ発表してみていただければと。</p>

<h3>12月のjohtani出没イベント</h3>

<p>12月は以下のイベントにブースを出してます。イベントに参加される方ははぜひブースにお立ち寄りください！！</p>

<ul>
<li>12/4-5 : <a href="https://containerdays.jp">Japan Container Days</a> - 東京</li>
<li>12/8 : <a href="https://www.ospn.jp/osc2018-fukuoka/">OSC福岡</a> - 福岡</li>
<li>12/15 : <a href="http://www.java-users.jp/ccc2018fall/#/">JJUG CCC 2018 Fall</a> - 東京</li>
<li>12/19 : <a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/events/256619262/">第27回Elasticsearch勉強会</a> - 東京</li>
</ul>


<p>なんか、忙しそうだな。。。</p>

<h3>まとめ</h3>

<p>駆け足でしたが今年を振り返ってみました。
今年も色々ありましたが、今後もよろしくお願いいたします。</p>

<p>さて、<a href="https://qiita.com/advent-calendar/2018/elasticsearch">Elastic Stack Advent Calendar 2018</a>は今日から25日まで続きます。こらからの記事を楽しみにしています！</p>

<p>ということで、次は<a href="https://qiita.com/kaibadash@github">kaibadash@github</a>さんの「ぼくの考えた最強のElasticsearch index設定を最強にわかりやすく書くぞ！！！」になります。お楽しみに！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[新規導入した長期出張用のアイテムをいくつか紹介]]></title>
    <link href="http://blog.johtani.info/blog/2018/10/18/items-for-long-businesstrip/"/>
    <updated>2018-10-18T01:34:55+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/10/18/items-for-long-businesstrip</id>
    <content type="html"><![CDATA[<p>（転職する少し前までパスポートすら持ってなかったのに）今の会社に転職してから、半年に1度の割合で海外への出張が発生する生活を送っています。
4年目になりますが、今回いくつか新しいガジェット？アイテム？を出張用に導入したので感想を書いておこうかなと。</p>

<!-- more -->


<p>とりあえず、以下の4つです。</p>

<h2>Felimoa ネック ピロー</h2>

<p>これまでは、無印で購入した「<a href="https://www.muji.net/store/cmdty/detail/4550002125325">フィットするネックピロー</a>」を使ってました。
特に使ってる間は問題ないのですが、どうしてもかさばります。。。
そんな時、FBで見かけたのがこちら。</p>

<iframe style="width:240px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://rcm-fe.amazon-adsystem.com/e/cm?ref=tf_til&t=johtani-22&m=amazon&o=9&p=8&l=as1&IS2=1&detail=1&asins=B077GQR2QC&linkId=68ae5d69e21ae8138332beb9d301a542&bc1=000000&lt1=_blank&fc1=333333&lc1=0066c0&bg1=ffffff&f=ifr">
    </iframe>


<p>厚みがないので、持ち運びが便利でした（商品紹介の中にありますが、リュックにつけると邪魔にならない）。
飛行機の中で使うので、それほど暑くない場所なので、ムレる感じでもなく。
ただ、ヘッドフォン＋真横にフレームがくる形になるとヘッドフォンに干渉するので、
私はフレームを顎の下の方に寄せた形で使ってました。
軽さと場所を取らないのがよかったです。</p>

<h2>ノイズキャンセリングヘッドフォン</h2>

<p>これまでは、<a href="https://www.sony.jp/walkman/products/NW-A840_series/">SONYのNW-A847</a>という
ノイズキャンセリング機能付きのウォークマン＋アクセサリーで外部入力を取り込む形で、飛行機で映画を見ていました。
これ自体が8年前の製品ですね。。。
これとは別に、冬の寒い時期は防寒も兼ねてヘッドフォンを使用しています。
<a href="https://www.sony.jp/headphone/products/MDR-10R/">MDR-10R</a>を使ってたんですが、昨年こんな感じになりまして。。。</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">応急処置 <a href="https://t.co/uDErZWpPVC">pic.twitter.com/uDErZWpPVC</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/928850255222681601?ref_src=twsrc%5Etfw">2017年11月10日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>で、ヘッドフォンの買い替えを検討してたんです。
そこへ飛び込んできたのがSonyの新しいノイズキャンセリングヘッドフォンでしたと。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=johtani-22&language=ja_JP&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=B07GZ8DZC8&linkId=0b91ad46d6f630a45d53c65eba62725a"></iframe>


<p>せっかく買い換えるし、今度はいいものを長くということでフライト前日に購入してしまいました。
結論としては高いけど買ってよかったと。よかった点はこんな感じです。</p>

<ul>
<li>軽い</li>
<li>イヤーパッドが耳を抑えることがないので長時間でも気にならない</li>
<li>人の声だけノイズキャンセリングをオフにする（騒音などはキャンセルしてくれる）</li>
<li>バッテリーが長時間</li>
<li>ヘッドフォンを外さないでも案内を聞くことができる「クイックアテンションモード」</li>
</ul>


<p>などなど。行きのフライトで5時間も遅れが出ましたが、空港、飛行機内で非常に快適に過ごせました。
大事に使おう。。。</p>

<h2>cw-x</h2>

<p>知り合いがFBにアップしてて、立ちっぱなしの仕事だったり、長時間のフライトでも足が疲れないという噂を聞いて購入しました。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=johtani-22&language=ja_JP&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=B01BKDX2QY&linkId=5af7d1ce20febf92530820e8e6b66284"></iframe>


<p>長時間のフライトの後に、ホテルで1泊しても足の疲れって結構残ってるんです。
今回、12時間のフライトでズボンの下に履いて行きましたが、足の疲れがほぼありませんでした。
デブになりつつあり、足太くなって来てるので、履くのはちょっと苦労しますが。。。もともときつめに作ってるんじゃないかなぁ（希望的観測）。
帰りも使用しましたが、帰りはフライト前に1万歩ほどダブリンの街中を歩き回ってたので、流石に疲れが出てます。。。
今度は、カンファレンスのブースなどで立つことが多いシーンでも使ってみて、疲れがどうなるかを試してみようと思います。</p>

<h2>携帯ウォシュレット</h2>

<p>初めて購入しました。海外のホテルで1週間とか連泊するんですが、トイレットペーパーがやはり硬めなのが気になって。。。</p>

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&bg1=FFFFFF&fc1=000000&lc1=0000FF&t=johtani-22&language=ja_JP&o=9&p=8&l=as4&m=amazon&f=ifr&ref=as_ss_li_til&asins=B005FDJ8SM&linkId=e959d19209ac105a9f0e30ab00e2c4be"></iframe>


<p>世界に誇る日本の技術の一つだと確信してますw
ドイツに長期出張してた友人が便利だよと言ってたので、思い切って購入して持って行きました。
硬めのトイレットペーパーも気にならなくなるのでとても幸せな気分ですw</p>

<h2>まとめ</h2>

<p>とりあえず、今回はこんな感じです。
総じて導入してよかったなという感じでした。
他にもおすすめ出張グッズとかあればコメントいただけると嬉しいです。</p>

<p>普段使ってるものとか、どういうものを持っていってるとか興味ある人いるかなぁ？
ではでは。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第25回Elasticsearch勉強会を開催しました。]]></title>
    <link href="http://blog.johtani.info/blog/2018/10/17/26th-elasticsearch-tokyo-meetup/"/>
    <updated>2018-10-17T17:33:50+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/10/17/26th-elasticsearch-tokyo-meetup</id>
    <content type="html"><![CDATA[<p>毎月開催の2回目になります。
今回は日経さんの会場をお借りしての開催となりました。</p>

<p>前回から、スピーカーの募集を<a href="http://bit.ly/SpeakerElasticTokyoMeetup">http://bit.ly/SpeakerElasticTokyoMeetup</a> で行なっております。
ぜひ皆さんのノウハウを共有していただけると助かります。
また、次回もすでにスケジュール済みです。次回は<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/events/254646236/">「ログ/メトリック分析」回</a>になります。</p>

<p>以下は、個人的なメモになります。</p>

<!-- more -->


<h3>メディアコンテンツ向け記事検索DBとして使うElasticsearch / Future Architect 株式会社 村田 靖拓さん (twitter: @famipapamart)</h3>

<ul>
<li>メディア記事コンテンツ検索</li>
<li>全ての情報が1indexに入っているようにすること。</li>
<li>typeは少し悩んだ。</li>
<li>範囲検索にはならない場合がある。（文字列で登録してWildcard検索できるようにした）</li>
<li>kuromojiで基本対応</li>
<li>異体字についてはchar filterでマッピング</li>
<li>細かな設定とかもスライドにて公開予定。

<ul>
<li>基本的なプラグインだけで対応した</li>
</ul>
</li>
<li>Dynamic Field mappingを有効にしたまま対応</li>
<li>パフォーマンス検証</li>
<li>初回のインデックスのロードは<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html#_warm_up_the_filesystem_cache">この辺かなぁ？</a>。</li>
<li>自力でQueryのoffset-limitを構築するのかぁ。

<ul>
<li>ソート条件が固定らしいのでできる方法</li>
</ul>
</li>
</ul>


<h3>minne での検索運用(仮) / @_shiro16 さん</h3>

<ul>
<li>ハンドメイドなものをマーケットプレイスがminne</li>
<li>SolrからElasticsearchに切り替えた話 2016/02以降はEs

<ul>
<li>昔は、DBからSolrへ同期</li>
<li>Es版ではDBからの同期ではなく、Workerに対してリクエストを入れる</li>
</ul>
</li>
<li>現状は独自にEC2で運用中</li>
<li>ユーザーが求めているものがきちんとでているかを計測している

<ul>
<li>行動ログはどんな感じ？</li>
<li>TDにログを入れて、CTRとかを計算してre:dashで可視化</li>
</ul>
</li>
<li>A/Bテストも実施

<ul>
<li>指標はキャンペーンなどが実施されている場合にブレる場合もある</li>
</ul>
</li>
<li>トレンドをログから知ることができる</li>
<li>Function Scoreでスコアを変更してる

<ul>
<li>季節的な単語でスコアを変更したりする</li>
</ul>
</li>
<li>ドリンクの対応などをして聴けてないところが。。。</li>
</ul>


<h3>query_stringのはなし / 加藤遼さん　(日本経済新聞社)</h3>

<p>電池が切れそう＋ピザとかの手配をしていたらメモが取れず。</p>

<ul>
<li>苦労が滲み出る感じのセッションでした。</li>
<li>query_string queryが実際にどんなクエリになっているかの説明を交えて説明してもらえたのはすごくよかったんじゃないかと。</li>
</ul>


<h2>まとめ</h2>

<p>検索は話してくれる人が多いし話題に事欠かないなぁという印象でした。
今回も、スピーカーの皆さん、会場提供をしていただいた日経さんありがとうございました。</p>

<p>他のユースケースのスピーカーも募集してます。ぜひMeetup.comの概要に記載してあるリンクからスピーカーの応募をお願いします！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JJUGナイトセミナーで話しました]]></title>
    <link href="http://blog.johtani.info/blog/2018/07/29/apm-java-at-jjug/"/>
    <updated>2018-07-29T14:45:30+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/07/29/apm-java-at-jjug</id>
    <content type="html"><![CDATA[<p><a href="https://jjug.doorkeeper.jp/events/77485">7/25にJJUGナイトセミナー</a>でElastic Stackの紹介とAPMのJava Agentの紹介をしたので、補足のブログです。
（久々に書くな。。。）</p>

<!-- more -->


<p>スライドとサンプルアプリのリポジトリはこちら。</p>

<ul>
<li>スライド：<a href="https://speakerdeck.com/johtani/intro-elastic-stack-and-elastic-apm-java">https://speakerdeck.com/johtani/intro-elastic-stack-and-elastic-apm-java</a></li>
<li>リポジトリ：<a href="https://github.com/johtani/apm-beats-kubernetes-demo/tree/master">https://github.com/johtani/apm-beats-kubernetes-demo/tree/master</a></li>
</ul>


<h3>サンプルアプリ</h3>

<p>勉強会の頭でサンプルアプリへのアクセス用QRコードを用意して質問してもらう感じにしました。</p>

<p><img src="http://blog.johtani.info/images/entries/20180729/APM___Beats_demo_app.jpg" width="600"></p>

<p>アプリ自体が質問の受付と、そこにある質問に対して聞きたいかどうかのVoteができる仕組みになっています。
セッション最後にこの画面をみながら答えました。
手を挙げていただくよりも、匿名（名前入れるようになってますが、実名である必要はない）で登録できるし、
みんなが聞きたいかどうかもわかるので便利だなぁと。</p>

<p>元は、Elastic{ON} 2018であった「<a href="https://www.elastic.co/webinars/elasticsearch-log-collection-with-kubernetes-docker-and-containers">Docker &amp; Kubernetes Log Collection and Monitoring with Beats and Elasticsearch</a>」のサンプルアプリです。
これをSpring Bootに移植して、ちょっとだけサンプルコードを追加したものになります。</p>

<h3>構成とかの補足</h3>

<p>スライド、GitHubのリポジトリのREADMEにある図は、k8s上のサンプルアプリケーションの構成だけでした。
ElasticsearchとKibanaを含めた図はこんな感じです。</p>

<p><img src="http://blog.johtani.info/images/entries/20180729/system-overview.jpg" width="600"></p>

<p>k8s上の各種Beats、APM Serverは一旦Elastic CLoud Elasticsearch Service（AWS Tokyoリージョンにデプロイ）に対してデータを投げます。
で、KibanaはGKE(k8s on GCP)で動かして、実際に勉強会ではkubectl proxyで接続してから表示していました。
この構成にしている理由は次の理由です。</p>

<ul>
<li>Elastic CloudのElasticsearchクラスターにデータを投げている理由

<ul>
<li>クラスターの起動が簡単。</li>
<li>データを永続化したい。k8sのアプリは必要がなくなったらデータを削除したいから。</li>
<li>k8sのdeploymentを書く手間を省く</li>
<li>普段使ってるので。。。</li>
</ul>
</li>
<li>KibanaをGKEで動かした理由

<ul>
<li>Elastic Cloudでは<em>「現時点(7/29現在)」</em>で、KibanaでAPM専用のUIを起動できない</li>
<li>ローカルである必要はない</li>
</ul>
</li>
</ul>


<p>といったところです。
Elastic Cloudのインスタンスを起動したままにしておけば、デモをしなくても、このタイミングのログ、メトリクスを
再利用して話をすることも可能です。</p>

<h3>まとめ</h3>

<p>ということで、簡単ですが、構成の補足でした。
勉強会では告知したのですが、今後の勉強会はトピックスごとでやりたいなと。ということで、どんなトピックスに興味があるのか、スピーカーの応募にはどんなツールが話しやすいかなどといったことのアンケートを集めております。ぜひご協力ください！
また、アンケート、このブログに関する質問がある場合は、<a href="https://twitter.com/johtani">@johtani</a>、もしくはブログへのコメントでお願い致します。</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">今後の勉強会のやり方などについてアンケートを実施中です。<a href="https://t.co/XU15CHro0n">https://t.co/XU15CHro0n</a> 皆さん是非ご協力ください。ここにない項目については返信をお願いします。 <a href="https://twitter.com/hashtag/elasticsearchjp?src=hash&amp;ref_src=twsrc%5Etfw">#elasticsearchjp</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1021388358730170368?ref_src=twsrc%5Etfw">2018年7月23日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Analyze UIとKibanaのプラグインの作成方法（第3回）]]></title>
    <link href="http://blog.johtani.info/blog/2018/04/20/directory-layout-and-architecture/"/>
    <updated>2018-04-20T15:30:01+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/04/20/directory-layout-and-architecture</id>
    <content type="html"><![CDATA[<p><a href="http://blog.johtani.info/blog/2018/02/09/getting-started-template-kibana-plugin/">第2回</a>から少し間が空いてしまいましたが、templateで作成したプラグインのディレクトリ構成とどういう流れでデータがやり取りされるかについてみていきます。
（2018/02月時点で作成したディレクトリ構成にしたがって説明します）
ちなみに、JavaScriptの優れた開発者ではないので、誤解している点や、効率の悪い書き方などがあるかもしれません。見つけた場合は、連絡をいただければと思います。</p>

<!-- more -->


<p>では、まずは作成したディレクトリ構成についてみていきましょう。</p>

<h2>ディレクトリ構成</h2>

<p><code>simple-sample-kibana-plugin</code>がプラグインのプロジェクトのトップディレクトリになります。このディレクトリに次のような構成でサブディレクトリが存在します(なお、画像はIntelliJに取り込んだ後のディレクトリになっているので、<code>.iml</code>など、不要なファイル/ディレクトリが存在しています)。</p>

<p><img src="http://blog.johtani.info/images/entries/20180420/directories.jpg" width="400"></p>

<p>主要なディレクトリ、ファイルについて簡単に一覧で説明します(順不同)。</p>

<table>
<thead>
<tr>
<th> ファイル/ディレクトリ名 </th>
<th> 説明 </th>
</tr>
</thead>
<tbody>
<tr>
<td> index.js </td>
<td> プラグインの本体。Kibanaはこのファイルのオブジェクトを読み込みプラグインを起動。設定などの読み込みもこちら。 </td>
</tr>
<tr>
<td> package.json </td>
<td> npm/yarnのパッケージに関する情報を定義するファイル </td>
</tr>
<tr>
<td> README.md </td>
<td> README。プラグインの説明などを記載する。インストール方法なども記載すると便利 </td>
</tr>
<tr>
<td> public </td>
<td> ブラウザ側に配布されるプログラムや画像一式 </td>
</tr>
<tr>
<td> public/less/main.less </td>
<td> LESS用のファイル。アプリ固有のスタイルなどを記載 </td>
</tr>
<tr>
<td> public/app.js </td>
<td> ブラウザ側で読み込まれるプラグインのモジュールなど。 </td>
</tr>
<tr>
<td> public/template/index.html </td>
<td> HTMLのテンプレート。ブラウザ上での描画に利用 </td>
</tr>
<tr>
<td> server/routes </td>
<td> Kibanaサーバー側で動作するプラグイン。hapi.jsを利用してREST APIを実装する </td>
</tr>
</tbody>
</table>


<p>重要なファイルについて少しだけ説明します。</p>

<h4>package.json</h4>

<p>npmやyarnでビルドなどをするときに使用するパッケージ情報を記載するためのファイルです。
プラグインの名前、バージョン、説明などを記載します。
Kibanaのバージョンについてもこちらで管理します。この情報を
また、ライブラリなどの依存関係についてもこちらで記載しています。
以下、抜粋。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;simple-sample-kibana-plugin&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.0&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Sample plugin for explaining how to make kibana app&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;kibana&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;6.2.1&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;templateVersion&quot;</span><span class="p">:</span> <span class="s2">&quot;7.2.4&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;lint&quot;</span><span class="p">:</span> <span class="s2">&quot;eslint **/*.js&quot;</span><span class="p">,</span>
</span><span class='line'><span class="err">...</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;@elastic/eslint-config-kibana&quot;</span><span class="p">:</span> <span class="s2">&quot;^0.14.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;@elastic/eslint-import-resolver-kibana&quot;</span><span class="p">:</span> <span class="s2">&quot;^0.9.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;@elastic/plugin-helpers&quot;</span><span class="p">:</span> <span class="s2">&quot;^7.1.3&quot;</span><span class="p">,</span>
</span><span class='line'><span class="err">...</span>
</span><span class='line'>    <span class="nt">&quot;expect.js&quot;</span><span class="p">:</span> <span class="s2">&quot;^0.3.1&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ちなみに私は、<code>version</code>などをリリースするたびに変更しています。</p>

<h4>index.js</h4>

<p>最初にKibanaに読み込まれるオブジェクトになります。
Kibanaのアプリの名前や、必要なモジュールなどを記載します。</p>

<p>また、<code>kibana.yml</code>から設定など読み込む処理なども書くことができます。</p>

<p>2行目の<code>exampleRoute</code>はサーバー側のAPIとして利用するhapi.js用のファイルのパスになります。</p>

<p><code>uiExports</code>はこのアプリの画面に関する設定などの記載になります。
<code>app</code>の部分が実際にアプリの情報で、
<code>main</code>があとで説明するこのプラグインのUIのためのJavaScriptファイル(public/app.js)になります。mainですので、最初に読み込まれる処理が記載されているものを指定します。<code>app.js</code>というファイル名を変更する場合は、こちらの<code>app</code>の部分を変更したファイルに合わせましょう。</p>

<p><code>config(Joi)</code>の関数が設定ファイルの読み込みなどの処理を記載する場所です。</p>

<p><code>init(server, options)</code>の関数が初期化処理を記載する場所になります。
このサンプルアプリでは、2行目の<code>import</code>で読み込んだhapi.js用のファイルの関数を呼び出しています。引数で渡している<code>server</code>がhapi.jsの<code>server</code>オブジェクトになります。
<code>route</code>メソッドを使用して作成しているプラグイン用のREST APIを追加しています。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">import</span> <span class="p">{</span> <span class="nx">resolve</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="nx">exampleRoute</span> <span class="nx">from</span> <span class="s1">&#39;./server/routes/example&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">kibana</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">new</span> <span class="nx">kibana</span><span class="p">.</span><span class="nx">Plugin</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">require</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;elasticsearch&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;simple-sample-kibana-plugin&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">uiExports</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">app</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Simple Sample Kibana Plugin&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Sample plugin for explaining how to make kibana app&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">main</span><span class="o">:</span> <span class="s1">&#39;plugins/simple-sample-kibana-plugin/app&#39;</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>
</span><span class='line'><span class="p">...</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">config</span><span class="p">(</span><span class="nx">Joi</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">Joi</span><span class="p">.</span><span class="nx">object</span><span class="p">({</span>
</span><span class='line'>        <span class="nx">enabled</span><span class="o">:</span> <span class="nx">Joi</span><span class="p">.</span><span class="kr">boolean</span><span class="p">().</span><span class="k">default</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span>
</span><span class='line'>      <span class="p">}).</span><span class="k">default</span><span class="p">();</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">init</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// Add server routes and initialize the plugin here</span>
</span><span class='line'>      <span class="nx">exampleRoute</span><span class="p">(</span><span class="nx">server</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<h4>public/app.js</h4>

<p>画面用のモジュールです。
<code>uiRoutes</code>という機能を使用して、アプリの呼び出しURLを定義します。テンプレートで作成したばかりの場合は、<code>/</code>というURLが追加されるのみです。</p>

<p>実際に画面を表示する際に動くコントローラーの部分はその下の
<code>uiModules.controller</code>に指定してあるfunctionが画面描画の
処理を書く部分になります。
templateで作成したプラグインでは、&#8221;title&#8221;など表示に必要なデータを<code>$scope</code>というオブジェクトに詰め込んでいます。
これはAngularJS(1系)でのモデルオブジェクトになります。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">import</span> <span class="nx">moment</span> <span class="nx">from</span> <span class="s1">&#39;moment&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="p">{</span> <span class="nx">uiModules</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;ui/modules&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="nx">uiRoutes</span> <span class="nx">from</span> <span class="s1">&#39;ui/routes&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">import</span> <span class="s1">&#39;ui/autoload/styles&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="s1">&#39;./less/main.less&#39;</span><span class="p">;</span>
</span><span class='line'><span class="kr">import</span> <span class="nx">template</span> <span class="nx">from</span> <span class="s1">&#39;./templates/index.html&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">uiRoutes</span><span class="p">.</span><span class="nx">enable</span><span class="p">();</span>
</span><span class='line'><span class="nx">uiRoutes</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">template</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'><span class="p">...</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">uiModules</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;app/simple-sample-kibana-plugin&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;simpleSampleKibanaPluginHelloWorld&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$route</span><span class="p">,</span> <span class="nx">$interval</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">&#39;Simple Sample Kibana Plugin&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="s1">&#39;Sample plugin for explaining how to make kibana app&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">...</span>
</span><span class='line'>    <span class="nx">$scope</span><span class="p">.</span><span class="nx">$watch</span><span class="p">(</span><span class="s1">&#39;$destroy&#39;</span><span class="p">,</span> <span class="nx">unsubscribe</span><span class="p">);</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4>server/routes/example.js</h4>

<p><a href="https://hapijs.com">hapi.js</a>というNode.jsのためのサーバーフレームワークです。
このフレームワークをKibanaは使っており、Kibanaのサーバーとブラウザとのやり取りに使用するREST APIを記述するために使用しています。
例えば、Elasticsearchとのやり取りを実際に行うAPIなどをこのREST API内部で記述します。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">server</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">server</span><span class="p">.</span><span class="nx">route</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/api/simple-sample-kibana-plugin/example&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;GET&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">handler</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">reply</span><span class="p">({</span> <span class="nx">time</span><span class="o">:</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">toISOString</span><span class="p">()</span> <span class="p">});</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>path</code>の部分がブラウザ側からアクセスするURLになります。
実際にElasticsearchとやり取りする処理の書き方については、次回の記事で説明します。</p>

<h2>アーキテクチャ（簡易版）</h2>

<p>ざっくりですが、ファイルやディレクトリについて説明しました。
簡単なデータのやり取りについての流れを説明します。</p>

<p>Kibana自体はNode.jsで実装されサーバーとして動作していますが、ブラウザでアクセスすることで画面を描画しています。
簡単なコンポーネントを並べるとデータのやり取りはこのような形です。</p>

<p><img src="http://blog.johtani.info/images/entries/20180420/architecture.jpg" width="600"></p>

<p>すごく簡易で大雑把な絵ですが。。。</p>

<p>実際のプラグインとしては大きく、2つの処理があります。</p>

<ul>
<li>ブラウザ上の処理

<ul>
<li>クリックなどのイベント処理</li>
<li>HTMLなどのレンダリング処理</li>
</ul>
</li>
<li>Kibanaサーバー上の処理(Elasticsearchなどとの通信が必要な場合)

<ul>
<li>外部との通信処理</li>
<li>ブラウザ上では重い処理</li>
</ul>
</li>
</ul>


<p>絵に記載しましたが、ブラウザ上の処理についてはAngularJSが主なフレームワークで、サーバー上の処理についてはhapi.jsがフレームワークとなっています。</p>

<h2>まとめ</h2>

<p>ということで、今回はディレクトリ構造とファイルの説明、どういったフレームワークが使われ、データのやり取りがどのように行われているか説明しました。</p>

<p>次回からは、実際に私が作成した<a href="https://github.com/johtani/analyze-api-ui-plugin">Analyze UI</a>を元にElasticsearchとのデータのやり取りなどについて紹介していきます。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[カンファレンス情報の探し方（CfP、スポンサー応募、開催期間など）？]]></title>
    <link href="http://blog.johtani.info/blog/2018/03/24/how-to-find-conferences/"/>
    <updated>2018-03-24T13:50:12+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/03/24/how-to-find-conferences</id>
    <content type="html"><![CDATA[<p> #MANABIYA のブースでセッション時間の合間はお客さん少ないので、ブログを書いてみたり。
ここ数年、スポンサーとして色々なカンファレンスに参加してるんですが、それについてちょっと気なることがあったので。</p>

<!-- more -->


<h2>スポンサー情報ってどうやって探してます？</h2>

<p>職業柄、カンファレンスにCfP出してセッションしてみたり（落ちること多いけど）、スポンサーとしてブースを出したりしています。</p>

<p>で、疑問があるんですが、みなさんどうやってカンファレンスの情報をゲットしてます？</p>

<p>数年やって来て、検索したりして見つけてスポンサーした結果、
これまでスポンサーしていたので、情報が流れてくるという感じになりました。
それ以外だと、@yusuke さんに教えてもらったりと言うのがあったんですが。。。</p>

<p>自分が知らない、自分のTwitterで流れてこないという情報をどうやったら集められるかな？と言うのが今の課題になってます。
と言うことで、ブログを書いてみました。</p>

<h2>カンファレンスを検索できるサイトとか便利？</h2>

<p>で、私の会社は検索エンジンの会社なんで、検索できると便利では？と考えるんです。</p>

<p>CfPの応募期間で絞り込みできたり、場所で検索できたり、スポンサー情報を取得する方法が載ってたりすると便利なのではないかなと。
便利に思うのが自分だけでは？と言うのがあるんですが。。。</p>

<p>あると嬉しい人、データを掲載したいなと言う人いますでしょうか？
Google Formなどで入力してもらえるようにして何か作るのもありかなぁと考えているところです。
それとも、スポンサーを募っているカンファレンスのスタッフや企業の人は、こういう情報は特定の人にだけ知ってもらったりしたいでしょうか？</p>

<p>自分だけではわからないことが多いので、懸念事項や、それダメでしょ？
あると便利！などのフィードバックをいただけると助かります。</p>

<p>それ以外に、カンファレンス自体の場所、開催日程、サイトへのURLなどが検索できると便利だったりするかも？というのもあります。</p>

<p>とりあえず、自分が知ってるものだけ、個人的に検索できるようにしたりするのがいいかなぁ。。。
コメントお待ちしてます！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第1章の05から06までやってみた（言語処理100本ノック）]]></title>
    <link href="http://blog.johtani.info/blog/2018/03/20/nlp100-ch01-05to06/"/>
    <updated>2018-03-20T21:34:45+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/03/20/nlp100-ch01-05to06</id>
    <content type="html"><![CDATA[<p>Rustで言語処理100本ノックの続きで、05と06です。</p>

<!-- more -->


<h3>05. n-gram</h3>

<p>問題は<a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#sec05">こちら</a>。</p>

<p>みんな大好きn-gramです。単語と文字があるので、それぞれ別関数として実装しました。問題はbi-gramと<code>n=2</code>だったのですが、一応、<code>n</code>を引数に取る形にして実装しました。</p>

<p>まずは、単語です。</p>

<script src="http://gist-it.appspot.com/https://github.com/johtani/nlp100-rust/blob/5439f96e8521bffe34689c23aa076eb3a2fe817b/src/chapter01/answer.rs?slice=128:139"></script>


<p>前に実装した時は、自分で頑張って、先頭から数えたりしてたんですが、Rustには<a href="https://rust-lang-ja.github.io/the-rust-programming-language-ja/1.6/std/primitive.slice.html#method.windows">windows(n)</a>という便利なメソッドがsliceにあり、これを利用したらこんな簡単になりました。
sliceは特定のシーケンス（配列）に対してある特定のサイズのViewを作ってくれます（説明あってる？）。
ということで、文字列から、単語の配列（スペース区切りで単語にしている）を作り出して、<code>windows(n)</code>メソッドを通すと、
<code>n</code>で指定した数字の個数だけの単語の配列を先頭から、1単語ずつずらして作ってくれます。まさに、n-gram!
戻り値は配列の配列です。
1点だけ疑問点があるのは、「空白で区切ったものが単語」という考え方で良いかどうか？という点です。特に問題文にはそれが明示されていなかったので、このような前提を置いてあります。</p>

<p><code>invalid_n(text, n)</code>は<code>n</code>の値や入力された文字列をチェックする関数です。入力チェックですね。<code>n</code>が1よりも小さい場合、入力文字列が空文字の場合は、warningでメッセージを出して、空の配列を返す仕組みになっています。</p>

<script src="http://gist-it.appspot.com/https://github.com/johtani/nlp100-rust/blob/5439f96e8521bffe34689c23aa076eb3a2fe817b/src/chapter01/answer.rs?slice=115:126"></script>


<p>次は、文字です。</p>

<script src="http://gist-it.appspot.com/https://github.com/johtani/nlp100-rust/blob/5439f96e8521bffe34689c23aa076eb3a2fe817b/src/chapter01/answer.rs?slice=128:139"></script>


<p>単語とほぼ一緒ですが、入力文字列を、1文字ずつの配列にしているところが異なります。
また、<code>windows</code>メソッドで取り出された、1文字ずつの<code>n</code>個の配列を文字列に修正してから、結果の配列に入れています。
ここでも疑問は空白をどう扱うか？になります。
現時点では、空白も1文字とカウントして扱うことにしてあります。
どっちがいいのかなぁ？</p>

<h3>06. 集合</h3>

<p>問題は<a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#sec06">こちら</a>。</p>

<p>まずは、文字n-gramで出てきた文字列をSetに入れる関数から。</p>

<script src="http://gist-it.appspot.com/https://github.com/johtani/nlp100-rust/blob/5439f96e8521bffe34689c23aa076eb3a2fe817b/src/chapter01/answer.rs?slice=159:174"></script>


<p>n-gramの問題で実装した文字n-gramの関数の戻り値を配列ではなく、BTreeSetに変えたものになります。比較などがしやすいように？と思い、BTreeSetを利用していますが、実装としてはHashSetでも問題ないかと。
この関数の集合（Set）を元に、和集合、積集合、差集合を求める関数を実装しました。</p>

<script src="http://gist-it.appspot.com/https://github.com/johtani/nlp100-rust/blob/5439f96e8521bffe34689c23aa076eb3a2fe817b/src/chapter01/answer.rs?slice=176:187"></script>


<p>Setのメソッドとして、それぞれ、<code>union</code>＝和集合、<code>intersection</code>＝積集合、<code>difference</code>＝差集合のメソッドが用意されているので、特に困ることはなかったです。
差集合については、1-2と2-1で結果が異なるはずなので、それぞれをテストケース、main.rsで出力するようにしてあります。</p>

<h3>所感</h3>

<p>今回は、Rustがすでに実装してくれているメソッドがあったので楽ができました。
やりたいことに相当するメソッドがあるかどうかを調べるためにリファレンスを探さないといけないのがちょっと苦労しましたが。。。
ということで、今日はこの辺りまで。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第1章の03から04までやってみた（言語処理100本ノック）]]></title>
    <link href="http://blog.johtani.info/blog/2018/02/19/nlp100-ch01-03to04/"/>
    <updated>2018-02-19T18:34:08+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/02/19/nlp100-ch01-03to04</id>
    <content type="html"><![CDATA[<p>Rustで言語処理100本ノックの続きで、03と04です。</p>

<!-- more -->


<h3>03. 円周率</h3>

<p>問題は<a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#sec03">こちら</a>。</p>

<script src="http://gist-it.appspot.com/http://github.com/johtani/nlp100-rust/blob/8ca508cc16fbc7a11ac04bbc43687dfec4f25483/src/chapter01/answer/mod.rs?slice=60:71"></script>


<p>入力文字列を<code>.split_whitespace()</code>で分割しておいて、単語ごとのベクタを作り出し、そこに対して文字を数えました。「アルファベットの」という注意書きがあるので&#8221;,&ldquo;や&rdquo;.&ldquo;は含めずに数えるのかなということで、
charの<code>.is_alphabetic()</code>で<code>A-z</code>までの判定をしつつ、文字のベクタを作ってから、そのベクタの長さを詰め込むという感じでやりました。</p>

<p>これ、ひょっとして、collectでベクタにしなくても、i32とかの変数でカウントするとベクタ作らなくてもいいなじゃにか？というのに書きながら気づいた。。。
必要じゃないオブジェクトを作ってるよなぁ。</p>

<p><code>.filter().map</code>とかかな？この辺りの操作がイマイチ苦手。Javaでもまだ馴染めてないところなんだよなぁ。頭固すぎ。</p>

<h3>04. 元素記号</h3>

<p>問題は<a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#sec04">こちら</a>。</p>

<script src="http://gist-it.appspot.com/http://github.com/johtani/nlp100-rust/blob/8ca508cc16fbc7a11ac04bbc43687dfec4f25483/src/chapter01/answer/mod.rs?slice=73:112"></script>


<p>大作ですね。何だろう、大作。。。
最終的に連想配列（辞書型もしくはマップ型）」ということだったので、BTreeMapに詰め込んでます。
HashMapでもいいんですが、文字列で出力した時にキーが並んで見やすいからという理由で、BTreeMap使いました。それ以上の理由はないです。普通にやるなら、HashMapかな？</p>

<p>入力として、1文字だけの出力をする場所（インデックス番号）の配列を受け取ってます。1点だけ、チェックしていない、けど入力値の想定をしていて、<code>idx_one_symbols</code>がソートされていて、小さいものから順番に出てくるものとしてます。関数作って、チェックすべきかな？</p>

<p>で、指定された場所の最後のものが入力文字列よりも大きいかどうかというチェックもしています。（あー、テストケース書いてないな）この辺りのせいでちょっと長めになってます。</p>

<p>単語の配列を作るのは03の時と同じやり方です。
回しかたがちょっと違って、<code>.iter().enumerate()</code>で回して、添字と値をタプル？でとりだしてます。添字を見ながら1文字取り出すのか、2文字取り出すのかの判断が必要だからです。あとは一緒ですね。1文字取り出すときは、<code>.first()</code>を使って見ました。
実は、2文字取り出す時と、1文字の時と同じロジック使った方が共通化できて、短くなった？？？</p>

<p>ということで、こんな感じでした。いつものようにツッコミお待ちしてます。</p>

<h3>所感</h3>

<p>問題それぞれについてではなく、
やってて思ったのですが、問題に対して想定される結果が記載されていると嬉しいなと思いました。
ロジックについては、各自実装者に寄ったり、言語によって違いが出たりするし、議論するベースになっていいかなと思うんですが、
問題で想定されている結果（出力）があると、自分の実装にケアが足りないところがないのか？とか、ケアしなくていい点とかがわかるのかもなぁと。
ユニットテスト相当のものがあると楽かなぁと。</p>

<p>このケースどうするんだろ？みたいなのが、ところどころコメントに残ったりしてます。
出題の意図としては、その部分も議論の対象ということなのかな？</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第1章の00から02までやってみた（言語処理100本ノック）]]></title>
    <link href="http://blog.johtani.info/blog/2018/02/15/nlp100-ch01-00to02/"/>
    <updated>2018-02-15T21:59:01+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/02/15/nlp100-ch01-00to02</id>
    <content type="html"><![CDATA[<p>「鉄は熱いうちに打て」ということで、言語処理100本ノックの第1章の00から02を実装してみました。</p>

<!-- more -->


<p>さて、これが効率がいいのかどうかはさておき。</p>

<h3>00. 文字列の逆順</h3>

<p>問題は<a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#sec00">こちら</a>。</p>

<p>最初、<a href="https://github.com/johtani/nlp100-rust/blob/48567d107511541d0401af4ef58c6abb98a6083b/src/chapter01/answer.rs">Vecのreverse()で逆順にして0からlen()まで回してた</a>んですが、pop()がいい感じに後ろから取れることがわかったんで、切り替えました。
シンプルかな？</p>

<script src="http://gist-it.appspot.com/http://github.com/johtani/nlp100-rust/blob/ccbdf272adbb5aa738dc73e78e3667e4300a49c1/src/chapter01/answer.rs?slice=2:12"></script>


<h3>01. 「パタトクカシーー」</h3>

<p>問題は<a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#sec01">こちら</a>。</p>

<script src="http://gist-it.appspot.com/http://github.com/johtani/nlp100-rust/blob/ccbdf272adbb5aa738dc73e78e3667e4300a49c1/src/chapter01/answer.rs?slice=14:24"></script>


<p>1文字ずつ取り出して、インデックスの番号が2で割ってあまりが0なら文字列に追加していくってのでやってみました。
（ブログ書いてるところで、<code>i in 0..char_array.len()</code>じゃなくて、<code>(i, x) in char_array.iter().enumerate()</code>に切り替えました。）
matchとか使って綺麗に書けたりするのかなぁ？</p>

<h3>02. 「パトカー」＋「タクシー」＝「パタトクカシーー」</h3>

<p>問題は<a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#sec02">こちら</a>。</p>

<script src="http://gist-it.appspot.com/http://github.com/johtani/nlp100-rust/blob/ccbdf272adbb5aa738dc73e78e3667e4300a49c1/src/chapter01/answer.rs?slice=26:56"></script>


<p>だいぶ思考錯誤してる感じがソースに現れてます。
とりあえず、両方の文字列をcharsの配列にして個々のイテレータを回しながら、next()の戻り値があれば追加していく感じにして、
終了条件が両方Noneを通ったらにしてるけど、、、
なんか、もっと綺麗にできないのかなぁ。。。
next()のタプル返す関数作って、とかでなんかできたりするかなぁ？</p>

<h3>gist-it</h3>

<p>関係ないですが、GitHubのコードを貼り付けるのに便利なサービスがあるみたいです。</p>

<p><a href="http://gist-it.appspot.com">http://gist-it.appspot.com</a></p>

<p>これほんと便利だな。行数指定もできるし。
説明するのが簡単だ。</p>

<p>とりあえず、今日はこの辺まで。なんか、いい知恵あれば教えてください！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[言語処理100本ノックはじめました(Rust)]]></title>
    <link href="http://blog.johtani.info/blog/2018/02/14/start-nlp100-with-rust/"/>
    <updated>2018-02-14T19:52:31+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/02/14/start-nlp100-with-rust</id>
    <content type="html"><![CDATA[<p>ども。新しいもの始めないと頭が退化する。。。ということで、こちら（
<a href="http://blog.katsyoshi.org/blog/2018/01/16/happy-new-year-and-new-language/">happy new year and new language - katsyoshiのめもみたいなもの</a>）のブログに触発されて、言語処理100本ノックをはじめてみました。</p>

<!-- more -->


<p><a href="http://www.cl.ecei.tohoku.ac.jp/nlp100/#ch1">言語処理100本ノック</a>とは、自然言語処理になるのかな、東北大学の研究室の先生が公開している言語処理に関する実践的な課題をベースにプログラミングなどのスキルを学んでいくための問題集です。
元々はPythonを対象とされているようですが、Rustでやってみようかと。
まぁ、先ほどあげたブログの二番煎じです。。。
ちなみに、インスパイアされた元のブログの方はRust book 2nd editionを読み終えたらしいですが、私はかじった程度です（ダメかも？）。</p>

<p>NLPもRustもかじった程度なので、苦戦しそうですが、ちょっとずつやっていこうかなと。
ということで、準備運動の第1章から始めようかと。
GitHubにちょっとずつあげていく予定です。
<a href="https://github.com/johtani/nlp100-rust">https://github.com/johtani/nlp100-rust</a></p>

<p>まぁ、まずは宣言のブログを書いてみただけです。
続いてなかったら、叱咤激励してください。叱咤だけかも？</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Analyze UIとKibanaのプラグインの作成方法（第2回）]]></title>
    <link href="http://blog.johtani.info/blog/2018/02/09/getting-started-template-kibana-plugin/"/>
    <updated>2018-02-09T18:17:37+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/02/09/getting-started-template-kibana-plugin</id>
    <content type="html"><![CDATA[<p>第1回では、<a href="https://github.com/johtani/analyze-api-ui-plugin">Analyze UIというプラグイン</a>の紹介をしました、ごく簡単にですが。</p>

<p>第2回では、Kibanaのプラグインの作成方法を順を追って見ていこうと思います。今回は、プラグインのプロジェクトの作り方を説明します。
どんなファイルがあるのかなどについては第3回で説明します（2018/02月現在の方法になります。残念ながら、Kibanaのプラグイン作成自体はまだExperimentalな話になっていますので、変更がある可能性があります）。</p>

<!-- more -->


<p>実はそれほど難しいというわけではありません。Kibanaのプラグインを作成するためのテンプレートが用意されています。<a href="https://github.com/elastic/template-kibana-plugin/">template-kiban-plugin</a>です。
テンプレートのリポジトリのREADMEに作業手順の記載があります。</p>

<ol>
<li>KibanaのリポジトリをClone、Checkout</li>
<li>Node.jsの環境を用意する</li>
<li>Kibanaを起動できるようにする</li>
<li>SAOのインストール</li>
<li>テンプレートによるプロジェクトファイルの生成</li>
</ol>


<p>順を追って説明します。
<code>PLUGIN_DEV_DIR</code>というディレクトリ配下で作業をしている想定になります。</p>

<h2>1. KibanaのリポジトリをClone、Checkout</h2>

<p>開発環境として、Kibanaが必要です。Kibanaのプラグインを作るので。
手順などは<a href="https://github.com/elastic/kibana/blob/6.2/CONTRIBUTING.md#contributing-code">KibanaのCONTRIBUTING.md</a>に記載があります。
ということで、まずはKibanaのリポジトリをCloneします。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd PLUGIN_DEV_DIR
</span><span class='line'>git clone git@github.com:elastic/kibana.git</span></code></pre></td></tr></table></div></figure>


<p>このままだと、masterブランチなので、開発したい対象のKibanaのバージョンのブランチもしくはタグをcloneします。今回は6.2.1向けということで、次のようになります。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git checkout v6.2.1</span></code></pre></td></tr></table></div></figure>


<p>これで、ソースが6.2.1向けになりました。</p>

<h2>2. Node.jsの環境を用意する</h2>

<p>Node.jsをインストールします。
Kibanaのリポジトリに<code>.node-version</code>というファイルがあります。
こちらにNode.jsのバージョンが記載されています。
Kibanaが使用しているNode.jsを利用できるようにします。ローカルでは<a href="https://github.com/creationix/nvm#installation">nvm</a>利用してインストールしました。後から、切り替えが可能だからです。
nvm自体のインストールについては<a href="https://github.com/creationix/nvm">nvmのサイト</a>をご覧ください。
nvmがインストールできたら、次のコマンドで、Kibanaが使用しているバージョンをインストールします。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd kibana
</span><span class='line'>nvm install "$(cat .node-version)"</span></code></pre></td></tr></table></div></figure>


<p>すでにnvmを利用している場合などは、Kibana起動時にKibanaのバージョンに合わせたNode.jsに切り替えるようにしてください。</p>

<h2>3. Kibanaを起動できるようにする</h2>

<p>Kibanaでは<a href="https://yarnpkg.com/lang/en/">yarn</a>というjavascript向けのパッケージマネージャーを利用して起動やビルドなどを行います。まずはyarnをインストールします。<a href="https://github.com/elastic/kibana/pull/15485">最近npmからyarnに切り替えた</a>ようです。
私はMacだったので、<a href="https://yarnpkg.com/en/docs/install">brewでインストール</a>しました。
インストールできたら、次のコマンドを実行します。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yarn</span></code></pre></td></tr></table></div></figure>


<p>これにより、package.jsonから必要なライブラリなどをダウンロードして来てくれます。
問題なければ「✨  Done in 439.30s.」というような表示がされます（結構時間かかりますね）。
では、Kibanaを起動できるか確認してみましょう。
さらに、Elasticsearchも起動してみます。
Kibanaのpackage.jsonの中にはElasticsearchを起動するためのスクリプトも用意されています。実際には<a href="https://gruntjs.com">grunt</a>を利用してタスクを実行しているようです。Elasticsearchの起動にはJavaが必要になります。
今回は6.2.1なので、JDK 8以降がインストールされている必要があります。
こちらはインストールされているものとします。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yarn elasticsearch</span></code></pre></td></tr></table></div></figure>


<p>で起動できます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt;&gt; Started 1 Elasticsearch nodes.</span></code></pre></td></tr></table></div></figure>


<p>という表示が出てればOKです。
次にKibanaです。別のTerminalを起動して、以下のコマンドで起動できます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yarn start</span></code></pre></td></tr></table></div></figure>


<p>これだけです。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>server    log   [06:58:56.930] [info][listening] Server running at http://localhost:5603</span></code></pre></td></tr></table></div></figure>


<p>この辺りが出てればKibanaのServerは起動済みです。また、Elasticsearchに接続できていれば、次のログが出ているはずです。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>server    log   [07:02:18.010] [info][status][plugin:elasticsearch@6.2.1] Status changed from red to green - Ready</span></code></pre></td></tr></table></div></figure>


<p>Elasticsearch接続用のKibanaのプラグインの状態になります。
これで、Kibanaの環境が整ったことが確認できました。
もちろん、Elasticsearchに関しては、yarnで起動せずに、tar.gzなどでダウンロードして来たElasticsearchを起動しておき、アクセスするといったことも可能です。プラグインなどをElasticsearchにもいれてテストしたい場合などはそちらの方が便利かもしれません。</p>

<h2>4. SAOのインストール</h2>

<p>では、一度、ElasticsearchとKibanaを停止しましょう。フォワグラウンドで起動しているので、それぞれのTerminalでCtrl+Cで停止できます。
Kibanaのプラグイン作成むけに、テンプレートが作られています。<a href="https://sao.js.org">sao.js</a>というGitHubのリポジトリやnpmのパッケージをテンプレートとして使うことができるツールを利用してプラグインのプロジェクト（リポジトリ）を作成します。
実際にテンプレートとなるリポジトリは<a href="https://github.com/elastic/template-kibana-plugin">template-kibana-plugin</a>になります。
まずはSaoのインストールです。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>npm install -g sao</span></code></pre></td></tr></table></div></figure>


<p>プラグインのテンプレートのページには上記のようにnpmを利用したインストール方法になっていますが、次のようにyarnでも可能です。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yarn global add sao</span></code></pre></td></tr></table></div></figure>


<p>これで、saoがインストールできました。</p>

<h2>5. テンプレートによるプロジェクトファイルの生成</h2>

<p>あとは、テンプレートを元にプロジェクトを作成します。
<code>PLUGIN_DEV_DIR</code>ディレクトリ配下に、kibanaと同じ階層で作成するプラグイン用のディレクトリを作成します。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir simple-sample-kibana-plugin</span></code></pre></td></tr></table></div></figure>


<p>以下のような構成になります。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>kibana                      simple-sample-kibana-plugin</span></code></pre></td></tr></table></div></figure>


<p>次にテンプレートを適用していきます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd simple-sample-kibana-plugin
</span><span class='line'>sao kibana-plugin@7.2.4</span></code></pre></td></tr></table></div></figure>


<p>2行目がsaoを利用してプロジェクトを作成しているコマンドになります。
すると、次のような質問が出て来ます。
これらに答えるとプロジェクトに必要なファイル（package.jsonやREADME.mdなど）に入力した情報を適用したものを作ってくれます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>? Name of your plugin?
</span><span class='line'>? Provide a short description
</span><span class='line'>? What Kibana version are you targeting?
</span><span class='line'>? Should an app component be generated?
</span><span class='line'>? Should translation files be generated?
</span><span class='line'>? Should an hack component be generated?
</span><span class='line'>? Should a server API be generated?</span></code></pre></td></tr></table></div></figure>


<p>実際に答えた内容はこちら。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>? Name of your plugin? simple-sample-kibana-plugin
</span><span class='line'>? Provide a short description Sample plugin for explaining how to make kibana app
</span><span class='line'>? What Kibana version are you targeting? 6.2.1
</span><span class='line'>? Should an app component be generated? Yes
</span><span class='line'>? Should translation files be generated? Yes
</span><span class='line'>? Should an hack component be generated? Yes
</span><span class='line'>? Should a server API be generated? Yes</span></code></pre></td></tr></table></div></figure>


<p>プラグインの名前などは、ディレクトリ名と同じものを入力補完してくれているので、そのままEnterでもOKです。
Descriptionについてはわかりやすいものを入力しましょう。
バージョンは、先ほどのKibanaのリポジトリに合わせて、<code>6.2.1</code>にしてあります。
あとは、作るプラグインの種類に応じて、必要なコンポーネントを作るかどうかの質問にYes/Noで答えます。
今回はサンプルの説明ということもあるので、全てYesで答えました。
ちなみに、私が実際に作成した<a href="https://github.com/johtani/analyze-api-ui-plugin/">analyze-api-ui-plugin</a>では、<code>app</code>と<code>translation</code>と<code>server</code>の3つを作成しました。
ただし、<code>translation</code>については現在はテンプレートで作成したままのファイルが入っており、実際には利用してないです。</p>

<p>完了したら、プラグインのサンプル入りのプロジェクトが完成です。
もう一度、Elasticsearchを立ち上げて、プラグインのプロジェクトからKibanaを起動してアクセスしてみます。まずは、<code>PLUGIN_DEV_DIR/kibana</code>ディレクトリの下で、Elasticsearchを起動します。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yarn elasticsearch</span></code></pre></td></tr></table></div></figure>


<p>次に、<code>PLUGIN_DEV_DIR/simple-sample-kibana-plugin</code>ディレクトリの下で、以下のコマンドを実行し、プラグインが入った状態のKibanaを起動します。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yarn start</span></code></pre></td></tr></table></div></figure>


<p>問題なく起動すれば、ブラウザでアクセスすると次のような画面が表示されるはずです。</p>

<p><img src="http://blog.johtani.info/images/entries/20180214/sample_start.jpg" width="800"></p>

<p>左側にメニューが1つ増えています。
クリックすると、上記画像のような画面が表示されるはずです。</p>

<p>これで、カスタムプラグインの開発ができる環境ができました！
次回は、プロジェクトのディレクトリ構成や、どんなツールが内部で使用されてデータのやり取りが行われているかについて説明します。お楽しみに。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Analyze UIとKibanaのプラグインの作成方法（第1回）]]></title>
    <link href="http://blog.johtani.info/blog/2018/01/19/how-to-make-kibana-plugin-example-analysis-ui/"/>
    <updated>2018-01-19T15:36:46+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/01/19/how-to-make-kibana-plugin-example-analysis-ui</id>
    <content type="html"><![CDATA[<p>あけましておめでとうございます。今年はサボりがちだったブログをちょっとずつ復活させようかと。
ということで、第1弾として、昨年少し作っていたKibanaのプラグインを何度かに分けて紹介したいと思います。</p>

<p>今回は<a href="https://github.com/johtani/analyze-api-ui-plugin">Analyze UIというプラグイン</a>の紹介です。</p>

<!-- more -->


<p>今回はインストール方法と簡単な機能紹介です。
細かな紹介は個別にやりたいと思います。</p>

<h3>Analyze UI pluginとは？</h3>

<p>Elasticsearchの<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html"><code>_analyze</code>というAPI</a>(個人的に好きなAPIです)をご存知でしょうか？</p>

<p>Elasticsearchは全文検索エンジンで、データの検索には<a href="https://ja.wikipedia.org/wiki/%E8%BB%A2%E7%BD%AE%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9">転置インデックス</a>というものを使用します。
Elasticsearchにデータを登録する際に、<code>text</code>型のデータの場合、この転置インデックスのキーとなる単語を決める処理のことを<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html">Analysis</a>と呼びます（Analysisの詳細については割愛します。後日説明するかも？）。
このAnalysisの処理が、入力されたデータの文字列に対してどのように行われて、結果としてどんな単語がキーとして用いられているかを確認できる機能が<code>_analyze</code> APIです。検索で単語がうまくヒットしないな？とか、なんで、こんなので検索結果に出てくるんだ？といった場合、このAPIを利用すると、どのような単語で転置インデックスが作られているかがわかるので、検索にヒットしない/する理由を見つけることができます。</p>

<p>Elasticsearchの便利な点はRESTfulなAPI＋JSONでやりとりができる点なのですが、<code>_analyze</code> APIの結果をJSONで受け取っても、見るのにちょっと苦労します。。。こんな感じ。</p>

<p>リクエスト：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>POST _analyze
</span><span class='line'>{
</span><span class='line'>  "analyzer": "kuromoji",
</span><span class='line'>  "text": "今年はブログをいっぱい書きますよ！"
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>レスポンス：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>{
</span><span class='line'>  "tokens": [
</span><span class='line'>    {
</span><span class='line'>      "token": "今年",
</span><span class='line'>      "start_offset": 0,
</span><span class='line'>      "end_offset": 2,
</span><span class='line'>      "type": "word",
</span><span class='line'>      "position": 0
</span><span class='line'>    },
</span><span class='line'>    {
</span><span class='line'>      "token": "ブログ",
</span><span class='line'>      "start_offset": 3,
</span><span class='line'>      "end_offset": 6,
</span><span class='line'>      "type": "word",
</span><span class='line'>      "position": 2
</span><span class='line'>    },
</span><span class='line'>    {
</span><span class='line'>      "token": "いっぱい",
</span><span class='line'>      "start_offset": 7,
</span><span class='line'>      "end_offset": 11,
</span><span class='line'>      "type": "word",
</span><span class='line'>      "position": 4
</span><span class='line'>    },
</span><span class='line'>    {
</span><span class='line'>      "token": "書く",
</span><span class='line'>      "start_offset": 11,
</span><span class='line'>      "end_offset": 13,
</span><span class='line'>      "type": "word",
</span><span class='line'>      "position": 5
</span><span class='line'>    }
</span><span class='line'>  ]
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>このくらいの量であればまだなんとかなりますが、文章が長くなると辛いですよね。</p>

<p>ということで、GUIがあると便利だろうなぁと。で、作ってみましたというのが今日紹介するKibana用のAnalyze UIプラグインです。
こんな感じで、Kibanaのアプリの一部として動作しブラウザ上で、入力テキストの文字列がどのようにanalyzeされて、単語になるかがわかります。</p>

<p><img src="http://blog.johtani.info/images/entries/20180119/analyze_ui_sample_1.jpg" width="800"></p>

<p>（先ほどのAPIのサンプルと同じものを画面で入力した結果になります）。</p>

<h3>インストール方法</h3>

<p>現時点の最新版Kibana（6.1.2）に対応しています。
Kibanaのディレクトリで<code>kibana-plugin</code>コマンドを利用してインストールします。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>./bin/kibana-plugin install https://github.com/johtani/analyze-api-ui-plugin/releases/download/6.1.2/analyze-api-ui-plugin-6.1.2.zip</span></code></pre></td></tr></table></div></figure>


<p>これだけです。
で、Kibanaを起動していただくと、左のメニューに「Analyze UI」という項目が増えています。</p>

<p><img src="http://blog.johtani.info/images/entries/20180119/kibana_menu.jpg" width="400"></p>

<p>クリックすると、Analyze UIが表示されます。</p>

<p>初期画面は入力された文字を特定のAnalyzerで処理した場合の結果を見るための画面です。綱目の説明は画像をご覧ください。</p>

<p><img src="http://blog.johtani.info/images/entries/20180119/intro_analyze_ui_1.jpg" width="800"></p>

<p>先ほどのJSONよりは見やすくなったかと思います。
そのほかにもいくつか画面や機能があるのですが、今日はこの辺りで。
「<code>_analyze</code> API便利なんだけど、JSONは。。。」とか「検索うまくできないなぁなんでだろう？」と思っている方は、ぜひ試して見ていただければと。
問題点などありましたら、GitHubのIssueを登録してください。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[今年の振り返りと来年の抱負（2017）]]></title>
    <link href="http://blog.johtani.info/blog/2017/12/31/looking-back-2017/"/>
    <updated>2017-12-31T21:30:43+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/12/31/looking-back-2017</id>
    <content type="html"><![CDATA[<p>今年は紅白を見ながら書いてます。
今年はいろんなところに出張に行ったなぁ。</p>

<!-- more -->


<h2>振り返り（2016年に書いた抱負から）</h2>

<p>まずは去年の抱負を元に。</p>

<h5>もちろん英語の継続</h5>

<p>もちろん継続してます。英会話しながら海外TVドラマや映画を見てます。
ちょっとずつ英語字幕でも見ようとしてますが、まだまだだなぁ。
あと、TOEICを受けてないんで、それは受けないと。
見たドラマはこの辺です。</p>

<ul>
<li>ER</li>
<li>ウォーキング・デッド</li>
<li>Agent of Shield</li>
<li>SUITS</li>
<li>Mr.Robot(いまいち話の展開についていけなかった)</li>
</ul>


<h5>継続的にイベントに登壇</h5>

<p>OSCに今年もブース出してセッション持ってました。
勉強会ももちろんやりました。
あと、外部のカンファレンス（FOSS4G、BigData Analytics、db tech showcaseなど）や
勉強会(monitoring勉強会やCA.ioなど)にも登壇させていただきました。
もっと外部から読んでいただいたり、CfPに応募して通過できるようにしないとなぁ。</p>

<h5>もっと開発＆ブログ</h5>

<p>ブログはすみません。。。来年頑張ります。。。
ブログの代わりに<a href="https://www.amazon.co.jp/dp/477419218X?tag=johtani-22&amp;camp=243&amp;creative=1615&amp;linkCode=as1&amp;creativeASIN=477419218X&amp;adid=1MB8R50WWEJ3JC8VXN60&amp;">書籍</a>を出せました。データ分析基盤系の書籍になるので、興味のある方はのぞいて見ていただければ。</p>

<p>開発はちょっとやってます。今年後半はKibanaのプラグインとかをちょっと書いてました。
Ingest-CSVもちょこちょこバージョンアップに追従してたりします。</p>

<h5>サポートエンジニア獲得！</h5>

<p>獲得しました！（自分の成果かどうかはわかりませんが。。。）
今は3名体制でサポートしてもらってます。おかげさまでだいぶサポートする機会が減ってきました。
開発は<a href="https://www.elastic.co/about/careers">世界各地どこでも募集中</a>だったりしますので、ぜひ連絡いただければと。</p>

<h5>個人的な検索勉強会の再開</h5>

<p>再開しました。<a href="http://amzn.to/2CmYcw9">検索エンジン自作入門</a>を知人と隔週くらいで読んでます。読んでるだけではあれなんで、実装もしてたり。全然違う言語でトライして見ようと思ったのでRustで書き始めてます。まずは、単純なところからと思ったんですが、
Rustの書き方の違いにだいぶ戸惑ってます。。。</p>

<h2>振り返り(今年あったできごと)</h2>

<p>ここからは今年の出来事を。</p>

<ul>
<li>初アメリカで釣り</li>
<li>Nintendo Switch!</li>
<li>初Japanチームオフサイト</li>
<li>チーム変更</li>
<li>初Berlin Buzzword!</li>
<li>母校（大学）訪問</li>
<li>Kibanaプラグイン開発</li>
</ul>


<p>今年も初モノがちらほらとありますね。
今年もカレンダー振り返ってたら「え？これ今年だったの？」ってのがちらほらありました。。。</p>

<p>アメリカで釣りやりました。自社のカンファレンスElastic{ON}のあとに、エンジニアが集まるミーティングがあるんですが、そこで1日Fun Dayがあって、そこで釣りをやりました。
魚群探知機とかで魚探すんですね、最近のは。2、3匹釣ったので非常に楽しかったです。
来年はスノーシューにチャレンジする予定。</p>

<p>Nintendo Switch買って、ゼルダやりました。今はイカやってます。
イカ欲はちょっと減ってるかもなぁ、1に比べると。
あとは、子供に買ったマリオやったりしてるかな。</p>

<p>ここ10年くらい行きたいと思っていたカンファレンス、<a href="https://berlinbuzzwords.de">Berlin Buzzword</a>に行ってきました！
これが今年一番嬉しかった出来事です。Luceneコミッターの方々にも会えたし。特にPoliceman JenkinsのUweさんに会えたのが本当に感激でした。。。
来年も行けるといいなぁ。。。</p>

<p>今年も出張が多めだったのであちこち飛び回ってたなぁ。
そんな飛び回っている中で、故郷である広島（出身地？）に出張で行ったので、母校に顔を出してきました。
変わってなかった。。。自分が一期生なので、自分が入学した時はまだクレーンとか立ってるような新校舎だったんだけど、それが20年くらい経て、だいぶ古くなってました。。。
広島市内は港近くに高速道路とか出ててだいぶ様変わりしてました。
ただ、小学校も高校も変わってなかったなぁ。久々に高校の同級生にも会えたし。
また、機会があればぜひ行きたいなと。帰省する場所ではなくなったので、行く機会がないんですよね。。。</p>

<p>開発もちょっとやってます。Kibanaのプラグインに挑戦して見てます。
いまだにJavaScriptは苦手なんですが。。。
ちょっとずつ改良して、ひょっとすると本体とかに取り込めるかな？
あとは、今年始めたRustをちょっとずつ継続して行きたいなと。</p>

<h2>来年の抱負</h2>

<p>最後は来年の抱負を。</p>

<ul>
<li>もっと英語の継続＆TOEIC</li>
<li>継続的にイベントに登壇</li>
<li>CfPもっと出すぞ！</li>
<li>もっとブログ！</li>
<li>雑誌やWeb系雑誌で記事を。</li>
<li>コミュニティを別の方法で盛り上げ</li>
<li>Elasticsearchなど検索系の開発にも参加</li>
</ul>


<p>英語はもちろんですね。今年は12月の自社イベントに合わせて多くのAPJチームの人が来て、
チームで会話できたし、もっと英語やらないとなぁと。前よりもちょっとは喋れるようになった気がしてます（気がしてるだけで、喋れてるかどうかは不明）。あとは、TOEIC受けて、実力チェックしてみないとなぁ。</p>

<p>イベント登壇はまぁ、DevRelですから、一応。
来年もとりあえず、3月までは毎月どこかでブース出してます。
Ask Me Anything的なブースの出し方を今年はしてみようかなと思ってるので、
ちょっと使い始めたけど、この辺よくわからないと思ってる方、ぜひ質問しに来てください。
ブース出すだけじゃなくて、スピーカーとしていろんな場所で喋れるようにしないとなぁと。
もっと幅広く知ってもらえるように雑誌とかで連載できるようにしたいなぁと思ってます。
また、日本語の入り口の情報を増やすためにブログも書かないとなぁ。</p>

<p>勉強会も継続しますが、別の方法でも盛り上げて行きたいなぁと。
勉強会はどうしても聞く人が多くて、ユーザーの間での交流や情報交換とまでは行ってない気がするし、<a href="http://discuss.elastic.co">discuss.elastic.co</a>というフォーラムで質問は増えて来てるけど、もう少し交流しやすい場があると使ってもらえるかなぁ？と思っていたり。
何かおすすめとかあれば、連絡ください。
meetup.comの勉強会のページにも掲示板はついてるんだけど交流しにくそうだし。</p>

<p>来年は自分が最も興味のある検索系の開発にも参加したいなぁと。
Elasticsearchをちょっとずつ時間見つけてやってたりはしますが、もう少し首を突っ込んで行きたいなぁと。<a href="http://blog.johtani.info/blog/2017/11/10/welcome-swiftype/">Swiftype</a>もジョインしたし。もっと検索やって行きたい気持ちが強いので。</p>

<p>さて、ということで、今年もあと1時間なくなりました。
今年も様々な面で色々な方々に助けていただけました。本当にお世話になりました。
この場を借りてお礼申し上げます。</p>

<p>来年ももちろん、色々な方に助けてもらうと思いますが、よろしくお願いいたします！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2018年のElasticは？]]></title>
    <link href="http://blog.johtani.info/blog/2017/12/24/elastic-2018/"/>
    <updated>2017-12-24T23:10:16+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/12/24/elastic-2018</id>
    <content type="html"><![CDATA[<p>Merry Christmas!
<a href="https://qiita.com/advent-calendar/2017/elasticsearch">Elastic Stack Advent Calendar 2017</a>の24日目の記事になります。</p>

<p>ちょっとですが、2018年のElasticについて書いてみようかと思います。</p>

<!-- more -->


<h2>イベント</h2>

<p>いくつか出展が決まっているイベントがあるのでまずは宣伝を。</p>

<h4>OSC Osaka 2018</h4>

<p>まずは、1月25日、26日に<a href="https://www.ospn.jp/osc2018-osaka/">OSC Osaka 2018</a>に出展し、話をします。参加者がいそうであれば、25日や26日の夜に勉強会もありかなぁと思っています。
セッションでは入門的な話をする予定です。ブースにいますので、色々質問がある関西の方はぜひご参加ください。</p>

<h4>Developer Summit 2018</h4>

<p>2月15日、16日は<a href="http://event.shoeisha.jp/devsumi/20180215">Developer Summit 2018</a>に出展します。
こちらでもブースにいますので、AMA（Ask Me Anything）的に使っていただくのもいいかなと。
デブサミに参加される方はぜひお立ち寄りください。</p>

<h4>Manabiya</h4>

<p>3月23日、24日は<a href="https://manabiya.tech">Manabiya</a>に出展します。
こちらでもAMAのつもりでブースを出す予定です。質問がある方はぜひお立ち寄りください。
こちらのイベントは初めての開催になるようなので、どんなイベントになるか楽しみにしています。</p>

<p>イベント回りはこの辺りで。
また、1月末に勉強会を予定しています。決まり次第また<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/">Meetup.com</a>の方々にメールを出す予定です。</p>

<h2>Elastic Stackの2018年は？</h2>

<h4>Canvas!</h4>

<p>昨年のElastic{ON}でみなさんをCanvasがリリースされるかなぁと。
現在、みなさんにテストしてもらえるように<a href="http://canvas.elastic.co">canvas.elastic.co</a>というサイトを公開中で、実際にインストールして試すことができるようになっています。
ぜひ、触って、全く新しいUIを体験して見てください。</p>

<h4>SQL?</h4>

<p>こちらも昨年のElastic{ON}でみなさんから反響があったものです。
もう直ぐでてくるのではないかなぁと。</p>

<h4>その他は？</h4>

<p>いくつか面白そうで、取り込み済みのものをピックアップしておきます。</p>

<ul>
<li><a href="https://github.com/elastic/elasticsearch/pull/27478">Add ranking evaluation API</a>

<ul>
<li>検索クエリなどに対して検索結果のランクのクオリティを評価するためのAPIの追加（7.0予定）</li>
</ul>
</li>
<li>JDK9サポート？

<ul>
<li>6.2でサポートされそうです。が、<a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/setup.html#jvm-version">LTSのJDK8が推奨のままの予定</a>です。</li>
</ul>
</li>
<li>High-level REST ClientでいくつかAPIが追加

<ul>
<li><a href="https://github.com/elastic/elasticsearch/pull/27574%E3%80%81https://github.com/elastic/elasticsearch/pull/27351">https://github.com/elastic/elasticsearch/pull/27574%E3%80%81https://github.com/elastic/elasticsearch/pull/27351</a></li>
</ul>
</li>
<li>APM正式リリース？

<ul>
<li><a href="https://www.elastic.co/jp/solutions/apm">ベータ版</a>がリリースされているので、秒読み段階？</li>
</ul>
</li>
</ul>


<h2>ということで</h2>

<p>より詳しく知りたい方は、サンフランシスコで開催される<a href="https://www.elastic.co/elasticon/conf/2018/sf">Elastic{ON} 2018</a>に参加するのが一番です！（ステマ）
私も参加予定ですので、ぜひ、現地でお会いし、色々な情報をゲットしましょう。</p>

<p>明日で、今年のAdvent Calendarも最後です。micci184さんの記事を楽しみにしましょう！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2017年のElastic StackとElastic]]></title>
    <link href="http://blog.johtani.info/blog/2017/12/01/whats-happen-at-elastic-in-2017/"/>
    <updated>2017-12-01T00:00:00+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/12/01/whats-happen-at-elastic-in-2017</id>
    <content type="html"><![CDATA[<p><a href="https://qiita.com/advent-calendar/2017/elasticsearch">Elastic stack (Elasticsearch) Advent Calendar 2017</a>の1日目の記事になります。</p>

<p>まだ、1ヶ月を残していますが、簡単に今年起こったことを振り返ってみようかと思います。思った以上に色々ありましたね。。。</p>

<!-- more -->


<h3>Elastic Stack 5.2.0リリース (1月)</h3>

<p><a href="https://www.elastic.co/jp/blog/elastic-stack-5-2-0-released">リリース記事はこちら</a></p>

<p>HeatmapがKibanaで追加されたり、Heartbeatがベータですが追加されました。
個人的には、Terms aggregationの<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.2/search-aggregations-bucket-terms-aggregation.html#_filtering_values_with_partitions">Filtering Valuesによるパーティション</a>が便利になったと思います。Terms Aggsでページングに似たことができるようになりました。</p>

<h3>Elastic{ON}17開催 (3月)</h3>

<p>第3回目のユーザカンファレンスが開催されました。
バレーダンサーの踊りから始まったキーノート、様々なユーザ企業によるユースケース発表などいろいろありました。
<a href="https://www.elastic.co/elasticon/conf/2017/sf">セッションはこちらのサイトから</a>から録画を見ることができます。
<a href="https://www.elastic.co/elasticon/conf/2017/sf/elasticsearch-sql">SQL for Elasticsearch</a>やAwardが目を引いたと思います。SQL対応まだ出てきていないですが、もうすぐじゃないかと！</p>

<h3>Elastic Stack 5.3.0リリース (3月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-5-3-0-released">リリース記事はこちら</a></p>

<p><a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-modules-overview.html">Filebeat module</a>が導入され、ログファイルを取り込んでKibanaで可視化するまでの手順がより簡単になりました。Elasticの目指しているものの一つに、シンプルな使い方、簡単にはじめられることといったものがあります。KibanaのTimepickerもより便利になったのも、このバージョンからです。</p>

<h3>ShayがCEOに (5月)</h3>

<p>2月にすでに発表されていましたが、Elasticsearchの生みの親のShay BanonがCEOに正式に就任しました。CEOになってさらに、精力的に様々なことをやっていて、本当にすごいなと思います。</p>

<h3>Elastic Stack 5.4.0、6.0.0-alpha1リリース (5月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-5-4-0-released">5.4.0リリース記事はこちら</a>、<a href="https://www.elastic.co/blog/elastic-stack-6-0-0-alpha1-released">6.0.0-alpha1リリース記事はこちら</a></p>

<p>5.4.0は節目になるリリースでした。Machine Learningがベータリリースとして、X-Packに追加されましたし、ElasticsearchではCross Cluster Searchの改善が進みました。LogstashではPersistent QueueがGAになりましたし、KibanaにはTime Series Visual BuilderやEvent Contextなどが追加されますます使いやすくなりました。</p>

<p>また、6.0.0のalpha版も同時にリリースされ、様々な方からのフィードバックが集まり始めました。</p>

<h3>Elastic Cloud Enterprise GAリリース (5月)</h3>

<p>Elastic Cloudのバックエンドの技術を製品に採用したものになります。
多くのElasticsearchクラスタを管理しないといけない方には朗報でした。</p>

<h3>OpbeatがJoin (6月)</h3>

<p><a href="https://www.elastic.co/blog/welcome-opbeat-to-the-elastic-family">Opbeatチームがジョイン</a>したのが6月です。Elastic StackがAPM(Application Performance Monitoring)でも活躍することになりそうです。APMの仕組みとしては、APM Agentをアプリ側に配置し、APM Serverへデータを送信し、Elasticsearchに保存、Kibanaで可視化するという流れになります。</p>

<h3>Elastic Stack 5.5.0リリース (7月)</h3>

<p><a href="https://www.elastic.co/blog/kibana-5-5-0-released">リリース記事はこちら</a></p>

<p>Machime LearningがGAリリースになったのが5.5.0です。色々な方から質問を受けました。それ以外にも、ElasticsearchのWindows MSI InstallerやKibanaのFilter editorなどが追加されました。Filter editorはこれまで検索条件を記述するのが難しいと感じていたKibanaユーザにとても喜んでもらえたものじゃないかなと。
GrokDebuggerが導入されたのもこのタイミングです。</p>

<h3>Elastic Stack 5.6.0リリース (9月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-5-6-0-released">リリース記事はこちら</a></p>

<p>5系最後のマイナーリリースであり、6へのアップグレードが楽になる様々な仕組みが用意されたのがこのバージョンです。ElasticsearchのJava High level REST clientが導入されたのもこのバージョンです。本当に様々な機能が次のメジャーバージョンとの互換性のために組み込まれています。。。</p>

<h3>Elastic Cloud on GCP (9月)</h3>

<p><a href="https://www.elastic.co/blog/announcing-the-ga-of-elastic-cloud-hosted-elasticsearch-on-google-cloud-platform-gcp">リリース記事はこちら</a></p>

<p>これまで、AWS上のみで展開していたElastic CloudがGCP上でも展開されることになりました。残念ながら、日本リージョンはまだありませんが、問い合わせなどが増えれば今後サポートされる可能性が高くなると思います！</p>

<h3>Elastic APM alpha (9月)</h3>

<p><a href="https://www.elastic.co/guide/en/apm/get-started/current/overview.html">リリース記事はこちら</a></p>

<p>OpbeatチームによりElastic StackのAPMがAlphaですがリリースされました。APMがOpen Sourceで利用できるんです！Agentがもっと増えてくると色々なことに使えるようになると思います。ぜひAgentを作成してみてください！</p>

<h3>Elastic Stack 6.0.0リリース (11月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-6-0-0-released">リリース記事はこちら</a></p>

<p>待ちに待った6.0.0のリリースです。<a href="https://events.elastic.co/6-0-elastic-stack-jp">新機能については本日(12/1)の昼に行われるウェビナーをご覧ください！</a></p>

<h3>SwiftypeがJoin (11月)</h3>

<p><a href="https://www.elastic.co/jp/about/press/elastic-acquires-saas-site-search-leader-swiftype">ニュースリリースはこちら</a></p>

<p>Swiftypeと呼ばれる検索のSaaSを提供している会社がジョインしました。
個人的には今年一番嬉しいニュースです。やはり、検索が好きなので。
簡単に<a href="http://blog.johtani.info/blog/2017/11/10/welcome-swiftype/">Site Searchを構築できる仕組み</a>は非常に面白いものです。
興味のある方は、ぜひ触ってみてください。日本語固有の機能などはまだないので、今後関わっていければなーと。</p>

<h3>Elastic{ON} Tour Tokyo開催 (12月)</h3>

<p>まだ開催前ですが、今年も<a href="https://www.elastic.co/elasticon/tour/2017/tokyo">東京で1dayイベントを開催</a>します。
残念ながら、もうSold outなので、キャンセル待ちになってしまっているみたいですが。私もスピーカーとして喋りますし、AMAブースにも立っています。
参加される方はぜひ声をかけていただければと思います。</p>

<h4>OSC 2017.Enterprise (12月)</h4>

<p>オープンソースカンファレンスで今年も様々な都市に出張しました。
今年の締めくくりということで、<a href="https://www.ospn.jp/osc2017.enterprise/">12/8に渋谷で開催されるカンファレンス</a>に出展します。時間のある方は、ぜひブースに遊びに来てください。入門者向けのセッションもあるので、こちらもお待ちしております。</p>

<h3>まとめ</h3>

<p>超駆け足ですが、今年を振り返ってみました。
今年もいろんなことがありました。書くのが大変だったw。
OSCなどイベントで声をかけていただいた皆様、ありがとうございました。</p>

<p>さて、<a href="https://qiita.com/advent-calendar/2017/elasticsearch">Elastic Stack Advent Calendar 2017</a>は始まったばかりです。これからの記事を楽しみにしています！</p>

<h4>ということで、</h4>

<p>次は<a href="https://qiita.com/aeroastro">aeroastroさん</a>の「Elasticsearchのインデックスを本当の意味で無停止再構築する方法」（<a href="https://qiita.com/advent-calendar/2017/elasticsearch">Advent Calendarのページはこちら</a>）になります、お楽しみに！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Swiftypeがジョインしたので触ってみました]]></title>
    <link href="http://blog.johtani.info/blog/2017/11/10/welcome-swiftype/"/>
    <updated>2017-11-10T11:14:49+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/11/10/welcome-swiftype</id>
    <content type="html"><![CDATA[<h1>Swiftypeでサイト内検索？</h1>

<p>プレスリリース：<a href="https://www.elastic.co/jp/about/press/elastic-acquires-saas-site-search-leader-swiftype">Elasticがサイト内検索サービス最大手のSwiftypeを買収</a>が出ましたが、SwiftypeチームがElasticにジョインしました！</p>

<h2>自分のブログ検索に導入してみる？</h2>

<p><a href="https://swiftype.com/">Swiftype</a>はSite Searchをサービスとして提供しています。
実際に指定したサイトのデータをクロールして、インデキシングし、検索できるようになります。
ものは試しということで、自分のブログを登録してみました。検索窓はつけてないですが。
14日間のFree trialがあるのでそちらで試してみましょう。
検索窓はデモとか作れたらかな。</p>

<!-- more -->


<h2>ということで、Free trialへ</h2>

<p>まずはユーザ登録です。Googleのアカウントと連携するか、Swiftypeにメルアドを登録するかが選択できます。
登録できたら、次にどちらのプロダクトを使うかという選択画面が出てきます。
今回はサイト検索して見たいので、「Site Search」の「START FREE TRIAL」をクリックします。</p>

<h2>Engineの指定</h2>

<p>Web Crawlerを利用するか、独自にSwiftypeのAPIを利用してデータを登録するかを選択します。</p>

<p><img src="http://blog.johtani.info/images/entries/20171110/01_Create_Search_Engine___Swiftype.jpg" title="" ></p>

<p>今回は、お手軽な方のCrawlerを選択します。
すると次に、クロールしたいURLの指定画面が出てきます。</p>

<p><img src="http://blog.johtani.info/images/entries/20171110/02_Create_Crawler-based_Search_Engine___Swiftype.jpg" title="" ></p>

<p>今回は自分のブログなので、&#8217;<a href="http://blog.johtani.info">http://blog.johtani.info</a>&#8216;を指定します。</p>

<p><img src="http://blog.johtani.info/images/entries/20171110/03_Create_Crawler-based_Search_Engine___Swiftype.jpg" title="" ></p>

<p>で少し待つと、URLのチェック（存在チェックとか、接続チェックとか）が終わり、今回作成するEngineに名前をつける画面が出てきます。
「My Blog search」という名前にしてみました。</p>

<p><img src="http://blog.johtani.info/images/entries/20171110/04_https___app_swiftype_com_engines_my-blog-search_precrawls_166127_settings.jpg" title="" ></p>

<p>sitemapがあるかどうかをCrawlerがチェックしています。
私のBlogはOctopressでできていて、sitemap.xmlも作ってくれているので、これを元にCrawlerはクロールをしてくれます。そのほかにも<a href="https://swiftype.com/documentation/crawler">RSSやAtomサポートもあるみたいですね</a>。
「COMPLETE SETUP」を押すと、Engineの管理画面が出てきます。</p>

<p><img src="http://blog.johtani.info/images/entries/20171110/05_My_Blog_search_Overview___Swiftype.jpg" title="" ></p>

<p>「CRAWLING」という表示が出ています。クロールしている最中です。これが終われば、「PREVIEW」に代わり、検索できる準備ができたことになります。
実際にPREVIEWして見ると、次のような検索ができるようになります。</p>

<p><img src="http://blog.johtani.info/images/entries/20171110/06_My_Blog_search_Overview___Swiftype_PREVIEW.jpg" title="" ></p>

<p>そのほかにはWeightの調整画面などもありますね。フィールド毎に重み付けを変えて見たりもできます。</p>

<p><img src="http://blog.johtani.info/images/entries/20171110/07_Weights___Swiftype.jpg" title="" ></p>

<p>日本語独自のAnalyzerなどはまだないので、そのあたりができてくるともっと便利になりそうです。
とりあえず、気になる方は触って見てはいかがでしょうか？
個人的は検索に関するサービスが出てきたのですごく楽しみにしています！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[データ分析基盤構築入門 を一部執筆しました。]]></title>
    <link href="http://blog.johtani.info/blog/2017/09/21/release-intro-logging-analysis-system/"/>
    <updated>2017-09-21T10:02:30+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/09/21/release-intro-logging-analysis-system</id>
    <content type="html"><![CDATA[<p>久々に執筆しました。といっても、<a href="http://blog.johtani.info/blog/2014/08/04/release-magazine-book-of-log-aggs-and-viz/">以前の書籍</a>の更新版です。
まぁ、更新版といっても、私以外の方々は結構な量を書き直しor新規書き起こしされてますが。。。</p>

<p>ということで、みなさん「買って」から感想をいただけるとうれしいです！（以下の画像でAmazonにジャンプできます！Kindle版も発売中です。）</p>

<p><a target="_blank"  href="https://www.amazon.co.jp/gp/product/477419218X/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=477419218X&linkCode=as2&tag=johtani-22&linkId=f7cbe8130343ea340b18b53eba20d4b7"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=477419218X&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=johtani-22" ></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=johtani-22&l=am2&o=9&a=477419218X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>

<!-- more -->


<p>今回もElasticsearchの章を担当しました。
5.4ベースで書きましたが、ちょっとずつ6でどう変わるかなども記載してあります。
また、付録ではLogstashやBeatsにもちょっと触れています。
また、自分が一番好きなKibanaの機能であるDev ToolsのConsoleについても記載してあります。こちらも合わせて目を通していただければと。</p>

<p>みなさんのフィードバック（ツイート、ブログ、Amazonのコメントなどなど）をお待ちしております！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[検索座談会ってのをやってみた]]></title>
    <link href="http://blog.johtani.info/blog/2017/05/25/search-meetup/"/>
    <updated>2017-05-25T00:24:13+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/05/25/search-meetup</id>
    <content type="html"><![CDATA[<p>久々のブログ。
Elasticsearch勉強会を主催してますが、
プロダクトを超えて、検索で共通してある課題とか、悩みとか、あるかなぁと。
その辺りを話す場所を考えてみるのいいかもと思い、検索座談会ってのを5人でやってみた。</p>

<!-- more -->


<p>とりあえず、初めてなので、5名ほどで。プロダクトはかぶってない感じでした。</p>

<h3>話した議題はこの辺り。</h3>

<ul>
<li>形態素解析の辞書は何を使ってる？有償のもの？

<ul>
<li>そもそも形態素解析？</li>
</ul>
</li>
<li>辞書の更新とかは？

<ul>
<li>シノニムってどうしてる？</li>
</ul>
</li>
<li>サジェストとかのデータはどう作ってる？どうしてる？

<ul>
<li>検索ログとかから作ってる？</li>
</ul>
</li>
<li>検索結果のランキングって検索結果だけで決めるの？

<ul>
<li>検索漏れとかキーワードのミスマッチとかどうしてる？</li>
</ul>
</li>
</ul>


<h3>今後話したい内容はこの辺かな？</h3>

<ul>
<li>緯度経度系の検索</li>
<li>画像検索、音声検索</li>
<li>検索のキーワードの調査とかしてる人とかいるかな？</li>
<li>どんな機能が欲しい？</li>
<li>前処理としてはどんなことをしてる？</li>
</ul>


<p>このあとどうしていくかはまだ考え中。知り合いを捕まえて、どんなことしてるかを聞きにいくのもいいし、議題みたいなことを決めて、それを話してくれそうな人にコンタクトして議論するのもありかなぁ。
普通の勉強会みたいなのにするかもしれないし。
とりあえず、どのくらい興味を持ってる人がいるのかがわからないので。。。</p>

<p>もちろん、Elasticsearch勉強会は別でやっていきますよ。</p>
]]></content>
  </entry>
  
</feed>
