<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: manifoldcf | @johtaniの日記 2nd]]></title>
  <link href="http://blog.johtani.info/blog/categories/manifoldcf/atom.xml" rel="self"/>
  <link href="http://blog.johtani.info/"/>
  <updated>2016-06-30T12:39:30+09:00</updated>
  <id>http://blog.johtani.info/</id>
  <author>
    <name><![CDATA[johtani]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[第12回Solr勉強会を主催しました。#SolrJP]]></title>
    <link href="http://blog.johtani.info/blog/2013/10/10/solr-meetup-memo/"/>
    <updated>2013-10-10T11:35:00+09:00</updated>
    <id>http://blog.johtani.info/blog/2013/10/10/solr-meetup-memo</id>
    <content type="html"><![CDATA[<p>不定期開催ですが<a href="http://atnd.org/events/43532/">第12回Solr勉強会</a>を主催しました。</p>

<p>今回は、前回ほどの過熱ぶりでは無かったですが、70人ほどの参加者の方がいらっしゃったかと。
ありがとうございます！</p>

<p>今回は聞きたかったYokozunaの話をしてもらいました。あと、リベンジManifoldCF。
<em>一部、追記しました。Bashoさんからツッコミがあったので。あと、4.5.1の話とか。</em></p>

<!-- more -->


<h2>ManifoldCFのとSolrの組み合わせ（仮）株式会社 ロンウイット　大須賀　稔さん</h2>

<p>前回お休みだったのでリベンジですw。</p>

<p>英語だ。。。やっぱ英語がいいですか、スライド。。。<br/>
ManifoldCFの概要から。
最新版は1.3です。色々サポートしてるなぁ。</p>

<p>デモもありました。（やっぱりちゃんと動かないので、鬼門みたいですが）</p>

<h4>デモ</h4>

<p>ManifoldCFのGUIで操作しながら。
いまいちちゃんと動かなかった。。。</p>

<h4>QA</h4>

<ul>
<li>Q:Zipはうまく動かなかった</li>
<li>A:Solr側で処理してくれてる。</li>
<li>Q:Notes対応するの？</li>
<li>A:いまのところない。</li>
<li>Q:ExcelとかPDFはTika？</li>
<li>A:Tika次第です。</li>
<li>Q:認証周りどこから取ってくるの？</li>
<li>A:クローラ側にはなくて、SharePointとかの権限をみてる。</li>
<li>Q:Web系の認証は？</li>
<li>A:まだないのでは。。。（調査します）</li>
</ul>


<p>あー、デモの続き忘れてましたね。。。</p>

<h2>Solrを組み込んだRiak 2.0の全文検索機能 -Yokozuna- Bashoジャパン株式会社　鈴木　一弘さん</h2>

<p>Riak色々使われてるよ！アングリーバードとか、Y!とか。
Riakで提供されている1機能としてのYokozuna。単独製品ではないですよと。</p>

<p>Riakの説明。スケールするよ、いつでもRead/Writeできるよ、運用にフォーカスしてるよと。
マスターレスですよ。
Riak2.0のリリースは2013年末。Yokozunaもかな？</p>

<p>ダイナミックフィールド使ってるので、Yokozunaをonにするだけで簡単に使えるよ。</p>

<p>RiakがSolrのプロセスを管理。</p>

<p>インデックスの不整合の検知とかってどうやってるのかなぁ？
インデックス比較用のハッシュツリーをノード間でコピーしつつ検査してる。（Active Anti-Entropy）</p>

<p>(デモには魔物がいるようだ。。。)</p>

<h4>QA</h4>

<ul>
<li>Q:JSONの属性を元にしてフィールドにインデックス可能か？</li>
<li>A:可能です。IIJさんの発表で話が出ます。</li>
<li>Q:ProtocolBufferでSolrにアクセス可能？</li>
<li>A:<strike>そのうちできそうです。</strike>リリース時にはできるようになっています。</li>
<li>Q:コアのスワップは？スキーマの変更は？</li>
<li>A:事前に設定するのは可能。</li>
<li>Q:RiakのデータとSolrでデータがずれるってのはあるの？</li>
<li>A:可能性はありますが、<strike>極力ずれ</strike>AAEで修復。</li>
<li>Q:復旧中のインデックスにアクセスが行かないようにする仕組みなどはある？</li>
<li>A:今はないです。</li>
</ul>


<h2>Yokozuna ベンチマークしました　株式会社インターネットイニシアティブ　曽我部　崇さん、田中 義久さん</h2>

<p>いいとこ取りで楽だなぁと。いうことで、試してみてます。
デモが動いてる。</p>

<p>extractorでXMLやJSONをパースできる。
ベンチマーク結果。</p>

<p>Riak Meetup Tokyo #2の時のQAも入ってるので助かります。素晴らしい。</p>

<h4>QA</h4>

<ul>
<li>Q:スナップショットは両方取れるの？</li>
<li>A:Riakは取れますが、インデックスは今は無理です。</li>
<li>フォロー:0.8はYokozunaにボトルネックがあったので、0.9以降だともっと性能が出るはずですとのこと。また次回とかに発表してもらうのもありですかねぇ。</li>
</ul>


<h2>Solr 4.5の新機能など @johtani</h2>

<p><a href="/images/entries/20131009/Solr4_5_Changes.pdf">発表資料のPDF</a>です。</p>

<p>ツイート見てて誤解を招いたなと思ったのですが、7u40は4.5限定ではなく、すべてのバージョンと考えてください。
チケットを見ると分かりますが、影響バージョンの記載はありません。</p>

<p>※あ、4.5のChangesを紹介しましたが、4.5.1が出るかも。このへんが困ってるらしいです。</p>

<ul>
<li><a href="https://issues.apache.org/jira/browse/SOLR-5306">SOLR-5306: can not create collection when have over one config</a></li>
<li><a href="https://issues.apache.org/jira/browse/SOLR-5317">SOLR-5317: CoreAdmin API is not persisting data properly</a></li>
<li><a href="https://issues.apache.org/jira/browse/LUCENE-5263">LUCENE-5263: Deletes may be silently lost if an IOException is hit and later not hit (e.g., disk fills up and then frees up)</a></li>
</ul>


<h2>LT</h2>

<h3>@haruyama さん</h3>

<p>資料：<a href="http://haruyama.github.io/solr_20131009/#(1">http://haruyama.github.io/solr_20131009/#(1)</a>)</p>

<p>記号が捨てられるTokenizer困るので、捨てないのを作ってみました。</p>

<p>Kuromojiの困ったこと。全角数字を分解しちゃう。→MappingCharFilterFactoryで全角から半角にしましょう。
lucene-gosenデフォで半角記号が未知語になってしまい、半角カナと混ざるので、記号を全角にしましょう。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第11回Solr勉強会を主催しました。#SolrJP]]></title>
    <link href="http://blog.johtani.info/blog/2013/07/29/study-of-solr/"/>
    <updated>2013-07-29T23:15:00+09:00</updated>
    <id>http://blog.johtani.info/blog/2013/07/29/study-of-solr</id>
    <content type="html"><![CDATA[<p>不定期開催ですが<a href="http://atnd.org/events/41368/">第11回Solr勉強会</a>を主催しました。</p>

<p>今回も大入り90人くらい？の参加者の皆さんがいらっしゃいました。ありがたいことです！（20時時点で最終的に補欠17人でした。）</p>

<p><strike>とりあえず、第一報です。このあと懇親会なので。</strike></p>

<p>ということで、帰りの電車でいくつか感想を（忘れちゃうから）。</p>

<!--  more -->


<p>小林さんの苦労話は細かいですが、結構はまりがちな点を共有していただいたので良かったかなぁと。
Solrのexampleの設定とか、ManifoldCFとかちょっとずつ罠があったりするので、あるあるネタはありがたいと思いますｗ</p>

<p>Cloudera Searchについては、安定の嶋内さんの喋りに圧巻でした。検索だけの視点とは異なる観点についての
話は私には足りないしてんだったりするので参考になります。
なんか、気づいたらMorphlineやスキーマ周りを調べてブログ書くことになっちゃったけど。。。
一つ質問しそこねたのがあって、Cloudera社は基本的に公開したOSSについてのトレーニングも立ち上げているイメージです。Cloudera Searchについてもトレーニングが立ち上がるのかなぁと密かに期待をしてみたり（予算の関係上参加できるかは不明ですが。。。）</p>

<p>牧野さんの話は画像系について、私は詳しくないので、また関口さんのalikeと比較とかしてもらえると面白いかなぁと。とりあえず、青いロボットがちゃんと検索できるようになるといいですねｗｗ</p>

<p>秀野さんの空間検索は緯度経度以外のPOLYGONなどを利用した検索で、実は私も知らない機能でしたｗ<br/>
なとなくは知ってたんですが、そこまでちゃんと検索できるとは！地図以外にも活用できるような気がします（想像つかないんだけど。。。）</p>

<p>最後は私の発表で、簡単な資料ですみませんでした。しかも発表よりも宣伝が。。。（ブログの宣伝だったりとか。。。）
最後に宣伝した「<a href="http://www.ipsj.or.jp/dp/cfp/copy_of_copy_of_dp0502s.html">「ビッグデータ活用を支えるOSS」特集への論文投稿のご案内</a>」もご検討ください！</p>

<p>懇親会も楽しかったです。また思いついたら開催しますー<br/>
最後に、今回の発表者の皆様、会場提供していただいたVOYAGE GROUPの皆様ありがとうございました！</p>

<p>以下はいつものメモです。</p>

<h2>ManifoldCFのとSolrの組み合わせ（仮）株式会社 ロンウイット　大須賀さん</h2>

<p>残念ながら、発熱のため発表は次回に持ち越しに。</p>

<h2>社内ファイル及びWEBコンテンツの検索システム構築時に苦労したこと ソフトバンクBB㈱　小林さん</h2>

<ul>
<li>ManifoldCF＋Solrを使って社内ファイルの検索システム構築</li>
<li>約1000万ドキュメント</li>
<li>さまざまなDCにドキュメントがある</li>
</ul>


<h4>クロールジョブのハング。。。</h4>

<ul>
<li>ログをDEBUGにしたら。。。ログファイル150GB。。。</li>
<li>一定時間ごとにAgentをリスタートするバッチを。。。（力技）</li>
</ul>


<h4>MCFエラーによるジョブの停止</h4>

<ul>
<li>CONNECTORS-590</li>
<li>エラーが発生して止まったジョブを起動するバッチをcronで。。。</li>
</ul>


<h4>自作リアルタイムインデクシングの問題</h4>

<ul>
<li>MCF使わないでSlaveにインデックス</li>
<li>openSearcher=falseだとautoCommitが実行されてもSearcherを再起動しないので検索にでてこない</li>
</ul>


<h4>リプリケーションのNW負荷</h4>

<ul>
<li>別DCからのレプリケーションが複数が一度に実施される→ネットワーク負荷が。。。</li>
<li>cronで別々にレプリすることでNW負荷を分散できてるかな。。。
　　</li>
</ul>


<h2>Cloudera Search 入門(仮) Cloudera 株式会社　嶋内さん</h2>

<ul>
<li>マサカリ画像がｗ</li>
<li>SolrのコミッターMark Millerさんもジョインしてる</li>
</ul>


<h4>ClouderaとHadoop入門とか。</h4>

<ul>
<li>いろいろあるよ、エコシステム</li>
<li>4つの分類。

<ul>
<li>データの取り込み</li>
<li>データの保存</li>
<li>データの活用</li>
</ul>
</li>
</ul>


<h4>Search</h4>

<ul>
<li>検索エンジンなら数十億人が使い方を知ってる（Clouderaのチャールズ・ゼドルースキ）</li>
</ul>


<h4>Cloudera Search</h4>

<ul>
<li>Hadoopのためのインタラクティブな検索</li>
<li>CDHとSolrの統合</li>
<li><p>OSS！</p></li>
<li><p>利点とか。</p>

<ul>
<li>データ解析にも使えるよね、検索</li>
<li>非構造化データの検索にもいいよね</li>
<li>単一プラットフォームによるコスパ</li>
</ul>
</li>
</ul>


<h4>Cloudera Searchの事例</h4>

<ul>
<li>バイオテクノロジー企業で画像検索とか</li>
<li>医療系企業でいろんなログイベントの管理とか</li>
</ul>


<h4>Cloudera Searchのアーキテクチャ</h4>

<ul>
<li>Flumeでストリーミングで登録</li>
<li>HBaseデータの登録</li>
<li>M/Rでバッチ登録</li>
<li>HueのWebインタフェース</li>
</ul>


<p>Morphlines、HBaseはLinyプロジェクトのもの</p>

<p>Solr使うならCDH！！</p>

<h4>QA</h4>

<ul>
<li>Q：デモで使われたTwitterの検索のデータ料とかは？</li>
<li><p>A：デモ環境ですので小さい。</p></li>
<li><p>Q：スキーマってどうするの？</p></li>
<li>A：スキーマは。。。私が書こうかなぁ、ブログ。。。</li>
</ul>


<h2>コンピュータビジョン　株式会社 Curious Vehicle　牧野さん</h2>

<ul>
<li>色々やってます</li>
<li>コンピュータビジョンの説明（某ネコ型ロボットのいろんな画像がｗ）</li>
</ul>


<h4>画像検索の流れ</h4>

<ol>
<li>特徴情報の抽出</li>
<li>特徴情報のクラスタリングによるword化</li>
<li>Solrによる画像情報の検索</li>
</ol>


<h5>1. 特徴情報の抽出</h5>

<ul>
<li>SIFT特徴点解析</li>
<li>グレースケールしてからSIFT</li>
<li>注意！SIFTは商用ライセンスが必要です</li>
</ul>


<h5>2. 特徴情報のクラスタリングによるword化</h5>

<ul>
<li>K-meansでクラスタリング</li>
<li>クラスタ情報をヒストグラム化してSolrへ</li>
</ul>


<h5>3. Solrによる画像情報の検索</h5>

<ul>
<li>物体認識ベンチマークセット（ケンタッキー大）を使って。</li>
<li>やっぱり良し悪しある。データセットに特化したチューニングしてます。</li>
</ul>


<h4>つぎのステップ</h4>

<ul>
<li>文字認識とか顔認識</li>
<li>つぎはドラえもんじゃねぇ、検索とかも。。。</li>
</ul>


<h5>ガウシアンによる画像ぼかしの例</h5>

<h4>QA</h4>

<p>マイク回しててメモ取れず。。。</p>

<h2>国土交通省のデータをSolrで検索　株式会社ネクスト　秀野さん</h2>

<p><a href="https://speakerdeck.com/ryo0301/guo-jiao-sheng-falsedetawosolrdejian-suo">スライドはこちら</a></p>

<ul>
<li>評価の関係で。。。</li>
<li>Spatial検索の話</li>
</ul>


<h4>デモの想定機能</h4>

<ul>
<li>地図上の小学校を起点に物件検索</li>
<li>地図上をクリックしたところを中心に検索</li>
</ul>


<h4>デモ環境</h4>

<ul>
<li>Solr4.3.0、PostGIS 2.0.3、東京都のデータ</li>
</ul>


<h4>事前知識</h4>

<ul>
<li>ジオメトリーデータ（点、線、面がある）</li>
<li>WKB/WKT、Intersects（しらなかった。こんなのもあるのか）</li>
</ul>


<h4>環境</h4>

<ul>
<li>EC2上にPostGIS＋Solrで構築</li>
<li>WKT形式でDIHでインポートできるらしい。</li>
<li>Solr＋S3をJSでGoogleMapへ</li>
</ul>


<h2>Solr 4.4新機能をちょっと紹介　@johtani</h2>

<p>紹介というよりも宣伝。。。</p>
]]></content>
  </entry>
  
</feed>
