<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 勉強会 | @johtaniの日記 2nd]]></title>
  <link href="http://blog.johtani.info/blog/categories/mian-qiang-hui/atom.xml" rel="self"/>
  <link href="http://blog.johtani.info/"/>
  <updated>2019-12-06T22:59:04+09:00</updated>
  <id>http://blog.johtani.info/</id>
  <author>
    <name><![CDATA[johtani]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Bonfire Data & Science #1に参加しました]]></title>
    <link href="http://blog.johtani.info/blog/2019/10/25/bonefire-01/"/>
    <updated>2019-10-25T19:40:02+09:00</updated>
    <id>http://blog.johtani.info/blog/2019/10/25/bonefire-01</id>
    <content type="html"><![CDATA[<p>Bonfire Data &amp; Science #1にブログ枠で参加してきました。
ということで、メモです。</p>

<!-- more -->


<ul>
<li>日時 : 2019/10/25 19:00 - 21:30</li>
<li>場所 : Yahoo! Japan</li>
<li>サイト : <a href="https://yj-meetup.connpass.com/event/148121/">https://yj-meetup.connpass.com/event/148121/</a></li>
<li>ハッシュタグ: <a href="https://twitter.com/search?q=%23yjbonfire%20&amp;src=typed_query&amp;f=live">#yjbonfire</a></li>
</ul>


<h2>概要</h2>

<p>Data &amp; Scienceとは？
データとサイエンスに関わる人達の情報共有のための勉強会/交流会</p>

<p>サイトから引用です。</p>

<pre><code>第1回のテーマは「画像検索」です！

最近EC系のサイトで類似画像検索が出来るようになったけどどうやってるの？
画像検索のモデルってどうしてるの？
画像検索のインフラはどうしてるの？
私たちの会社でも画像検索を用いたサービスを構築できるだろうか？
こういった疑問に答えたり、いま抱えている悩みを解決するヒントを得る場になればと思っています。

今回は、画像検索を行なっているヤフー, メルカリ, ZOZOテクノロジーズの3社に事例と基盤技術について登壇いただきます。
</code></pre>

<p>QAはこちら。<a href="https://app.sli.do/event/w3wayjmv/live/questions">https://app.sli.do/event/w3wayjmv/live/questions</a></p>

<h2>Mercari画像検索について(仮)</h2>

<ul>
<li><p>発表者：荒瀬晃介(株式会社メルカリ / AIエンジニアリングチーム)</p></li>
<li><p>AIエンジニアチーム</p></li>
<li>写真検索プロジェクトのTech Lead</li>
<li>iOSのみで提供の写真検索</li>
<li>システムオーバービュー

<ul>
<li>MobileNet v2で特徴抽出</li>
<li>ANNのインデックスを使ってDBに入れる</li>
</ul>
</li>
<li>論文も発表済み（3本）

<ul>
<li>今日の発表はこの内の2本を元に話をします。</li>
</ul>
</li>
</ul>


<h4>C2Cでの問題点</h4>

<ul>
<li>商品は床やテーブル上で撮影</li>
<li>クエリは着用（着ている）画像が使われやすい。

<ul>
<li>人が写ってる写真が結果に多いと業者が出展しているように見えてしまう。

<h4>提案手法</h4></li>
</ul>
</li>
<li>人が写ってるものから人の代表ベクトルを抜き取る (クエリ時にのみ処理を実施しているので変更が容易)</li>
<li>特徴変換ベクトル

<ul>
<li>トップスなど、分類ごとに学習させてからベクトルを構成</li>
</ul>
</li>
<li>なんでMobileNet v2?

<ul>
<li>エッジデバイスでの処理を見据えて選択</li>
</ul>
</li>
</ul>


<h4>インフラ</h4>

<ul>
<li>Docker + k8s</li>
<li>CRDを使ってる？</li>
<li>training

<ul>
<li>コンテナベースパイプライン

<ul>
<li>いくつかのバッチ処理を工程ごとにパイプライン化</li>
<li>バッチ実行情報をカスタムリソースとしている＝再実行が簡単（復旧作業が容易）</li>
</ul>
</li>
<li>画像を扱う＝ダウンロードが時間がかかる -> 復旧しやすいようにPVにある程度キャッシュさせている</li>
</ul>
</li>
<li><p>Serving&hellip;</p>

<ul>
<li>GCP側</li>
</ul>
</li>
<li><p>なぜ2つに別れてるんだろう？実際のサービスも2つに分かれてたりするんだろうか？</p></li>
</ul>


<h4>将来の展望</h4>

<ul>
<li>Realtime Image Search

<ul>
<li>カメラでものを写している状態でそれが何かを検索できる。</li>
<li>物体検出＋特徴抽出をエッジで行うためできる</li>
</ul>
</li>
<li>エッジの性能により違いが出てきたりするっぽい</li>
</ul>


<h4>QA</h4>

<ul>
<li>Q: 業者が想定されると、購入意欲を下げるというのは実験した結果？それとも想像？

<ul>
<li>A: 実験はしていないが、e-commerceにおいての研究がある</li>
</ul>
</li>
<li>Q: どういう理由でマルチクラウドにしたんでしょう?

<ul>
<li>A: 画像のマスターがAWS。メルカリのマイクロサービスはGKEなので、サービング環境がGCP</li>
</ul>
</li>
<li>Q: 画像の内、服のエリアが大部分で体の面積が少ない場合と、メガネや帽子のように、アイテムの方の面積が少ない場合で、トレーニングに必要なデータ数は変わりましたか？

<ul>
<li>A: カテゴリによる性質の違うはある。ので、改善は必要。</li>
</ul>
</li>
</ul>


<h2>ZOZO画像検索について(仮)</h2>

<ul>
<li><p>発表者：平田拓也(株式会社ZOZO / AIエンジニアリングチーム)</p></li>
<li><p>(聞き逃した。。。)</p></li>
<li>WEAR</li>
<li>マルチサイズ</li>
</ul>


<h4>チーム構成</h4>

<ul>
<li>研究所＋ML Opsチーム</li>
</ul>


<h4>使用しているアルゴリズム</h4>

<ul>
<li>物体検出アルゴリズム</li>
<li>特徴量抽出アルゴリズム</li>
<li>近似最近傍探索（approximate nearest neighbor, ANN）</li>
</ul>


<h4>インフラ</h4>

<ul>
<li>GCPを採用。

<ul>
<li>BigQuery上にデータ基盤がある</li>
<li>Managed GPUが必要</li>
</ul>
</li>
<li>なんでk8s?

<ul>
<li>コンテナ</li>
<li>Cloud Runがなかった</li>
</ul>
</li>
</ul>


<h4>アーキテクチャ</h4>

<ul>
<li>マイクロサービス化されている</li>
<li><a href="https://techblog.zozo.com/entry/cloudnext19tokyo-imagesearch">Google Cloud Next 2019 Tokyoでsonotsさんの発表があるよ</a></li>
</ul>


<h4>監視項目</h4>

<ul>
<li>CPUなどは見ていない</li>
<li>レスポンスタイムとステータス監視</li>
<li>リクエスト数</li>
<li>APM</li>
<li>使ってるものStackdriver + Datadog + Sentry

<ul>
<li>Warningが30分で続けたら通知などができるのがStackdriver</li>
</ul>
</li>
</ul>


<h4>画像検索の改善のためにやっていること</h4>

<ul>
<li>課題

<ul>
<li>レイテンシーが大きい

<ul>
<li>推論が大変？</li>
</ul>
</li>
<li>急激なトラフィックの増加に対応できない

<ul>
<li>GPUのスケールアウトが問題 -> 先行投資が必要</li>
</ul>
</li>
</ul>
</li>
<li>流れ

<ol>
<li>キャッシュありなし</li>
<li>物体検出 (GPU)</li>
<li>特徴量抽出 (GPU)</li>
<li>近似最近傍探索</li>
<li>DBから取得</li>
</ol>
</li>
</ul>


<p>2と3が問題</p>

<ul>
<li>2と3を特徴量DBという形でデータが登録された時点で特徴量などを計算してしまうことでGPUへの依存をなくした。</li>
<li>Apache AirFlowが便利？</li>
</ul>


<h4>Cloud ComposerとApache AirFlow</h4>

<p>Cloud Composerに関するいくつかのTipsがありました。</p>

<h4>QA</h4>

<ul>
<li>Q: 推論をCPUでやったらどれぐらい遅いんだろう

<ul>
<li>A: GPUインスタンス代金 &lt; それと同等の速度を出すためのCPUインスタンス代金</li>
</ul>
</li>
<li>Q: k8sスケールアウト時のリソース割当を最適化する為、resource limit / request標準化 or 時系列分析などから自動調整するなどはされていますか？

<ul>
<li>A: &hellip;聞き逃した</li>
</ul>
</li>
<li>Q: (TCOを考慮したクラスタ構成) Cloud Composerの値段が高いようなパプリッククラウド利用の課題対策としてプライベートクラウドとのハイブリッド構成にされているのでしょうか？もしハイブリッド構成でしたら、パブリック or クラウドを切り分ける基準はございますか。

<ul>
<li>A: GKEオンリー</li>
</ul>
</li>
<li>Q: cloud composerでairflowを使う辛い点は？

<ul>
<li>A: 不安定さ。。。</li>
</ul>
</li>
</ul>


<h2>Yahoo!ショッピングにおける画像検索(仮)</h2>

<ul>
<li>発表者：佐藤 純一(ヤフー株式会社)</li>
<li>商品検索APIの開発とか検索エンジンの保守とか</li>
<li>類似画像検索システムの開発が直近の仕事</li>
</ul>


<h4>類似画像検索</h4>

<ul>
<li>ヤフーショッピング

<ul>
<li>3億の商品</li>
<li>ファッション系はビジュアルが重要＝言語による表現が難しい</li>
</ul>
</li>
<li>iOSとAndroid

<ul>
<li>Androidだとカメラで撮影してから検索みたいなことも可能</li>
</ul>
</li>
</ul>


<h4>システム概要</h4>

<ol>
<li>物体検出</li>
<li>ノイズ除去</li>
<li>特徴抽出
*</li>
<li>インデックス(NGT) -> <a href="https://github.com/yahoojapan/NGT">https://github.com/yahoojapan/NGT</a></li>
<li>1000万件を超える</li>
<li>検索</li>
<li>アプリの画像をAPIに投げてベクトルから、近いものn件を取得</li>
</ol>


<h4>ベクトル化/インデックス更新</h4>

<ul>
<li>GPUマシン</li>
<li>Kafka使ってる</li>
<li>クラウドストレージに日次？バックアップみたいに保存</li>
<li>差分更新の仕組みがある</li>
<li>メンズとレディースは分けている

<ul>
<li>絞り込み検索のために分離（インデックスのメタデータとしてタグがある）</li>
</ul>
</li>
</ul>


<h4>システム構成</h4>

<ul>
<li>Python</li>
<li>Kafka</li>
<li>TensolflowServing</li>
<li>可視化？監視？はGrafana＋Prometheus</li>
</ul>


<h4>開発を通しての学び</h4>

<ul>
<li>自動デプロイとかテスト</li>
<li>検索精度の確認ツールを作る

<ul>
<li>コレ重要だよね。何が変更してるかとか、何が正しいかってのが必要だし。。。</li>
</ul>
</li>
<li>復旧可能、早期復旧の仕組みを容易</li>
</ul>


<h4>今後の方針</h4>

<ul>
<li>対象商品の拡大</li>
<li>物体検出特徴抽出モデルの性能改善</li>
<li>NGTの検索システムをValdに移行

<ul>
<li><a href="https://github.com/vdaas/vald">Vald</a>

<ul>
<li>k8s上で動作、分散検索、分散インデキシングなどの機能を提供予定</li>
</ul>
</li>
</ul>
</li>
</ul>


<h4>QA</h4>

<ul>
<li>Q: iOS(既存の画像)とAndroid(カメラで撮る)で画像検索の方式が違うのはなぜ？

<ul>
<li>A: アプリの違い</li>
</ul>
</li>
<li>Q: 1枚の写真に沢山写っている中で、対象の商品をどう識別しているんでしょう。靴もトップスもボトムスも写っていたら、かなり難しそう

<ul>
<li>A: Yahooブラウザの場合は1番大きな領域のものを選択。Yahoo shoppingだと選択可能</li>
</ul>
</li>
</ul>


<h2>NGTについて(仮)</h2>

<ul>
<li>発表者：岩崎 雅二郎(ヤフー株式会社)</li>
<li>類似画像検索を20年くらいやってる</li>
</ul>


<h4>近傍検索ライブラリ</h4>

<ul>
<li><p><a href="https://github.com/yahoojapan/NGT">https://github.com/yahoojapan/NGT</a></p>

<ul>
<li>高次元ベクトルの近傍検索</li>
<li>ツリーとグラフによるインデックス</li>
</ul>
</li>
<li><p>近傍検索とは?</p>

<ul>
<li>距離空間上でのクエリの近傍のオブジェクトを取得

<ul>
<li>k最近傍検索（通常はこっち）</li>
<li>範囲検索（あんまり使われない）</li>
</ul>
</li>
</ul>
</li>
<li><p>NGTの特徴</p>

<ul>
<li>世界トップレベルの高速高精度な近似近傍検索</li>
<li>OSS</li>
<li>追加削除が可能（削除がとくに難しいらしい）</li>
<li>多様な利用形態（Python、C++、C、Go、コマンドライン）</li>
<li>サーバ版NGT（ngtd、vald）を提供</li>
<li>共有メモリ版でメモリサイズ以上のデータ登録可能</li>
<li>量子化版NGT（NGTQ）により。。。</li>
</ul>
</li>
<li><p>ANNベンチマークによりテスト</p>

<ul>
<li>実行環境が決められているらしい。誰が実行しても比較可能</li>
<li>グラフベースの検索の仕組みのほうが性能がいいというのがベンチマーク結果からわかる</li>
</ul>
</li>
</ul>


<h4>なんではやいの？</h4>

<ul>
<li>インデックス生成

<ul>
<li>ツリー（グラフの探索起点の取得に利用する。DVP-tree）</li>
<li>グラフ（ANNG）

<ul>
<li>ノードを逐次追加しつつ、近傍ノードを検索してから接続するというのを繰り返している</li>
</ul>
</li>
</ul>
</li>
<li>検索

<ul>
<li>ツリーから絞り込みつつ、グラフを検索する</li>
</ul>
</li>
<li>ANNGに課題があるのでONNG（Optimized Nearest Neighbors Graph）に

<ul>
<li>ノード単位の次数（入出）を最適化</li>
<li>データセットによって有効な次数が違う。。。</li>
</ul>
</li>
</ul>


<h4>NGTを利用した深層学習で。。。</h4>

<ul>
<li>Yahoo!ラボ FavNavi</li>
<li>特徴量の構成（低次特徴量（300次元）、カテゴリ特徴量（128次元）、領域アスペクト比（1次元））

<ul>
<li>個別の特徴量だけだとイマイチな結果になるが、組み合わせるといい感じになる</li>
</ul>
</li>
</ul>


<h4>モデル性西洋学習データ</h4>

<p>スライドがあればいいなぁ（表書くの大変だし。。。）</p>

<h4>QA</h4>

<ul>
<li>Q: 実際のお客さまの利用を考えると、近似近隣の密度が異なるので、近いものばかりの検索結果や遠いものも含んでしまった検索結果が出ると思うのですが、遠いものが含まれてしまうと、閾値でフィルタしたりするのでしょうか?

<ul>
<li>A: NGTは近いものしかないので、外れ値ってなんでしょう。。。

<ul>
<li>検索のフィルタリングをある程度している（カテゴリとか）。</li>
</ul>
</li>
</ul>
</li>
</ul>


<h2>まとめ</h2>

<p>慣れない分野の話を聞きながらざっとメモを取ったものなので役に立つかはわかりませんが。。。</p>

<p>アルゴリズムとかまでは得意ではないんですが、画像「検索」ということで参加してみました。
実際に画像検索の仕組みがどんな感じでできているのか、どんな技術がつかわれているのか？ってのがわかったのは
面白かったです。確かに検索のためのキーワードって出てこないことあるしなぁと。
あー、こんなかばんほしいとか、これなんだろ？みたいなのあるからなぁ。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[勉強会の受付自作？アプリ？HTMLについて]]></title>
    <link href="http://blog.johtani.info/blog/2019/06/19/qr-code-with-meetup-dot-com/"/>
    <updated>2019-06-19T19:10:44+09:00</updated>
    <id>http://blog.johtani.info/blog/2019/06/19/qr-code-with-meetup-dot-com</id>
    <content type="html"><![CDATA[<p>Twitterで「Meetup.comに切り替えたらー」みたいな話があったので、
受付用アプリとかなくてという話になったので、普段Elasticsearch勉強会で使用している
QRコード生成の仕組みを紹介してみようかと。</p>

<!-- more -->


<p>HTMLだけで済むようにQRコードを生成する<code>jquery.qrcode.min.js</code>ってのを使用してます。</p>

<p><a href="https://gist.github.com/johtani/657df4dcfa7c31a86575760e23b64f7d">HTMLコードはこちら</a>。</p>

<h2>仕組み</h2>

<ul>
<li>1枚だけのHTMLを生成</li>
<li>Meetupの<a href="https://www.meetup.com/ja-JP/meetup_api/auth/#oauth2">OAuth2</a>の仕組みを利用(consumer keyを発行する必要あり。)</li>
<li>Meetup APIを利用してユーザー情報取得</li>
<li>取得したユーザー情報をGoogle Formに埋め込んだ形で表示するURLを組み立てる</li>
<li>組み立てたURLをQRコードにしてHTMLに表示</li>
<li>受付で、QRコードリーダーを使って、QRコードを読み込むとGoogle Formが開くので、「送信」ボタンを押す</li>
</ul>


<h3>1. HTMLの作成</h3>

<p>QRコードを表示するためのHTMLを作成します。Gistに貼り付けてあるので、参考にしてもらえれば。
いくつか埋め込まないといけないものがあるので、個別にそれは説明します。</p>

<h3>2. Google Formの準備</h3>

<p>Elasticsearch勉強会では、出席者の情報として、IDと氏名をリストとして保存しています。
目的としては、何人実際に参加したかを計測するのが目的です。
ですので、参加者リストのGoogle Formを作成します。
で、作成した後に、プレビューを表示する。こんな感じ。</p>

<p><img src="/images/entries/20190619/google_form.png" width="300"></p>

<p>この時のプレビューのURLをQRコードのURLとして使いたいので、このURLをQRコード表示のHTMLに埋め込みます。</p>

<pre><code class="javascript">function createGoogleFormURL(data) {
  var obj = {
    "entry.1744035444" : data.id,
    "entry.2031666715" : data.name
  };
  return "https://docs.google.com/forms/d/e/&lt;GOOGLE_FORM_ID&gt;/viewform?" + $.param(obj);
}
</code></pre>

<p>ここら辺です。
<code>return</code>に書いてある<code>https</code>で始まる文字列をまず、先ほどのURLで置き換えます。
次に、プレビューのHTMLの中から<code>&lt;input&gt;</code>タグを探して、<code>name</code>の値を抜き出します。
それを<code>obj</code>のキーに利用します。<code>entry.</code>で始まる文字列が該当します。</p>

<p>これで、このURLをQRコードにすれば、値（ここだとIDと氏名）が埋め込まれた形のGoogle Formがスマホのブラウザで起動します。</p>

<h3>3. Meetup APIの準備</h3>

<p>MeetupのAPIを利用できるようにします。Meetup.comにログインするとみれるAPIのページがあります。
<a href="https://secure.meetup.com/meetup_api">https://secure.meetup.com/meetup_api</a></p>

<p>まず、OAuthを利用するためのConsumer Keyを発行します。</p>

<p>メニューのOAuth Consumersをクリックして、</p>

<p><img src="/images/entries/20190619/meetup_oauth_consumers.png" width="400"></p>

<p>&ldquo;Create New Consumer&#8221;をクリックします。
すると、次のような画面が開きます。</p>

<p><img src="/images/entries/20190619/meetup_oauth_create_consumer.png" width="400"></p>

<p><code>Consumer name</code>と<code>Redirect URI</code>が重要です。</p>

<p><code>Consumer name</code>はユーザーがMeetup経由で認証するときに、その認証画面で表示される名前になります。
わかりやすい名前を表示してあげると良いかと。</p>

<p><code>Redirect URI</code>が一番重要です。実際にOAuthで認証が通った後に表示するHTMLを提供しているURLを指定します。
Elasticsearch勉強会の場合は、私のドメインにwwwをつけた&#8221;<a href="https://www.johtani.info">https://www.johtani.info</a>&#8220;を指定しています。
実際にQRコード表示用のHTMLを配置するHTTPサーバーのトップのURLを指定します。
（ちなみに、私のウェブサーバーはS3で運用してます。ですので、HTMLをS3のバケットにアップロードしてあるだけです）</p>

<p>必須項目を入力したあと、最下部にある<code>Register Consumer</code>ボタンを押せばキーが生成されます。
生成されたキーがOAuth2のURLのパラメータに必要になります。</p>

<p>これで、リダイレクトの準備が整いました。</p>

<p>OAuth2のURLには、<a href="https://www.meetup.com/ja-JP/meetup_api/auth/#oauth2implicit">Implicit Flow</a>を利用します。
これで、リダイレクト先のHTMLにトークンがわたるので、Meetup APIにこのトークンが使えるようになります。</p>

<p>認証用のURLはこちらです。このURLを参加者宛のメールに入れて毎回送信しています。
<code>
https://secure.meetup.com/ja-JP/oauth2/authorize?response_type=token&amp;redirect_uri=&lt;QRコード表示HTMLのURL&gt;&amp;client_id=&lt;コンシューマーキー&gt;
</code></p>

<p>参加者はこのリンクをクリックすることで、次のような画面が出てきます。
ログインしていない場合はLog in画面が表示され、まずはログインを促されます。</p>

<p><img src="/images/entries/20190619/meetup_oauth_page.png" width="400"></p>

<p>で、Allowをクリックすれば、<code>redirect_uri</code>に指定されているページが表示されるわけです。</p>

<p>QRコード表示用のHTMLでは、次のAPIを使用して、ログインしているユーザーの情報を取得してきています。</p>

<pre><code class="javascript">function getMemberId() {
  $.getJSON('https://api.meetup.com/2/member/self/?only=id,name&amp;access_token='+ getToken(), displayQRCode);
}
</code></pre>

<p>ここで取れた値が、先ほどの「2. Google Formの準備」で説明したコードの<code>data</code>の部分に渡ってくるわけです。</p>

<pre><code class="javascript">function createGoogleFormURL(data) {
  var obj = {
    "entry.1744035444" : data.id,
    "entry.2031666715" : data.name
  };
  return "https://docs.google.com/forms/d/e/&lt;GOOGLE_FORM_ID&gt;/viewform?" + $.param(obj);
}
</code></pre>

<h3>4. QRコードの表示</h3>

<p>あとは、<a href="https://github.com/jeromeetienne/jquery-qrcode"><code>jquery.qrcode.min.js</code></a>を使用してURLを表示するだけです。</p>

<pre><code class="javascript">function displayQRCode(data) {
  $('#qrcode').qrcode({width: 128,height: 128, text:createGoogleFormURL(data)});
}
</code></pre>

<p>サイズとURLを指定するだけですね。</p>

<h2>まとめ</h2>

<p>あとは、受付で、参加者の方が表示してくれたQRコードをスマホのQRコードリーダーやカメラで読み込めばGoogle Formが開いて必要な情報は入っているので、「送信ボタン」を押せば参加者リストが出来上がっていくという形になります。</p>

<p>毎回勉強会の前日に、前回のGoogle Formを「コピー」してから、各回の勉強会の登録者フォームを作成しています。
コピーすることにより、Google Formの<code>&lt;input&gt;</code>タグに使用される<code>name</code>もそのままコピーされるので、
QRコード生成用のHTMLを書き換える部分の手間が減る形になっています（気づくまで数回かかったw）。</p>

<p>ですので、QRコードのHTMLの中身としては、「勉強会のページへのリンク」、「Google Formへのリンク」の2つを書き換えてから毎回アップロードしているだけとなっています。</p>

<p>このやり方が、スマートかどうかはわからないですが、受付アプリがない中、Meetup.comから取得した参加者リストのExcelやプリントアウトしたリストを元に参加者をチェックするよりは、手間が省けてるんじゃないかなぁと。</p>

<p>残念ながら、QRコードの存在を知らないでそのまま勉強会にくる人がいるので、受付で最低一人はMeetup.comの参加者リストから、
名前を検索してチェックするという作業もやってもらってます。
QRコードを持ってきた方がすんなり受付を通過できるようになってますので、ぜひQRコードを持って勉強会にきてもらえればと。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[勉強会運営座談会ってのをやってみた]]></title>
    <link href="http://blog.johtani.info/blog/2019/04/26/meetup-organizer-drinkup/"/>
    <updated>2019-04-26T00:02:06+09:00</updated>
    <id>http://blog.johtani.info/blog/2019/04/26/meetup-organizer-drinkup</id>
    <content type="html"><![CDATA[<p><a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/">Elasticsearch勉強会</a>や<a href="https://search-tech.connpass.com">検索技術勉強会</a>やってるんだけど、独学で勉強会やってるなーと思い、みんなはどうやってるんだろうとツイートしてみたところ。</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">あー、勉強会運営座談会したい。</p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1113015829195481088?ref_src=twsrc%5Etfw">2019年4月2日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p lang="ja" dir="ltr">面白そう</p>&mdash; 機械の体を手に入れるのよ鉄郎 (@tetsuroito) <a href="https://twitter.com/tetsuroito/status/1113017239937081344?ref_src=twsrc%5Etfw">2019年4月2日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p lang="ja" dir="ltr">やってみるか。</p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1113017372653215744?ref_src=twsrc%5Etfw">2019年4月2日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p lang="ja" dir="ltr">やりましょう</p>&mdash; 機械の体を手に入れるのよ鉄郎 (@tetsuroito) <a href="https://twitter.com/tetsuroito/status/1113017409928015872?ref_src=twsrc%5Etfw">2019年4月2日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>ってことで、何人か釣れたので、<a href="https://connpass.com/event/126699/">勉強会運営座談会</a>をやってみました。
会場提供していただいた、<a href="https://classi.jp">Classiさん</a>ありがとうございました！</p>

<!-- more -->


<p>参加してくれた人たちはまぁ、勉強会のサイトを見ていただければなんとなくわかるかなと。
自己紹介とどんな勉強会、読書会運営してますってとこから始めて、次のようなトピックについてピザ食いながら3時間くらい話しました。</p>

<ul>
<li>スピーカーの募集方法

<ul>
<li>運営側から声かけてる？それとも公募してる？</li>
<li>登壇時間とかどうしてる？</li>
<li>スピーカーになってもらうためになんかやってる？</li>
</ul>
</li>
<li>スケジュール管理

<ul>
<li>会場探し、スピーカー探し、イベントページ作るタイミングは？</li>
<li>複数拠点開催したことある？</li>
<li>ハンズオンとかはどうしてる？</li>
</ul>
</li>
<li>土日開催？平日開催？</li>
<li>アンケートとってますか？</li>
<li>使用してるイベントサイトは？</li>
<li>ドタキャン対応どうしてる？出欠とったりしてる？懇親会の規模とかどうやって見積もってる？</li>
<li>運営費用関連はどうしてる？

<ul>
<li>グッズとか、ツールとか、スピーカーへの謝礼とか</li>
</ul>
</li>
<li>運営って複数でやってる？

<ul>
<li>その時のツールは？</li>
<li>運営メンバーにはどうやってなってもらう？</li>
<li>録画配信とかまで手が回る？</li>
</ul>
</li>
<li>会場探すの大変じゃない？

<ul>
<li>会場の部屋の使い方はどうしてる？</li>
</ul>
</li>
<li>行動規範とかどうしてる？</li>
<li>読書会の場合に人が減ってったりしない？</li>
</ul>


<p>まぁ、こんな感じです。色々話してメモしてたんですが、まぁトピックくらいで。</p>

<p>そもそもは、勉強会の運営って本業ではない（はずな）ので、いかに楽をしつつうまく運営できるかってのを知りたいのと、
他の人どうやってるかってのからアイデアもらえるといいなーと思ったんでやってみました。
他のツールがどんなものかとか知れたし、あー、そういうやり方すればいいのねーみたいなのも知れたので、次回以降の勉強会に活かせればなーと。
自分がやってるやり方とかもブログ書くといいのかなぁ？</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">残念です！次回もやるかもしれないので、 <a href="https://twitter.com/johtani?ref_src=twsrc%5Etfw">@johtani</a> さんに期待してください！</p>&mdash; 機械の体を手に入れるのよ鉄郎 (@tetsuroito) <a href="https://twitter.com/tetsuroito/status/1121413483331895296?ref_src=twsrc%5Etfw">2019年4月25日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>次回やるのかなぁ？興味ある人いるのかなぁ？</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Search Engineering Tech Talk(検索技術勉強会)の運営として参加して始めてみました。]]></title>
    <link href="http://blog.johtani.info/blog/2019/02/26/start-search-engineering-tech-talk/"/>
    <updated>2019-02-26T23:38:00+09:00</updated>
    <id>http://blog.johtani.info/blog/2019/02/26/start-search-engineering-tech-talk</id>
    <content type="html"><![CDATA[<p>どーも、johtaniです。</p>

<p><a href="https://search-tech.connpass.com/event/112866/">Search Engineering Tech Talk</a>という勉強会に運営として参加して、第1回の勉強会を開始しました。
本日（2/26）は第1回目だったので、ブログを残しておこうかと。</p>

<!-- more -->


<p>勉強会自体の資料については<a href="https://search-tech.connpass.com/event/112866/">第1回の勉強会のページ</a>にあるし、勉強会の感想とかブログはツイートやみんながブログを書いてくれると思うので、勉強会開催の経緯などについてブログを残しておこうかと。</p>

<h2>なんで始めたの？</h2>

<p>私自身が古くはFAST Searchに始まり、何か縁があって、
検索のシステムに長く携わってきたこと（Apache Solrの本書いたり、Elasticsearch勉強会始めたり）もあり、
検索が面白いなと日々思ってます（思ってるだけかもしれないが）。</p>

<p>で、これまでElasticsearch勉強会をやっているのですが、検索エンジン固有の話ではない、
いわゆる検索の共通の課題というのがあるなぁと。
そういう課題やノウハウって、製品に限らず共有できれば面白いことがもっとできるんじゃないだろうか？
と感じることが多々ありまして。
オープンソースのコミュニティをソースコードをベースではなく、共通の課題・話題を中心としたコミュニティが
あってもいいんじゃないかなぁと。</p>

<p>まぁ、要は、私がみんなの検索で困ってることとか、どうやって検索システム考えてるのかが聞きたかったわけですよ。</p>

<p>ということで、一人でやっても面白くないので、興味ありそうな人を募ってやってみようということを始めたのが2018年12月くらいです。</p>

<h2>運営とかどうしてるの？</h2>

<p>まずは、共同主催者（コアメンバー）を募集してみようということで、Googleフォーム作って、
興味ありそうな人がいる場所に投稿してみました。（TwitterとかFBとか）
で集まったのが今回紹介したメンバー（<a href="https://noti.st/johtani/ZsQG5A/search-engineering-tech-talk">スライド参照</a>）です。
ユーザー企業の人もいれば、私みたいな検索エンジンの人もいるので面白い感じにできたかなぁと。
で、スピーカーを運営や知り合いに声をかけて第1回をやってみたという感じです。</p>

<h2>今後どうするの？</h2>

<p>残念ながら次回はまだ未定です。
2ヶ月に1回くらいのペースで開催できればなーと思ってますが、スピーカーが集まるかなどによるかなぁと。
ということで、<a href="https://search-tech.connpass.com">勉強会のグループのページ</a>にスピーカー応募フォームのリンクがありますので、スピーカーに興味がある方は入力していただければと。</p>

<p>もちろん第2回はやりたいので、勉強会のページからの連絡をお待ちください！！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第25回Elasticsearch勉強会を開催しました。]]></title>
    <link href="http://blog.johtani.info/blog/2018/10/17/26th-elasticsearch-tokyo-meetup/"/>
    <updated>2018-10-17T17:33:50+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/10/17/26th-elasticsearch-tokyo-meetup</id>
    <content type="html"><![CDATA[<p>毎月開催の2回目になります。
今回は日経さんの会場をお借りしての開催となりました。</p>

<p>前回から、スピーカーの募集を<a href="http://bit.ly/SpeakerElasticTokyoMeetup">http://bit.ly/SpeakerElasticTokyoMeetup</a> で行なっております。
ぜひ皆さんのノウハウを共有していただけると助かります。
また、次回もすでにスケジュール済みです。次回は<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/events/254646236/">「ログ/メトリック分析」回</a>になります。</p>

<p>以下は、個人的なメモになります。</p>

<!-- more -->


<h3>メディアコンテンツ向け記事検索DBとして使うElasticsearch / Future Architect 株式会社 村田 靖拓さん (twitter: @famipapamart)</h3>

<ul>
<li>メディア記事コンテンツ検索</li>
<li>全ての情報が1indexに入っているようにすること。</li>
<li>typeは少し悩んだ。</li>
<li>範囲検索にはならない場合がある。（文字列で登録してWildcard検索できるようにした）</li>
<li>kuromojiで基本対応</li>
<li>異体字についてはchar filterでマッピング</li>
<li>細かな設定とかもスライドにて公開予定。

<ul>
<li>基本的なプラグインだけで対応した</li>
</ul>
</li>
<li>Dynamic Field mappingを有効にしたまま対応</li>
<li>パフォーマンス検証</li>
<li>初回のインデックスのロードは<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html#_warm_up_the_filesystem_cache">この辺かなぁ？</a>。</li>
<li>自力でQueryのoffset-limitを構築するのかぁ。

<ul>
<li>ソート条件が固定らしいのでできる方法</li>
</ul>
</li>
</ul>


<h3>minne での検索運用(仮) / @_shiro16 さん</h3>

<ul>
<li>ハンドメイドなものをマーケットプレイスがminne</li>
<li>SolrからElasticsearchに切り替えた話 2016/02以降はEs

<ul>
<li>昔は、DBからSolrへ同期</li>
<li>Es版ではDBからの同期ではなく、Workerに対してリクエストを入れる</li>
</ul>
</li>
<li>現状は独自にEC2で運用中</li>
<li>ユーザーが求めているものがきちんとでているかを計測している

<ul>
<li>行動ログはどんな感じ？</li>
<li>TDにログを入れて、CTRとかを計算してre:dashで可視化</li>
</ul>
</li>
<li>A/Bテストも実施

<ul>
<li>指標はキャンペーンなどが実施されている場合にブレる場合もある</li>
</ul>
</li>
<li>トレンドをログから知ることができる</li>
<li>Function Scoreでスコアを変更してる

<ul>
<li>季節的な単語でスコアを変更したりする</li>
</ul>
</li>
<li>ドリンクの対応などをして聴けてないところが。。。</li>
</ul>


<h3>query_stringのはなし / 加藤遼さん　(日本経済新聞社)</h3>

<p>電池が切れそう＋ピザとかの手配をしていたらメモが取れず。</p>

<ul>
<li>苦労が滲み出る感じのセッションでした。</li>
<li>query_string queryが実際にどんなクエリになっているかの説明を交えて説明してもらえたのはすごくよかったんじゃないかと。</li>
</ul>


<h2>まとめ</h2>

<p>検索は話してくれる人が多いし話題に事欠かないなぁという印象でした。
今回も、スピーカーの皆さん、会場提供をしていただいた日経さんありがとうございました。</p>

<p>他のユースケースのスピーカーも募集してます。ぜひMeetup.comの概要に記載してあるリンクからスピーカーの応募をお願いします！</p>
]]></content>
  </entry>
  
</feed>
