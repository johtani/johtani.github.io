<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: 勉強会 | @johtaniの日記 2nd]]></title>
  <link href="http://blog.johtani.info/blog/categories/mian-qiang-hui/atom.xml" rel="self"/>
  <link href="http://blog.johtani.info/"/>
  <updated>2018-12-31T23:30:08+09:00</updated>
  <id>http://blog.johtani.info/</id>
  <author>
    <name><![CDATA[johtani]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[第25回Elasticsearch勉強会を開催しました。]]></title>
    <link href="http://blog.johtani.info/blog/2018/10/17/26th-elasticsearch-tokyo-meetup/"/>
    <updated>2018-10-17T17:33:50+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/10/17/26th-elasticsearch-tokyo-meetup</id>
    <content type="html"><![CDATA[<p>毎月開催の2回目になります。
今回は日経さんの会場をお借りしての開催となりました。</p>

<p>前回から、スピーカーの募集を<a href="http://bit.ly/SpeakerElasticTokyoMeetup">http://bit.ly/SpeakerElasticTokyoMeetup</a> で行なっております。
ぜひ皆さんのノウハウを共有していただけると助かります。
また、次回もすでにスケジュール済みです。次回は<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/events/254646236/">「ログ/メトリック分析」回</a>になります。</p>

<p>以下は、個人的なメモになります。</p>

<!-- more -->


<h3>メディアコンテンツ向け記事検索DBとして使うElasticsearch / Future Architect 株式会社 村田 靖拓さん (twitter: @famipapamart)</h3>

<ul>
<li>メディア記事コンテンツ検索</li>
<li>全ての情報が1indexに入っているようにすること。</li>
<li>typeは少し悩んだ。</li>
<li>範囲検索にはならない場合がある。（文字列で登録してWildcard検索できるようにした）</li>
<li>kuromojiで基本対応</li>
<li>異体字についてはchar filterでマッピング</li>
<li>細かな設定とかもスライドにて公開予定。

<ul>
<li>基本的なプラグインだけで対応した</li>
</ul>
</li>
<li>Dynamic Field mappingを有効にしたまま対応</li>
<li>パフォーマンス検証</li>
<li>初回のインデックスのロードは<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html#_warm_up_the_filesystem_cache">この辺かなぁ？</a>。</li>
<li>自力でQueryのoffset-limitを構築するのかぁ。

<ul>
<li>ソート条件が固定らしいのでできる方法</li>
</ul>
</li>
</ul>


<h3>minne での検索運用(仮) / @_shiro16 さん</h3>

<ul>
<li>ハンドメイドなものをマーケットプレイスがminne</li>
<li>SolrからElasticsearchに切り替えた話 2016/02以降はEs

<ul>
<li>昔は、DBからSolrへ同期</li>
<li>Es版ではDBからの同期ではなく、Workerに対してリクエストを入れる</li>
</ul>
</li>
<li>現状は独自にEC2で運用中</li>
<li>ユーザーが求めているものがきちんとでているかを計測している

<ul>
<li>行動ログはどんな感じ？</li>
<li>TDにログを入れて、CTRとかを計算してre:dashで可視化</li>
</ul>
</li>
<li>A/Bテストも実施

<ul>
<li>指標はキャンペーンなどが実施されている場合にブレる場合もある</li>
</ul>
</li>
<li>トレンドをログから知ることができる</li>
<li>Function Scoreでスコアを変更してる

<ul>
<li>季節的な単語でスコアを変更したりする</li>
</ul>
</li>
<li>ドリンクの対応などをして聴けてないところが。。。</li>
</ul>


<h3>query_stringのはなし / 加藤遼さん　(日本経済新聞社)</h3>

<p>電池が切れそう＋ピザとかの手配をしていたらメモが取れず。</p>

<ul>
<li>苦労が滲み出る感じのセッションでした。</li>
<li>query_string queryが実際にどんなクエリになっているかの説明を交えて説明してもらえたのはすごくよかったんじゃないかと。</li>
</ul>


<h2>まとめ</h2>

<p>検索は話してくれる人が多いし話題に事欠かないなぁという印象でした。
今回も、スピーカーの皆さん、会場提供をしていただいた日経さんありがとうございました。</p>

<p>他のユースケースのスピーカーも募集してます。ぜひMeetup.comの概要に記載してあるリンクからスピーカーの応募をお願いします！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JJUGナイトセミナーで話しました]]></title>
    <link href="http://blog.johtani.info/blog/2018/07/29/apm-java-at-jjug/"/>
    <updated>2018-07-29T14:45:30+09:00</updated>
    <id>http://blog.johtani.info/blog/2018/07/29/apm-java-at-jjug</id>
    <content type="html"><![CDATA[<p><a href="https://jjug.doorkeeper.jp/events/77485">7/25にJJUGナイトセミナー</a>でElastic Stackの紹介とAPMのJava Agentの紹介をしたので、補足のブログです。
（久々に書くな。。。）</p>

<!-- more -->


<p>スライドとサンプルアプリのリポジトリはこちら。</p>

<ul>
<li>スライド：<a href="https://speakerdeck.com/johtani/intro-elastic-stack-and-elastic-apm-java">https://speakerdeck.com/johtani/intro-elastic-stack-and-elastic-apm-java</a></li>
<li>リポジトリ：<a href="https://github.com/johtani/apm-beats-kubernetes-demo/tree/master">https://github.com/johtani/apm-beats-kubernetes-demo/tree/master</a></li>
</ul>


<h3>サンプルアプリ</h3>

<p>勉強会の頭でサンプルアプリへのアクセス用QRコードを用意して質問してもらう感じにしました。</p>

<p><img src="/images/entries/20180729/APM___Beats_demo_app.jpg" width="600"></p>

<p>アプリ自体が質問の受付と、そこにある質問に対して聞きたいかどうかのVoteができる仕組みになっています。
セッション最後にこの画面をみながら答えました。
手を挙げていただくよりも、匿名（名前入れるようになってますが、実名である必要はない）で登録できるし、
みんなが聞きたいかどうかもわかるので便利だなぁと。</p>

<p>元は、Elastic{ON} 2018であった「<a href="https://www.elastic.co/webinars/elasticsearch-log-collection-with-kubernetes-docker-and-containers">Docker &amp; Kubernetes Log Collection and Monitoring with Beats and Elasticsearch</a>」のサンプルアプリです。
これをSpring Bootに移植して、ちょっとだけサンプルコードを追加したものになります。</p>

<h3>構成とかの補足</h3>

<p>スライド、GitHubのリポジトリのREADMEにある図は、k8s上のサンプルアプリケーションの構成だけでした。
ElasticsearchとKibanaを含めた図はこんな感じです。</p>

<p><img src="/images/entries/20180729/system-overview.jpg" width="600"></p>

<p>k8s上の各種Beats、APM Serverは一旦Elastic CLoud Elasticsearch Service（AWS Tokyoリージョンにデプロイ）に対してデータを投げます。
で、KibanaはGKE(k8s on GCP)で動かして、実際に勉強会ではkubectl proxyで接続してから表示していました。
この構成にしている理由は次の理由です。</p>

<ul>
<li>Elastic CloudのElasticsearchクラスターにデータを投げている理由

<ul>
<li>クラスターの起動が簡単。</li>
<li>データを永続化したい。k8sのアプリは必要がなくなったらデータを削除したいから。</li>
<li>k8sのdeploymentを書く手間を省く</li>
<li>普段使ってるので。。。</li>
</ul>
</li>
<li>KibanaをGKEで動かした理由

<ul>
<li>Elastic Cloudでは<em>「現時点(7/29現在)」</em>で、KibanaでAPM専用のUIを起動できない</li>
<li>ローカルである必要はない</li>
</ul>
</li>
</ul>


<p>といったところです。
Elastic Cloudのインスタンスを起動したままにしておけば、デモをしなくても、このタイミングのログ、メトリクスを
再利用して話をすることも可能です。</p>

<h3>まとめ</h3>

<p>ということで、簡単ですが、構成の補足でした。
勉強会では告知したのですが、今後の勉強会はトピックスごとでやりたいなと。ということで、どんなトピックスに興味があるのか、スピーカーの応募にはどんなツールが話しやすいかなどといったことのアンケートを集めております。ぜひご協力ください！
また、アンケート、このブログに関する質問がある場合は、<a href="https://twitter.com/johtani">@johtani</a>、もしくはブログへのコメントでお願い致します。</p>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">今後の勉強会のやり方などについてアンケートを実施中です。<a href="https://t.co/XU15CHro0n">https://t.co/XU15CHro0n</a> 皆さん是非ご協力ください。ここにない項目については返信をお願いします。 <a href="https://twitter.com/hashtag/elasticsearchjp?src=hash&amp;ref_src=twsrc%5Etfw">#elasticsearchjp</a></p>&mdash; Jun Ohtani (@johtani) <a href="https://twitter.com/johtani/status/1021388358730170368?ref_src=twsrc%5Etfw">2018年7月23日</a></blockquote>


<p> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[検索座談会ってのをやってみた]]></title>
    <link href="http://blog.johtani.info/blog/2017/05/25/search-meetup/"/>
    <updated>2017-05-25T00:24:13+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/05/25/search-meetup</id>
    <content type="html"><![CDATA[<p>久々のブログ。
Elasticsearch勉強会を主催してますが、
プロダクトを超えて、検索で共通してある課題とか、悩みとか、あるかなぁと。
その辺りを話す場所を考えてみるのいいかもと思い、検索座談会ってのを5人でやってみた。</p>

<!-- more -->


<p>とりあえず、初めてなので、5名ほどで。プロダクトはかぶってない感じでした。</p>

<h3>話した議題はこの辺り。</h3>

<ul>
<li>形態素解析の辞書は何を使ってる？有償のもの？

<ul>
<li>そもそも形態素解析？</li>
</ul>
</li>
<li>辞書の更新とかは？

<ul>
<li>シノニムってどうしてる？</li>
</ul>
</li>
<li>サジェストとかのデータはどう作ってる？どうしてる？

<ul>
<li>検索ログとかから作ってる？</li>
</ul>
</li>
<li>検索結果のランキングって検索結果だけで決めるの？

<ul>
<li>検索漏れとかキーワードのミスマッチとかどうしてる？</li>
</ul>
</li>
</ul>


<h3>今後話したい内容はこの辺かな？</h3>

<ul>
<li>緯度経度系の検索</li>
<li>画像検索、音声検索</li>
<li>検索のキーワードの調査とかしてる人とかいるかな？</li>
<li>どんな機能が欲しい？</li>
<li>前処理としてはどんなことをしてる？</li>
</ul>


<p>このあとどうしていくかはまだ考え中。知り合いを捕まえて、どんなことしてるかを聞きにいくのもいいし、議題みたいなことを決めて、それを話してくれそうな人にコンタクトして議論するのもありかなぁ。
普通の勉強会みたいなのにするかもしれないし。
とりあえず、どのくらい興味を持ってる人がいるのかがわからないので。。。</p>

<p>もちろん、Elasticsearch勉強会は別でやっていきますよ。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第16回Elasticsearch勉強会を開催しました。 #elasticsearchjp]]></title>
    <link href="http://blog.johtani.info/blog/2016/06/28/16th-elasticsearch-meetup/"/>
    <updated>2016-06-28T13:55:55+09:00</updated>
    <id>http://blog.johtani.info/blog/2016/06/28/16th-elasticsearch-meetup</id>
    <content type="html"><![CDATA[<p><a href="https://elasticsearch.doorkeeper.jp/events/46539">第16回Elasticsearch勉強会</a>を開催しました。
スタッフの皆さん、スピーカーの皆さん、会場提供していただいた<a href="http://recruit-tech.co.jp">リクルートテクノロジーズさん</a>、ありがとうございました！
今回は、司会だけに注力してみました（）。</p>

<!-- more -->


<h3>チェックイン数など</h3>

<ul>
<li>チェックインした人：141名</li>
<li>キャンセルしなかった人：67名</li>
</ul>


<p>でした。</p>

<p>今回は、参加希望者が多くて、当日にも100名近いキャンセル待ちの方がいたので、
240名まで、参加者枠を増枠（会場キャパ190名程度）して対応しました。
まぁ、読み通り、1/3の方はキャンセルしない形でした。
天気も良く電車の遅延などもなさそうだったので、ちょっとドキドキしてたのですが。</p>

<p>以下は簡単なメモです。</p>

<h2>「LogstashとElasticsearchで作るEnterprise Search Platform」/ Elastic Kosho Owa</h2>

<p>スライド：<a href="https://speakerdeck.com/kosho/enabling-enterprise-search-platform-with-elastic-stack">https://speakerdeck.com/kosho/enabling-enterprise-search-platform-with-elastic-stack</a></p>

<ul>
<li>使ってるLogstashの設定ファイルを elastic-japan at elastic dot co に送るとTシャツがもらえるらしい。</li>
<li>Logstashの<a href="https://github.com/logstash-plugins/logstash-filter-ruby/blob/master/lib/logstash/filters/ruby.rb">filter-ruby</a>はここで、evalしてcallしてるから、特にforkとかしてないかと。</li>
</ul>


<h2>「企業・業界情報プラットフォームSPEEDAにおけるElasticsearchの活用」 / 株式会社ユーザベース 北内 啓さん</h2>

<p>スライド：<a href="http://www.slideshare.net/tau3000/speedaelasticsearch-63510388">http://www.slideshare.net/tau3000/speedaelasticsearch-63510388</a></p>

<ul>
<li>アルゴリズム関連の開発担当</li>
<li>企業データをいろんな軸で検索したい

<ul>
<li>データ数が約70億レコードになりそう（通貨 x MySQL）</li>
</ul>
</li>
<li>300万企業データ＋Nestedとかで持ってる。

<ul>
<li>11万フィールド？？？</li>
<li>10台の物理サーバに24仮想マシン</li>
</ul>
</li>
<li>企業名の検索

<ul>
<li>recall重視</li>
</ul>
</li>
<li>NewsPicksの検索機能

<ul>
<li>「日本 化粧品 売上高」業界のデータとかも観れるのかな？有料会員向け機能</li>
<li>登録済みキーワードかどうかをRDB＋Esに検索して、ID化するっぽい

<ul>
<li>ID（Analyze必要ない）検索だから、termクエリだった、サンプルが。</li>
</ul>
</li>
</ul>
</li>
<li>ノードの役割分担

<ul>
<li>更新はMasterNode経由でDataNodeへ。</li>
<li>検索はClientNode経由でDataNodeへ。</li>
</ul>
</li>
<li>1.xかぁ。。。</li>
</ul>


<h2>「Elasticsearchベースの全文検索システムFess」 / 株式会社エヌツーエスエム 菅谷信介さん</h2>

<p>スライド：<a href="http://www.slideshare.net/shinsuke/elasticsearchfess">http://www.slideshare.net/shinsuke/elasticsearchfess</a></p>

<ul>
<li>10.xからSolrをやめてElasticsearchへ。</li>
<li>日本語検索

<ul>
<li>bigram＋形態素（1文字検索とかに対応するため）</li>
</ul>
</li>
<li>NeologDに対応したkuromojiを利用</li>
<li>DBFluteをESFluteとしてEs対応</li>
<li>KOPFを組み込んで使ってる</li>
<li>configをREST API経由で更新できるプラグインあり</li>
</ul>


<h2>LT</h2>

<h3>「ElasticsearchとGCPのネットワークでハマった話」 株式会社サイバーエージェント 平田大地 さん @daichild</h3>

<p>スライド：<a href="https://speakerdeck.com/daic_h/gcpfalsenetutowakudehamatutahua">https://speakerdeck.com/daic_h/gcpfalsenetutowakudehamatutahua</a></p>

<ul>
<li>hhkb2 2刀流！</li>
<li>networkのKeep-alive周りで困ったよというお話。</li>
<li>後で聞いたけど、<a href="https://www.elastic.co/guide/en/elasticsearch/plugins/current/cloud-gce.html">GCE Cloud Plugin</a>は使ってるそうです。</li>
</ul>


<p><strong>06/28 17:00追記</strong></p>

<ul>
<li>Pingを定期的に実行させることで回避も出来るようです。</li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.3/modules-transport.html#_tcp_transport">transport.ping_schedule</a>に時間を指定します。通常のNode（Transport以外）は&#8217;-1&#8217;が指定してあり、動作してません。</li>
</ul>


<h3>「スクリプトフィールドで作るランキングみたいな何か」iwag さん</h3>

<p>スライド：<a href="https://speakerdeck.com/iwag/elasticsearch-dezuo-rurankingu">https://speakerdeck.com/iwag/elasticsearch-dezuo-rurankingu</a></p>

<ul>
<li>1.xかぁ。。。</li>
<li>あとは、<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html">function_score</a>とかも面白いですよ！</li>
</ul>


<h2>その他、感想などのブログ</h2>

<ul>
<li><a href="http://tsuyoshi-nakamura.hatenablog.com/entry/2016/06/28/115244">第16回elasticsearch勉強会に参加してきた</a></li>
<li><a href="https://masutaka.net/chalow/2016-06-28-1.html">第16回Elasticsearch勉強会に参加してきた </a></li>
</ul>


<h2>まとめ＋宣伝？</h2>

<p>1.xがまだまだいますねぇ、早く2.xにアップしましょう！（5.0ももう直ぐだし）。懇親会でも色々と話しましたが、<a href="https://discuss.elastic.co">https://discuss.elastic.co</a> というフォーラムあるので、ぜひ活用してください。</p>

<p>次回は8月末か9月頭かでしょうか。
<a href="http://www.ospn.jp/osc2016-kyoto/">7月末にOSC京都</a>に出没するので、京都で勉強会やりたいと思ってます！
会場とかスピーカーとか興味ある人連絡ください。</p>

<p>東京の勉強会のスピーカーも随時募集中ですので、連絡ください。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第15回Elasticsearch勉強会を開催しました。 #elasticsearchjp]]></title>
    <link href="http://blog.johtani.info/blog/2016/03/17/15th-elasticsearch-jp/"/>
    <updated>2016-03-17T12:43:00+09:00</updated>
    <id>http://blog.johtani.info/blog/2016/03/17/15th-elasticsearch-jp</id>
    <content type="html"><![CDATA[<p><a href="https://elasticsearch.doorkeeper.jp/events/40444">第15回Elasticsearch勉強会</a>を開催しました。
スタッフの皆さん、スピーカーの皆さん、会場提供していただいた<a href="http://recruit-tech.co.jp">リクルートテクノロジーズさん</a>、ありがとうございました！
今回は、Elastic{on} 2016開催直後ということで、大半はElastic{on}に関する話でした。</p>

<!-- more -->


<h3>チェックイン数など</h3>

<ul>
<li>チェックインした人：114名</li>
<li>キャンセルしなかった人：62名</li>
</ul>


<p>でした。
今回は、少しおそめで1時間前にキャンセル待ちがいない状態にしました。
まぁ、いつもの感じでしょうか。数値も安定してきた感じですかね。</p>

<h2>&ldquo;Elasticsearchと機械学習を実際に連携させる&rdquo; / <a href="https://www.preferred-networks.jp">Preferred Networks America, Inc.</a> CTO 久保田展行(Kubota Nobuyuki) さん</h2>

<p>スライド：<a href="http://www.slideshare.net/nobu_k/elasticsearch-59627321">Elasticsearchと機械学習を実際に連携させる</a></p>

<p><a href="http://blog.johtani.info/blog/2016/01/08/14th-elasticcsearch-jp/">前回の続き</a>の話で、今回が本題でした。</p>

<p>勉強会直前に発表された<a href="http://sensorbee.io">SensorBee</a>をElasticsearchと一緒に使うとどんなことができるかというお話です。
まぁ、前処理重要ですよねというのが、いつものことですが、印象的でした。
いつものようにわかりやすい説明だったので、使ってブログを書いて欲しいなと。</p>

<p>発表の中で、説明に出てきたデモとか。
* <a href="https://research.preferred.jp/2016/01/ces2016/">CES2016でロボットカーのデモを展示してきました</a></p>

<h2>&ldquo;Elastic{ON} 2016レポート&rdquo; / Elastic Jun Ohtani</h2>

<p>スライド：<a href="https://speakerdeck.com/johtani/elastic-on-2016-repoto">elastic{on} 2016 レポート</a></p>

<p>写真多めで、キーノートをメインに話をしました。</p>

<p>簡単なまとめとしては</p>

<ul>
<li>プロダクトロゴができました。<a href="https://www.elastic.co/brand">ロゴ画像などはこちら</a></li>
<li>次のメインバージョンは全て5.0。（<a href="https://www.elastic.co/v5">5.0に関する通知が欲しい人はこちらで登録できます</a>）</li>
<li><a href="https://www.elastic.co/elasticon/conf/2016/sf">elastic{on} 2016のビデオなどはこちら</a></li>
<li>BBL始めます。連絡ください</li>
</ul>


<h2>&ldquo;Elastic{ON}の過ごし方&rdquo; / クラスメソッド株式会社 藤本 真司 さん</h2>

<p>スライド：<a href="http://dev.classmethod.jp/server-side/elasticsearch/elasticsearch-study-15-lt/">Elastic{ON}の過ごし方</a></p>

<p>印象に残ったのは</p>

<ul>
<li>「自他共に認めるブログの会社」</li>
<li>4/12にSAPさんに会場を借りてElastic＆クラスメソッドでイベントやります。</li>
</ul>


<p>やっぱりご飯が美味しいんですねぇ。
早速<a href="http://dev.classmethod.jp/server-side/elasticsearch/elasticsearch-study-15-lt/">ブログ</a>が書かれてました。</p>

<h2>&ldquo;Elastic{ON} 2016 見るべきセッション資料 7選&rdquo; / Acroquest Technology株式会社 谷本 心 さん</h2>

<p>スライド：<a href="https://speakerdeck.com/shintanimoto/elastic-on-2016-jian-rubekisetusiyonzi-liao-7xuan-number-elasticsearchjp">Elastic{ON} 2016 見るべきセッション資料 7選 #elasticsearchjp</a></p>

<p>印象に残ったのは</p>

<ul>
<li>東京でハンズオンやる会場提供者募集中！</li>
<li>Ingest Node（参考：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/ingest.html">Ingest Nodeのドキュメントは公開中。</a>）</li>
<li>Reindex API（参考：<a href="https://github.com/elastic/elasticsearch/pull/17060">Backport reindex to 2.x </a>）</li>
</ul>


<h2>その他、感想などのブログ</h2>

<ul>
<li><a href="http://dev.classmethod.jp/server-side/elasticsearch/elasticsearch-study-15-lt/">第15回elasticsearch勉強会にLTで登壇しました #elasticsearch #elasticsearchjp</a></li>
<li><a href="http://d.hatena.ne.jp/Kazuhira/20160316/1458142636">第15回elasticsearch勉強会に参加してきました #elasticsearch #elasticsearchjp</a></li>
</ul>


<h2>まとめ＋宣伝</h2>

<p>来年のElastic{ON}に参加したいと思っていただけたらよかったなと。</p>

<p>4/12にクラスメソッドさんとイベントを行います。また、ツイートすると思います。</p>

<p>次回はいつも通りだと5月中旬になるかと思います（大丈夫かな？<a href="http://www.ospn.jp/osc2016-nagoya/">OSC 2016 Nagoya</a>でしゃべったり、ブース出したりとかするけど）。
5末に名古屋に出没します。名古屋で勉強会できればやりたいと思ってます。会場とかスピーカーとか興味がある方は連絡ください。</p>
]]></content>
  </entry>
  
</feed>
