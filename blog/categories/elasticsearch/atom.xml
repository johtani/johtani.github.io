<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: elasticsearch | @johtaniの日記 2nd]]></title>
  <link href="http://blog.johtani.info/blog/categories/elasticsearch/atom.xml" rel="self"/>
  <link href="http://blog.johtani.info/"/>
  <updated>2018-02-15T23:04:48+09:00</updated>
  <id>http://blog.johtani.info/</id>
  <author>
    <name><![CDATA[johtani]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[2018年のElasticは？]]></title>
    <link href="http://blog.johtani.info/blog/2017/12/24/elastic-2018/"/>
    <updated>2017-12-24T23:10:16+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/12/24/elastic-2018</id>
    <content type="html"><![CDATA[<p>Merry Christmas!
<a href="https://qiita.com/advent-calendar/2017/elasticsearch">Elastic Stack Advent Calendar 2017</a>の24日目の記事になります。</p>

<p>ちょっとですが、2018年のElasticについて書いてみようかと思います。</p>

<!-- more -->


<h2>イベント</h2>

<p>いくつか出展が決まっているイベントがあるのでまずは宣伝を。</p>

<h4>OSC Osaka 2018</h4>

<p>まずは、1月25日、26日に<a href="https://www.ospn.jp/osc2018-osaka/">OSC Osaka 2018</a>に出展し、話をします。参加者がいそうであれば、25日や26日の夜に勉強会もありかなぁと思っています。
セッションでは入門的な話をする予定です。ブースにいますので、色々質問がある関西の方はぜひご参加ください。</p>

<h4>Developer Summit 2018</h4>

<p>2月15日、16日は<a href="http://event.shoeisha.jp/devsumi/20180215">Developer Summit 2018</a>に出展します。
こちらでもブースにいますので、AMA（Ask Me Anything）的に使っていただくのもいいかなと。
デブサミに参加される方はぜひお立ち寄りください。</p>

<h4>Manabiya</h4>

<p>3月23日、24日は<a href="https://manabiya.tech">Manabiya</a>に出展します。
こちらでもAMAのつもりでブースを出す予定です。質問がある方はぜひお立ち寄りください。
こちらのイベントは初めての開催になるようなので、どんなイベントになるか楽しみにしています。</p>

<p>イベント回りはこの辺りで。
また、1月末に勉強会を予定しています。決まり次第また<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/">Meetup.com</a>の方々にメールを出す予定です。</p>

<h2>Elastic Stackの2018年は？</h2>

<h4>Canvas!</h4>

<p>昨年のElastic{ON}でみなさんをCanvasがリリースされるかなぁと。
現在、みなさんにテストしてもらえるように<a href="http://canvas.elastic.co">canvas.elastic.co</a>というサイトを公開中で、実際にインストールして試すことができるようになっています。
ぜひ、触って、全く新しいUIを体験して見てください。</p>

<h4>SQL?</h4>

<p>こちらも昨年のElastic{ON}でみなさんから反響があったものです。
もう直ぐでてくるのではないかなぁと。</p>

<h4>その他は？</h4>

<p>いくつか面白そうで、取り込み済みのものをピックアップしておきます。</p>

<ul>
<li><a href="https://github.com/elastic/elasticsearch/pull/27478">Add ranking evaluation API</a>

<ul>
<li>検索クエリなどに対して検索結果のランクのクオリティを評価するためのAPIの追加（7.0予定）</li>
</ul>
</li>
<li>JDK9サポート？

<ul>
<li>6.2でサポートされそうです。が、<a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.x/setup.html#jvm-version">LTSのJDK8が推奨のままの予定</a>です。</li>
</ul>
</li>
<li>High-level REST ClientでいくつかAPIが追加

<ul>
<li><a href="https://github.com/elastic/elasticsearch/pull/27574%E3%80%81https://github.com/elastic/elasticsearch/pull/27351">https://github.com/elastic/elasticsearch/pull/27574%E3%80%81https://github.com/elastic/elasticsearch/pull/27351</a></li>
</ul>
</li>
<li>APM正式リリース？

<ul>
<li><a href="https://www.elastic.co/jp/solutions/apm">ベータ版</a>がリリースされているので、秒読み段階？</li>
</ul>
</li>
</ul>


<h2>ということで</h2>

<p>より詳しく知りたい方は、サンフランシスコで開催される<a href="https://www.elastic.co/elasticon/conf/2018/sf">Elastic{ON} 2018</a>に参加するのが一番です！（ステマ）
私も参加予定ですので、ぜひ、現地でお会いし、色々な情報をゲットしましょう。</p>

<p>明日で、今年のAdvent Calendarも最後です。micci184さんの記事を楽しみにしましょう！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2017年のElastic StackとElastic]]></title>
    <link href="http://blog.johtani.info/blog/2017/12/01/whats-happen-at-elastic-in-2017/"/>
    <updated>2017-12-01T00:00:00+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/12/01/whats-happen-at-elastic-in-2017</id>
    <content type="html"><![CDATA[<p><a href="https://qiita.com/advent-calendar/2017/elasticsearch">Elastic stack (Elasticsearch) Advent Calendar 2017</a>の1日目の記事になります。</p>

<p>まだ、1ヶ月を残していますが、簡単に今年起こったことを振り返ってみようかと思います。思った以上に色々ありましたね。。。</p>

<!-- more -->


<h3>Elastic Stack 5.2.0リリース (1月)</h3>

<p><a href="https://www.elastic.co/jp/blog/elastic-stack-5-2-0-released">リリース記事はこちら</a></p>

<p>HeatmapがKibanaで追加されたり、Heartbeatがベータですが追加されました。
個人的には、Terms aggregationの<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.2/search-aggregations-bucket-terms-aggregation.html#_filtering_values_with_partitions">Filtering Valuesによるパーティション</a>が便利になったと思います。Terms Aggsでページングに似たことができるようになりました。</p>

<h3>Elastic{ON}17開催 (3月)</h3>

<p>第3回目のユーザカンファレンスが開催されました。
バレーダンサーの踊りから始まったキーノート、様々なユーザ企業によるユースケース発表などいろいろありました。
<a href="https://www.elastic.co/elasticon/conf/2017/sf">セッションはこちらのサイトから</a>から録画を見ることができます。
<a href="https://www.elastic.co/elasticon/conf/2017/sf/elasticsearch-sql">SQL for Elasticsearch</a>やAwardが目を引いたと思います。SQL対応まだ出てきていないですが、もうすぐじゃないかと！</p>

<h3>Elastic Stack 5.3.0リリース (3月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-5-3-0-released">リリース記事はこちら</a></p>

<p><a href="https://www.elastic.co/guide/en/beats/filebeat/current/filebeat-modules-overview.html">Filebeat module</a>が導入され、ログファイルを取り込んでKibanaで可視化するまでの手順がより簡単になりました。Elasticの目指しているものの一つに、シンプルな使い方、簡単にはじめられることといったものがあります。KibanaのTimepickerもより便利になったのも、このバージョンからです。</p>

<h3>ShayがCEOに (5月)</h3>

<p>2月にすでに発表されていましたが、Elasticsearchの生みの親のShay BanonがCEOに正式に就任しました。CEOになってさらに、精力的に様々なことをやっていて、本当にすごいなと思います。</p>

<h3>Elastic Stack 5.4.0、6.0.0-alpha1リリース (5月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-5-4-0-released">5.4.0リリース記事はこちら</a>、<a href="https://www.elastic.co/blog/elastic-stack-6-0-0-alpha1-released">6.0.0-alpha1リリース記事はこちら</a></p>

<p>5.4.0は節目になるリリースでした。Machine Learningがベータリリースとして、X-Packに追加されましたし、ElasticsearchではCross Cluster Searchの改善が進みました。LogstashではPersistent QueueがGAになりましたし、KibanaにはTime Series Visual BuilderやEvent Contextなどが追加されますます使いやすくなりました。</p>

<p>また、6.0.0のalpha版も同時にリリースされ、様々な方からのフィードバックが集まり始めました。</p>

<h3>Elastic Cloud Enterprise GAリリース (5月)</h3>

<p>Elastic Cloudのバックエンドの技術を製品に採用したものになります。
多くのElasticsearchクラスタを管理しないといけない方には朗報でした。</p>

<h3>OpbeatがJoin (6月)</h3>

<p><a href="https://www.elastic.co/blog/welcome-opbeat-to-the-elastic-family">Opbeatチームがジョイン</a>したのが6月です。Elastic StackがAPM(Application Performance Monitoring)でも活躍することになりそうです。APMの仕組みとしては、APM Agentをアプリ側に配置し、APM Serverへデータを送信し、Elasticsearchに保存、Kibanaで可視化するという流れになります。</p>

<h3>Elastic Stack 5.5.0リリース (7月)</h3>

<p><a href="https://www.elastic.co/blog/kibana-5-5-0-released">リリース記事はこちら</a></p>

<p>Machime LearningがGAリリースになったのが5.5.0です。色々な方から質問を受けました。それ以外にも、ElasticsearchのWindows MSI InstallerやKibanaのFilter editorなどが追加されました。Filter editorはこれまで検索条件を記述するのが難しいと感じていたKibanaユーザにとても喜んでもらえたものじゃないかなと。
GrokDebuggerが導入されたのもこのタイミングです。</p>

<h3>Elastic Stack 5.6.0リリース (9月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-5-6-0-released">リリース記事はこちら</a></p>

<p>5系最後のマイナーリリースであり、6へのアップグレードが楽になる様々な仕組みが用意されたのがこのバージョンです。ElasticsearchのJava High level REST clientが導入されたのもこのバージョンです。本当に様々な機能が次のメジャーバージョンとの互換性のために組み込まれています。。。</p>

<h3>Elastic Cloud on GCP (9月)</h3>

<p><a href="https://www.elastic.co/blog/announcing-the-ga-of-elastic-cloud-hosted-elasticsearch-on-google-cloud-platform-gcp">リリース記事はこちら</a></p>

<p>これまで、AWS上のみで展開していたElastic CloudがGCP上でも展開されることになりました。残念ながら、日本リージョンはまだありませんが、問い合わせなどが増えれば今後サポートされる可能性が高くなると思います！</p>

<h3>Elastic APM alpha (9月)</h3>

<p><a href="https://www.elastic.co/guide/en/apm/get-started/current/overview.html">リリース記事はこちら</a></p>

<p>OpbeatチームによりElastic StackのAPMがAlphaですがリリースされました。APMがOpen Sourceで利用できるんです！Agentがもっと増えてくると色々なことに使えるようになると思います。ぜひAgentを作成してみてください！</p>

<h3>Elastic Stack 6.0.0リリース (11月)</h3>

<p><a href="https://www.elastic.co/blog/elastic-stack-6-0-0-released">リリース記事はこちら</a></p>

<p>待ちに待った6.0.0のリリースです。<a href="https://events.elastic.co/6-0-elastic-stack-jp">新機能については本日(12/1)の昼に行われるウェビナーをご覧ください！</a></p>

<h3>SwiftypeがJoin (11月)</h3>

<p><a href="https://www.elastic.co/jp/about/press/elastic-acquires-saas-site-search-leader-swiftype">ニュースリリースはこちら</a></p>

<p>Swiftypeと呼ばれる検索のSaaSを提供している会社がジョインしました。
個人的には今年一番嬉しいニュースです。やはり、検索が好きなので。
簡単に<a href="http://blog.johtani.info/blog/2017/11/10/welcome-swiftype/">Site Searchを構築できる仕組み</a>は非常に面白いものです。
興味のある方は、ぜひ触ってみてください。日本語固有の機能などはまだないので、今後関わっていければなーと。</p>

<h3>Elastic{ON} Tour Tokyo開催 (12月)</h3>

<p>まだ開催前ですが、今年も<a href="https://www.elastic.co/elasticon/tour/2017/tokyo">東京で1dayイベントを開催</a>します。
残念ながら、もうSold outなので、キャンセル待ちになってしまっているみたいですが。私もスピーカーとして喋りますし、AMAブースにも立っています。
参加される方はぜひ声をかけていただければと思います。</p>

<h4>OSC 2017.Enterprise (12月)</h4>

<p>オープンソースカンファレンスで今年も様々な都市に出張しました。
今年の締めくくりということで、<a href="https://www.ospn.jp/osc2017.enterprise/">12/8に渋谷で開催されるカンファレンス</a>に出展します。時間のある方は、ぜひブースに遊びに来てください。入門者向けのセッションもあるので、こちらもお待ちしております。</p>

<h3>まとめ</h3>

<p>超駆け足ですが、今年を振り返ってみました。
今年もいろんなことがありました。書くのが大変だったw。
OSCなどイベントで声をかけていただいた皆様、ありがとうございました。</p>

<p>さて、<a href="https://qiita.com/advent-calendar/2017/elasticsearch">Elastic Stack Advent Calendar 2017</a>は始まったばかりです。これからの記事を楽しみにしています！</p>

<h4>ということで、</h4>

<p>次は<a href="https://qiita.com/aeroastro">aeroastroさん</a>の「Elasticsearchのインデックスを本当の意味で無停止再構築する方法」（<a href="https://qiita.com/advent-calendar/2017/elasticsearch">Advent Calendarのページはこちら</a>）になります、お楽しみに！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[データ分析基盤構築入門 を一部執筆しました。]]></title>
    <link href="http://blog.johtani.info/blog/2017/09/21/release-intro-logging-analysis-system/"/>
    <updated>2017-09-21T10:02:30+09:00</updated>
    <id>http://blog.johtani.info/blog/2017/09/21/release-intro-logging-analysis-system</id>
    <content type="html"><![CDATA[<p>久々に執筆しました。といっても、<a href="http://blog.johtani.info/blog/2014/08/04/release-magazine-book-of-log-aggs-and-viz/">以前の書籍</a>の更新版です。
まぁ、更新版といっても、私以外の方々は結構な量を書き直しor新規書き起こしされてますが。。。</p>

<p>ということで、みなさん「買って」から感想をいただけるとうれしいです！（以下の画像でAmazonにジャンプできます！Kindle版も発売中です。）</p>

<p><a target="_blank"  href="https://www.amazon.co.jp/gp/product/477419218X/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=477419218X&linkCode=as2&tag=johtani-22&linkId=f7cbe8130343ea340b18b53eba20d4b7"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=477419218X&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=johtani-22" ></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=johtani-22&l=am2&o=9&a=477419218X" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>

<!-- more -->


<p>今回もElasticsearchの章を担当しました。
5.4ベースで書きましたが、ちょっとずつ6でどう変わるかなども記載してあります。
また、付録ではLogstashやBeatsにもちょっと触れています。
また、自分が一番好きなKibanaの機能であるDev ToolsのConsoleについても記載してあります。こちらも合わせて目を通していただければと。</p>

<p>みなさんのフィードバック（ツイート、ブログ、Amazonのコメントなどなど）をお待ちしております！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[2016年のElastic Stack]]></title>
    <link href="http://blog.johtani.info/blog/2016/12/25/elasticsearch-6-features/"/>
    <updated>2016-12-25T00:03:50+09:00</updated>
    <id>http://blog.johtani.info/blog/2016/12/25/elasticsearch-6-features</id>
    <content type="html"><![CDATA[<p>Merry Christmas!
<a href="http://qiita.com/advent-calendar/2016/elastic">Elastic stack Advent Calendar 2016</a> 最終日の記事になります。</p>

<p>簡単に今年の変遷を振り返ってみます。</p>

<!-- more -->


<h2>Elasticsearch 2.2 (2月)</h2>

<ul>
<li><a href="https://www.elastic.co/jp/blog/elasticsearch-2-2-0-and-2-1-2-and-1-7-5-released">Elasticsearch 2.2.0、2.1.2、1.7.5リリース</a></li>
</ul>


<p>クエリプロファイラやGeo系の性能改善などが取り込まれました。
また、同時期にリリースされたKibana 4.4ではColor pickerやShare用のURLの短縮化機能なども追加されました。</p>

<h2>第2回目のユーザカンファレンス、Elastic{ON}開催（2月）</h2>

<p>サンフランシスコで、弊社第2回目のカンファレンスが開催されました。
2015年の会場よりも大きくなり、多数の方に参加いただきました。
ここで、以下の発表がありました。</p>

<h3>Elastic StackとX-Packの紹介</h3>

<p>これまで、ELK stackと呼ばれて意味明日が、Beatsチームの参加により、ELKだけではなくなったこともあり、Elastic Stackと呼び名を変える事になりました。
また、Marvel、Shield、Watcherなどの商用の拡張機能についても、
単体の名称ではなく、X（Extension）-Packと1つの名前になる事に。
詳細については<a href="https://www.elastic.co/jp/blog/heya-elastic-stack-and-x-pack">公式のブログ</a>をご覧ください。</p>

<h3>Elastic CloudとElastic Cloud Enterpriseの発表</h3>

<p>2015年にElasticにジョインし、
これまでFound.no（Found）と呼ばれていた弊社のElasticsearch as a Serviceが<a href="https://www.elastic.co/jp/blog/introducing-elastic-cloud-and-elastic-cloud-enterprise">Elastic Cloudと名称変更</a>しました。
また、Elastic Cloudで培っているノウハウを詰め込んだElastic Cloud Enterpriseも発表しました。実際に利用可能になるまでには
まだもう少しかかってしまいますが、アルファ版が公開されていますので、興味のある方は触ってみてください。</p>

<p>Elastic{ON}2016で撮影された、<a href="https://www.elastic.co/blog/life-without-elasticsearch-elasticon16">「Elasticsearchがないあなたの人生はどうなりますか？」</a> といった面白い動画も公開されています。</p>

<h2>Elasticsearch 2.3リリース（3月）</h2>

<ul>
<li><a href="https://www.elastic.co/jp/blog/elasticsearch-2-3-0-and-2-2-2-released">Elasticsearch 2.3.0および2.2.2をリリース</a></li>
</ul>


<p>Reindex APIが登場し、Mappingの変更やShard数の変更など、色々とデータの更新などがやりやすくなりました。
また、Task Managementの機能も追加され、長時間かかる処理を間違った場合などの対処が楽になりました。
個人的には、Deprecation Loggingの機能が導入されたことが嬉しいこととなります。次期メジャーバージョンで廃止される機能についてログに出力されるようになりました。
実際に運用されているアプリで利用している機能が今後なくなるかどうかをログを見るとわかるという仕組みです。</p>

<h2>Rally登場（4月）</h2>

<ul>
<li><a href="https://www.elastic.co/jp/blog/announcing-rally-benchmarking-for-elasticsearch">Rally登場：Elasticsearchのベンチマークツール</a></li>
</ul>


<p>Elasticsearchのベンチマークツールがリリースされました。
定期的にElasticsearchの性能を計測することは問題点を見つける事に役に立ちます。そういった手助けをしてくれるツールが公開されることは非常に便利なことかと。</p>

<h2>Elastic Stack 5 alpha1 リリース（4月）</h2>

<ul>
<li><a href="https://www.elastic.co/jp/blog/elastic-stack-release-5-0-0-alpha-1">Elastic Stack 5.0.0 alpha 1 リリース</a></li>
</ul>


<p>Ingest NodeやLucene 6、新しいKibanaのUIなど多くのものが詰まっていました。ここから多くのユーザにテストしてもらい、5.0の正式リリースを迎えることができました。</p>

<h2>Elasticsearch 2.4.0リリース（8月）</h2>

<ul>
<li><a href="https://www.elastic.co/jp/blog/release-bonanza-elasticsearch-graph-shield-watcher-marvel-reporting-logstash-2-4-beats-1-3-and-kibana-4-6-are-now-available"></a></li>
</ul>


<p>2.xの最後のマイナーバージョンリリースです。
Reportingなどの追加とドットつきフィールド名の復活がありました。</p>

<h2>Elastic Stack 5.0.0 beta1 リリース（9月）</h2>

<ul>
<li><a href="https://www.elastic.co/jp/blog/elastic-stack-release-5-0-0-beta1">Elastic Stack Release - 5.0.0-beta1</a></li>
</ul>


<p>ついにベータです。Painlessがスクリプトのデフォルトになったり、TimelionがKibanaに取り込まれるなど、正式リリースまであと少し！</p>

<h2>Prelertチームジョイン（9月）</h2>

<ul>
<li><a href="https://www.elastic.co/blog/welcome-prelert-to-the-elastic-team">Welcome Prelert to the Elastic Team</a></li>
</ul>


<p>Machine Learningエンジンを開発し、Elasticsearch,Kibanaとの組み合わせの製品をリリースしていたPrelertという会社がジョインしました。
Elasticsearchに保存された多くのデータをより活用していただくことができるかと思います。
Elastic{ON} Tour 2016 Tokyoで弊社SAの大輪の発表も人気があるものでした。まだベータ段階ですが、利用して見ることも可能です。
ビデオなどが公開されたらまたツイートしようと思います。</p>

<h2>Elastic{ON} Tour Tokyo 2016開催（12月）</h2>

<p>今年で2回目のTokyoローカルの1日イベントでした。
ブログは「まだ」書いてませんが、、、今回も盛りだくさんのイベントになりました。
早朝のトレーニング（ハンズオンではない）にも80名近くの方に参加していただけましたし、私はKibanaのキーノート＋デモという大役をもらいましたし、ちょっと大変でした。
今年もAMA（Ask Me Anything）ブースが大盛況でした。
色々な方から、弊社のサポート、開発者が色々な質問を受け、それに答えるという形です。楽しんでいただけたかと思います。
来年もぜひ開催したいなと思っています。</p>

<p>また、<a href="https://www.elastic.co/blog/first-wave-of-elasticon-17-sessions-revealed">Elastic{ON}17のセッションも</a>いくつか発表されています。
ぜひ、サンフランシスコで行われる本場のカンファレンスにもご参加ください！</p>

<h2>来年は？</h2>

<p>1月後半か2月に<a href="https://www.meetup.com/ja-JP/Tokyo-Elastic-Fantastics/">Elasticsearch勉強会</a>を検討しようと思っています。スピーカーに興味のある方は連絡いただければと。</p>

<p>会社としては、<a href="https://www.elastic.co/elasticon/conf/2017/sf">Elastic{ON}2017</a>が3月にまた開催されます。これで3回目となります。もちろん私も参加予定なので、参加される方は、現地で会いましょう！</p>

<p>そのほかにも<a href="http://www.bigdatacon.jp/ja/">BIG DATA ANALYTICS TOKYO</a>やオープンソースカンファレンス（<a href="http://www.ospn.jp/osc2017-osaka/">大阪</a>）、<a href="http://event.shoeisha.jp/devsumi/20170216/">デブサミ</a>といったカンファレンスに参加（登壇・ブースなど）予定です。
参加される方は、ぜひブースまでお越しください。</p>

<p>では、また来年のAdvent Calendarでお会いしましょう！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Elasticsearch 5.0の便利機能紹介？]]></title>
    <link href="http://blog.johtani.info/blog/2016/12/01/elasticsearch-5-dot-0-highlight/"/>
    <updated>2016-12-01T17:34:30+09:00</updated>
    <id>http://blog.johtani.info/blog/2016/12/01/elasticsearch-5-dot-0-highlight</id>
    <content type="html"><![CDATA[<p>Elastic stack Advent Calendar 1日目の記事になります。</p>

<p><a href="https://www.elastic.co/jp/blog/elasticsearch-5-0-0-released">Elasticsearch 5.0</a>が10月末にリリースされました。
リリースのブログでいくつか紹介されているのですが、そこでは紹介されていない機能について2、3紹介しようと思います。</p>

<!-- more -->


<p>その前に、5.0、あれ？その前は2.xじゃなかったっけ？？と困惑されている方もいるかと思うので、簡単に5となった経緯の紹介をしようかと。</p>

<h3>バージョン番号</h3>

<p>なぜ2から5に飛んだのかという話ですが、このスライドがその紹介になっています。</p>

<p><a href="https://speakerdeck.com/johtani/elastic-stack-5-dot-0-alpha1-alpha5?slide=5">https://speakerdeck.com/johtani/elastic-stack-5-dot-0-alpha1-alpha5?slide=5</a></p>

<p><a href="https://www.elastic.co/elasticon/conf/2016/sf/opening-keynote">Elastic{ON} 2016のキーノート</a>でも紹介がありましたが、KibanaやLogstashとElasticsearchを組み合わせて使うときにバージョンのミスマッチで動かないというユーザの声が上がっていました。
2.xのリリースから、同じ日にKibana、Logstash、Beatsもリリースするようになったのですが、
やはり、バージョン番号が異なるため、ミスマッチで動かないというユーザが時々いました。</p>

<p>Elastic Stackという名称にもなったため、バージョン番号をそろえようという事になり、
Elasticsearch、Kibana、Logstash、Beats全てが5.0.0としてリリースされ、
今後は同じバージョン番号になります。</p>

<p>ちなみに、「5」になった理由はKibanaのメジャーバージョンが「4」だったためです。</p>

<p>さて、では、いくつか機能の紹介を。</p>

<h3>Reindex from remote cluster</h3>

<p>Reindexが2.3から導入されました。データの再登録ができるようになり、マッピングの変更や
Shardの数の変更などが柔軟に行えるようになりました。
便利でしたが、あくまでも同一のクラスタでデータを登録し直す形でした。</p>

<p>5.0からはこの機能に加えて、<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html#reindex-from-remote">異なるクラスタからデータを取得してReindex</a>を行うことができるようになりました。
こんな形になります。</p>

<pre><code>POST _reindex
{
  "source": {
    "remote": {
      "host": "http://otherhost:9200",
      "username": "user",
      "password": "pass"
    },
    "index": "source",
    "query": {
      "match": {
        "test": "data"
      }
    }
  },
  "dest": {
    "index": "dest"
  }
}
</code></pre>

<p><code>username</code>と<code>password</code>はリモートのクラスタに認証の気候が存在する場合に利用できるオプションです。
また、ReindexのAPIはクエリを使用して、必要なデータだけを取得することが可能です。
この機能により、1.xや2.xのクラスタからデータを移行することが可能になります。</p>

<h3>Custom analyzer test using Analyze API</h3>

<p>もう一つ、ちょっとだけ便利な機能を紹介します。
独自にAnalyzerを定義（TokenizerとToken Filterなどを個別に設定）して、その挙動を確認するとき、2.xまでは、インデックスを作成してそのインデックスに対して<code>_analyze</code> APIを呼び出す必要がありました。</p>

<p>5.xからは<code>_analyze</code> APIの読み出しのパラメータで指定できるようになりました。
こんな感じです。ここでは、<code>lowercase</code>フィルタのあとに、<code>{...}</code>で<code>stop</code>フィルタを
パラメータの中で、指定しています。</p>

<pre><code>curl -XGET 'localhost:9200/_analyze' -d '
{
  "tokenizer" : "whitespace",
  "filter" : ["lowercase", {"type": "stop", "stopwords": ["a", "is", "this"]}],
  "text" : "this is a test"
}'
</code></pre>

<p>ちょっとだけですが、Analyzerなどを試すのが楽になるのではないでしょうか？</p>

<p>ということで、以上が1日目の記事でした。
Logstashなど、他の5.0.0に関する記事もAdvent Calendarに空きがあるようなので、個別にかこうかなと思います。お楽しみに！</p>
]]></content>
  </entry>
  
</feed>
